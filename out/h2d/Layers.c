// Generated by HLC 4.0.0 (HL v4)
#include <hl/code.h>

void h2d_Layers_addChild(h2d__Layers r0,h2d__Object r1) {
	int r3;
	r3 = 0;
	h2d_Layers_addChildAt(r0,r1,r3);
	return;
}

void h2d_Layers_add(h2d__Layers r0,h2d__Object r1,int r2) {
	h2d_Layers_addChildAt(r0,r1,r2);
	return;
}

void h2d_Layers_addChildAt(h2d__Layers r0,h2d__Object r1,int r2) {
	hl__types__ArrayObj r10;
	bool r5, r6;
	h2d__Object r4;
	hl__types__ArrayBytes_Int r9;
	vbyte *r12;
	int r7, r8, r11, r13, r14;
	if( r1 == NULL ) hl_null_access();
	r4 = r1->parent;
	if( r4 != ((h2d__Object)r0) ) goto label$681$8;
	r5 = r1->allocated;
	r6 = false;
	r1->allocated = r6;
	h2d_Layers_removeChild(r0,r1);
	r1->allocated = r5;
	label$681$8:
	r8 = r0->layerCount;
	if( r2 < r8 ) goto label$681$28;
	r9 = r0->layersIndexes;
	if( r9 == NULL ) hl_null_access();
	r7 = r0->layerCount;
	r8 = r7;
	++r7;
	r0->layerCount = r7;
	r10 = r0->children;
	if( r10 == NULL ) hl_null_access();
	r7 = r10->length;
	r11 = r9->length;
	if( ((unsigned)r8) < ((unsigned)r11) ) goto label$681$23;
	hl_types_ArrayBytes_Int___expand(r9,r8);
	label$681$23:
	r12 = r9->bytes;
	r11 = 2;
	r11 = r8 << r11;
	*(int*)(r12 + r11) = r7;
	goto label$681$8;
	label$681$28:
	r9 = r0->layersIndexes;
	if( r9 == NULL ) hl_null_access();
	r8 = r9->length;
	if( ((unsigned)r2) < ((unsigned)r8) ) goto label$681$34;
	r7 = 0;
	goto label$681$38;
	label$681$34:
	r12 = r9->bytes;
	r8 = 2;
	r8 = r2 << r8;
	r7 = *(int*)(r12 + r8);
	label$681$38:
	h2d_Object_addChildAt(((h2d__Object)r0),r1,r7);
	r7 = r2;
	r8 = r0->layerCount;
	label$681$41:
	if( r7 >= r8 ) goto label$681$57;
	r9 = r0->layersIndexes;
	if( r9 == NULL ) hl_null_access();
	r11 = r7;
	++r7;
	r13 = r9->length;
	if( ((unsigned)r11) < ((unsigned)r13) ) goto label$681$50;
	hl_types_ArrayBytes_Int___expand(r9,r11);
	label$681$50:
	r12 = r9->bytes;
	r13 = 2;
	r13 = r11 << r13;
	r14 = *(int*)(r12 + r13);
	++r14;
	*(int*)(r12 + r13) = r14;
	goto label$681$41;
	label$681$57:
	return;
}

void h2d_Layers_removeChild(h2d__Layers r0,h2d__Object r1) {
	hl__types__ArrayObj r5;
	bool r14;
	h2d__Object r9, r12;
	hl__types__ArrayBytes_Int r16;
	hl__types__ArrayBase r13;
	vdynamic *r10;
	vbyte *r17;
	varray *r11;
	int r2, r4, r6, r7, r8, r15, r18;
	r2 = 0;
	r5 = r0->children;
	if( r5 == NULL ) hl_null_access();
	r4 = r5->length;
	label$682$4:
	if( r2 >= r4 ) goto label$682$61;
	r6 = r2;
	++r2;
	r5 = r0->children;
	if( r5 == NULL ) hl_null_access();
	r8 = r5->length;
	if( ((unsigned)r6) < ((unsigned)r8) ) goto label$682$14;
	r9 = NULL;
	goto label$682$17;
	label$682$14:
	r11 = r5->array;
	r10 = ((vdynamic**)(r11 + 1))[r6];
	r9 = (h2d__Object)r10;
	label$682$17:
	if( r9 != r1 ) goto label$682$60;
	r5 = r0->children;
	if( r5 == NULL ) hl_null_access();
	r8 = 1;
	r13 = hl_types_ArrayObj_splice(r5,r6,r8);
	r5 = (hl__types__ArrayObj)hl_dyn_castp(&r13,&type$32,&type$46);
	if( r1 == NULL ) hl_null_access();
	r14 = r1->allocated;
	if( !r14 ) goto label$682$27;
	((void (*)(h2d__Object))r1->$type->vobj_proto[5])(r1);
	label$682$27:
	r12 = NULL;
	r1->parent = r12;
	r7 = r0->layerCount;
	r8 = 1;
	r7 = r7 - r8;
	label$682$32:
	r15 = 0;
	if( r7 < r15 ) goto label$682$59;
	r16 = r0->layersIndexes;
	if( r16 == NULL ) hl_null_access();
	r15 = r16->length;
	if( ((unsigned)r7) < ((unsigned)r15) ) goto label$682$41;
	r8 = 0;
	goto label$682$45;
	label$682$41:
	r17 = r16->bytes;
	r15 = 2;
	r15 = r7 << r15;
	r8 = *(int*)(r17 + r15);
	label$682$45:
	if( r6 >= r8 ) goto label$682$59;
	r16 = r0->layersIndexes;
	if( r16 == NULL ) hl_null_access();
	r15 = r16->length;
	if( ((unsigned)r7) < ((unsigned)r15) ) goto label$682$51;
	hl_types_ArrayBytes_Int___expand(r16,r7);
	label$682$51:
	r17 = r16->bytes;
	r15 = 2;
	r15 = r7 << r15;
	r18 = *(int*)(r17 + r15);
	--r18;
	*(int*)(r17 + r15) = r18;
	--r7;
	goto label$682$32;
	label$682$59:
	goto label$682$61;
	label$682$60:
	goto label$682$4;
	label$682$61:
	return;
}

void h2d_Layers_under(h2d__Layers r0,h2d__Object r1) {
	hl__types__ArrayObj r5, r17;
	h2d__Object r9;
	hl__types__ArrayBytes_Int r12;
	vdynamic *r10;
	vbyte *r15;
	varray *r11;
	int r2, r4, r6, r7, r8, r13, r14, r16;
	r2 = 0;
	r5 = r0->children;
	if( r5 == NULL ) hl_null_access();
	r4 = r5->length;
	label$683$4:
	if( r2 >= r4 ) goto label$683$70;
	r6 = r2;
	++r2;
	r5 = r0->children;
	if( r5 == NULL ) hl_null_access();
	r8 = r5->length;
	if( ((unsigned)r6) < ((unsigned)r8) ) goto label$683$14;
	r9 = NULL;
	goto label$683$17;
	label$683$14:
	r11 = r5->array;
	r10 = ((vdynamic**)(r11 + 1))[r6];
	r9 = (h2d__Object)r10;
	label$683$17:
	if( r9 != r1 ) goto label$683$69;
	r7 = 0;
	r8 = 0;
	r12 = r0->layersIndexes;
	label$683$21:
	if( r12 == NULL ) hl_null_access();
	r14 = r12->length;
	if( r8 >= r14 ) goto label$683$38;
	r14 = r12->length;
	if( ((unsigned)r8) < ((unsigned)r14) ) goto label$683$29;
	r13 = 0;
	goto label$683$33;
	label$683$29:
	r15 = r12->bytes;
	r14 = 2;
	r14 = r8 << r14;
	r13 = *(int*)(r15 + r14);
	label$683$33:
	++r8;
	if( r6 >= r13 ) goto label$683$36;
	goto label$683$38;
	label$683$36:
	r7 = r13;
	goto label$683$21;
	label$683$38:
	r8 = r6;
	label$683$39:
	if( r7 >= r8 ) goto label$683$61;
	r5 = r0->children;
	if( r5 == NULL ) hl_null_access();
	r17 = r0->children;
	if( r17 == NULL ) hl_null_access();
	r16 = 1;
	r14 = r8 - r16;
	r16 = r17->length;
	if( ((unsigned)r14) < ((unsigned)r16) ) goto label$683$51;
	r9 = NULL;
	goto label$683$54;
	label$683$51:
	r11 = r17->array;
	r10 = ((vdynamic**)(r11 + 1))[r14];
	r9 = (h2d__Object)r10;
	label$683$54:
	r14 = r5->length;
	if( ((unsigned)r8) < ((unsigned)r14) ) goto label$683$57;
	hl_types_ArrayObj___expand(r5,r8);
	label$683$57:
	r11 = r5->array;
	((h2d__Object*)(r11 + 1))[r8] = r9;
	--r8;
	goto label$683$39;
	label$683$61:
	r5 = r0->children;
	if( r5 == NULL ) hl_null_access();
	r14 = r5->length;
	if( ((unsigned)r7) < ((unsigned)r14) ) goto label$683$66;
	hl_types_ArrayObj___expand(r5,r7);
	label$683$66:
	r11 = r5->array;
	((h2d__Object*)(r11 + 1))[r7] = r1;
	goto label$683$70;
	label$683$69:
	goto label$683$4;
	label$683$70:
	return;
}

void h2d_Layers_over(h2d__Layers r0,h2d__Object r1) {
	hl__types__ArrayObj r5, r17;
	h2d__Object r9;
	hl__types__ArrayBytes_Int r12;
	vdynamic *r10;
	vbyte *r14;
	varray *r11;
	int r2, r4, r6, r7, r8, r13, r15, r16, r18, r19;
	r2 = 0;
	r5 = r0->children;
	if( r5 == NULL ) hl_null_access();
	r4 = r5->length;
	label$684$4:
	if( r2 >= r4 ) goto label$684$73;
	r6 = r2;
	++r2;
	r5 = r0->children;
	if( r5 == NULL ) hl_null_access();
	r8 = r5->length;
	if( ((unsigned)r6) < ((unsigned)r8) ) goto label$684$14;
	r9 = NULL;
	goto label$684$17;
	label$684$14:
	r11 = r5->array;
	r10 = ((vdynamic**)(r11 + 1))[r6];
	r9 = (h2d__Object)r10;
	label$684$17:
	if( r9 != r1 ) goto label$684$72;
	r7 = 0;
	r12 = r0->layersIndexes;
	label$684$20:
	if( r12 == NULL ) hl_null_access();
	r13 = r12->length;
	if( r7 >= r13 ) goto label$684$71;
	r13 = r12->length;
	if( ((unsigned)r7) < ((unsigned)r13) ) goto label$684$28;
	r8 = 0;
	goto label$684$32;
	label$684$28:
	r14 = r12->bytes;
	r13 = 2;
	r13 = r7 << r13;
	r8 = *(int*)(r14 + r13);
	label$684$32:
	++r7;
	if( r6 >= r8 ) goto label$684$70;
	r13 = r6;
	r16 = 1;
	r15 = r8 - r16;
	label$684$37:
	if( r13 >= r15 ) goto label$684$60;
	r16 = r13;
	++r13;
	r5 = r0->children;
	if( r5 == NULL ) hl_null_access();
	r17 = r0->children;
	if( r17 == NULL ) hl_null_access();
	r19 = 1;
	r18 = r16 + r19;
	r19 = r17->length;
	if( ((unsigned)r18) < ((unsigned)r19) ) goto label$684$51;
	r9 = NULL;
	goto label$684$54;
	label$684$51:
	r11 = r17->array;
	r10 = ((vdynamic**)(r11 + 1))[r18];
	r9 = (h2d__Object)r10;
	label$684$54:
	r18 = r5->length;
	if( ((unsigned)r16) < ((unsigned)r18) ) goto label$684$57;
	hl_types_ArrayObj___expand(r5,r16);
	label$684$57:
	r11 = r5->array;
	((h2d__Object*)(r11 + 1))[r16] = r9;
	goto label$684$37;
	label$684$60:
	r5 = r0->children;
	if( r5 == NULL ) hl_null_access();
	r15 = 1;
	r13 = r8 - r15;
	r15 = r5->length;
	if( ((unsigned)r13) < ((unsigned)r15) ) goto label$684$67;
	hl_types_ArrayObj___expand(r5,r13);
	label$684$67:
	r11 = r5->array;
	((h2d__Object*)(r11 + 1))[r13] = r1;
	goto label$684$71;
	label$684$70:
	goto label$684$20;
	label$684$71:
	goto label$684$73;
	label$684$72:
	goto label$684$4;
	label$684$73:
	return;
}

vdynamic* h2d_Layers_getLayer(h2d__Layers r0,int r1) {
	hxd__impl__ArrayIterator_h2d_Object r13;
	hl__types__ArrayObj r5;
	hl_type *r7;
	hl__types__ArrayBytes_Int r9;
	hl__types__ArrayBase r8;
	vdynamic *r12;
	vbyte *r10;
	varray *r6;
	int r3, r4, r11;
	r4 = r0->layerCount;
	if( r1 < r4 ) goto label$685$7;
	r7 = &type$136;
	r3 = 0;
	r6 = hl_alloc_array(r7,r3);
	r5 = hl_types_ArrayObj_alloc(r6);
	goto label$685$38;
	label$685$7:
	r5 = r0->children;
	if( r5 == NULL ) hl_null_access();
	r4 = 0;
	if( r1 != r4 ) goto label$685$13;
	r3 = 0;
	goto label$685$25;
	label$685$13:
	r9 = r0->layersIndexes;
	if( r9 == NULL ) hl_null_access();
	r4 = 1;
	r3 = r1 - r4;
	r4 = r9->length;
	if( ((unsigned)r3) < ((unsigned)r4) ) goto label$685$21;
	r3 = 0;
	goto label$685$25;
	label$685$21:
	r10 = r9->bytes;
	r4 = 2;
	r4 = r3 << r4;
	r3 = *(int*)(r10 + r4);
	label$685$25:
	r9 = r0->layersIndexes;
	if( r9 == NULL ) hl_null_access();
	r11 = r9->length;
	if( ((unsigned)r1) < ((unsigned)r11) ) goto label$685$31;
	r4 = 0;
	goto label$685$35;
	label$685$31:
	r10 = r9->bytes;
	r11 = 2;
	r11 = r1 << r11;
	r4 = *(int*)(r10 + r11);
	label$685$35:
	r12 = hl_alloc_dynamic(&type$3);
	r12->v.i = r4;
	r8 = hl_types_ArrayObj_slice(r5,r3,r12);
	r5 = (hl__types__ArrayObj)hl_dyn_castp(&r8,&type$32,&type$46);
	label$685$38:
	r13 = (hxd__impl__ArrayIterator_h2d_Object)hl_alloc_obj(hxd__impl__ArrayIterator_h2d_Object__val);
	hxd_impl_ArrayIterator_h2d_Object_new(r13,r5);
	return ((vdynamic*)r13);
}

void h2d_Layers_drawLayer(h2d__Layers r0,h2d__RenderContext r1,int r2) {
	hl__types__ArrayObj r16;
	bool r13;
	h2d__Object r17;
	hl__types__ArrayBytes_Int r10;
	double r7, r8, r9;
	vdynamic *r6;
	varray *r18;
	vbyte *r11;
	int r4, r5, r12, r14, r15;
	r5 = r0->layerCount;
	if( r2 < r5 ) goto label$686$3;
	return;
	label$686$3:
	if( r1 == NULL ) hl_null_access();
	r7 = r1->globalAlpha;
	r8 = r1->globalAlpha;
	r9 = r0->alpha;
	r8 = r8 * r9;
	r1->globalAlpha = r8;
	r5 = 0;
	if( r2 != r5 ) goto label$686$13;
	r4 = 0;
	goto label$686$25;
	label$686$13:
	r10 = r0->layersIndexes;
	if( r10 == NULL ) hl_null_access();
	r5 = 1;
	r4 = r2 - r5;
	r5 = r10->length;
	if( ((unsigned)r4) < ((unsigned)r5) ) goto label$686$21;
	r4 = 0;
	goto label$686$25;
	label$686$21:
	r11 = r10->bytes;
	r5 = 2;
	r5 = r4 << r5;
	r4 = *(int*)(r11 + r5);
	label$686$25:
	r10 = r0->layersIndexes;
	if( r10 == NULL ) hl_null_access();
	r12 = r10->length;
	if( ((unsigned)r2) < ((unsigned)r12) ) goto label$686$31;
	r5 = 0;
	goto label$686$35;
	label$686$31:
	r11 = r10->bytes;
	r12 = 2;
	r12 = r2 << r12;
	r5 = *(int*)(r11 + r12);
	label$686$35:
	r13 = r1->front2back;
	if( !r13 ) goto label$686$58;
	r12 = r4;
	label$686$38:
	if( r12 >= r5 ) goto label$686$57;
	r16 = r0->children;
	if( r16 == NULL ) hl_null_access();
	r15 = 1;
	r14 = r5 - r15;
	r15 = r12;
	++r12;
	r14 = r14 - r15;
	r15 = r16->length;
	if( ((unsigned)r14) < ((unsigned)r15) ) goto label$686$51;
	r17 = NULL;
	goto label$686$54;
	label$686$51:
	r18 = r16->array;
	r6 = ((vdynamic**)(r18 + 1))[r14];
	r17 = (h2d__Object)r6;
	label$686$54:
	if( r17 == NULL ) hl_null_access();
	((void (*)(h2d__Object,h2d__RenderContext))r17->$type->vobj_proto[10])(r17,r1);
	goto label$686$38;
	label$686$57:
	goto label$686$75;
	label$686$58:
	r12 = r4;
	label$686$59:
	if( r12 >= r5 ) goto label$686$75;
	r16 = r0->children;
	if( r16 == NULL ) hl_null_access();
	r14 = r12;
	++r12;
	r15 = r16->length;
	if( ((unsigned)r14) < ((unsigned)r15) ) goto label$686$69;
	r17 = NULL;
	goto label$686$72;
	label$686$69:
	r18 = r16->array;
	r6 = ((vdynamic**)(r18 + 1))[r14];
	r17 = (h2d__Object)r6;
	label$686$72:
	if( r17 == NULL ) hl_null_access();
	((void (*)(h2d__Object,h2d__RenderContext))r17->$type->vobj_proto[10])(r17,r1);
	goto label$686$59;
	label$686$75:
	if( r1 == NULL ) hl_null_access();
	r1->globalAlpha = r7;
	return;
}

void h2d_Layers_ysort(h2d__Layers r0,int r1) {
	hl__types__ArrayObj r11;
	h2d__Object r13, r16;
	hl__types__ArrayBytes_Int r6;
	double r10, r15, r17;
	vdynamic *r5;
	varray *r14;
	vbyte *r7;
	int r3, r4, r8, r9, r12, r18;
	r4 = r0->layerCount;
	if( r1 < r4 ) goto label$687$3;
	return;
	label$687$3:
	r4 = 0;
	if( r1 != r4 ) goto label$687$7;
	r3 = 0;
	goto label$687$19;
	label$687$7:
	r6 = r0->layersIndexes;
	if( r6 == NULL ) hl_null_access();
	r4 = 1;
	r3 = r1 - r4;
	r4 = r6->length;
	if( ((unsigned)r3) < ((unsigned)r4) ) goto label$687$15;
	r3 = 0;
	goto label$687$19;
	label$687$15:
	r7 = r6->bytes;
	r4 = 2;
	r4 = r3 << r4;
	r3 = *(int*)(r7 + r4);
	label$687$19:
	r6 = r0->layersIndexes;
	if( r6 == NULL ) hl_null_access();
	r8 = r6->length;
	if( ((unsigned)r1) < ((unsigned)r8) ) goto label$687$25;
	r4 = 0;
	goto label$687$29;
	label$687$25:
	r7 = r6->bytes;
	r8 = 2;
	r8 = r1 << r8;
	r4 = *(int*)(r7 + r8);
	label$687$29:
	if( r3 != r4 ) goto label$687$31;
	return;
	label$687$31:
	r8 = r3;
	r11 = r0->children;
	if( r11 == NULL ) hl_null_access();
	++r8;
	r12 = r11->length;
	if( ((unsigned)r3) < ((unsigned)r12) ) goto label$687$39;
	r13 = NULL;
	goto label$687$42;
	label$687$39:
	r14 = r11->array;
	r5 = ((vdynamic**)(r14 + 1))[r3];
	r13 = (h2d__Object)r5;
	label$687$42:
	if( r13 == NULL ) hl_null_access();
	r10 = r13->y;
	label$687$44:
	if( r8 >= r4 ) goto label$687$102;
	r11 = r0->children;
	if( r11 == NULL ) hl_null_access();
	r12 = r11->length;
	if( ((unsigned)r8) < ((unsigned)r12) ) goto label$687$52;
	r13 = NULL;
	goto label$687$55;
	label$687$52:
	r14 = r11->array;
	r5 = ((vdynamic**)(r14 + 1))[r8];
	r13 = (h2d__Object)r5;
	label$687$55:
	if( r13 == NULL ) hl_null_access();
	r15 = r13->y;
	if( !(r15 < r10) ) goto label$687$98;
	r12 = 1;
	r9 = r8 - r12;
	label$687$60:
	if( r9 < r3 ) goto label$687$88;
	r11 = r0->children;
	if( r11 == NULL ) hl_null_access();
	r18 = r11->length;
	if( ((unsigned)r9) < ((unsigned)r18) ) goto label$687$68;
	r16 = NULL;
	goto label$687$71;
	label$687$68:
	r14 = r11->array;
	r5 = ((vdynamic**)(r14 + 1))[r9];
	r16 = (h2d__Object)r5;
	label$687$71:
	if( r13 == NULL ) hl_null_access();
	r15 = r13->y;
	if( r16 == NULL ) hl_null_access();
	r17 = r16->y;
	if( !(r15 >= r17) ) goto label$687$77;
	goto label$687$88;
	label$687$77:
	r11 = r0->children;
	if( r11 == NULL ) hl_null_access();
	r18 = 1;
	r12 = r9 + r18;
	r18 = r11->length;
	if( ((unsigned)r12) < ((unsigned)r18) ) goto label$687$84;
	hl_types_ArrayObj___expand(r11,r12);
	label$687$84:
	r14 = r11->array;
	((h2d__Object*)(r14 + 1))[r12] = r16;
	--r9;
	goto label$687$60;
	label$687$88:
	r11 = r0->children;
	if( r11 == NULL ) hl_null_access();
	r18 = 1;
	r12 = r9 + r18;
	r18 = r11->length;
	if( ((unsigned)r12) < ((unsigned)r18) ) goto label$687$95;
	hl_types_ArrayObj___expand(r11,r12);
	label$687$95:
	r14 = r11->array;
	((h2d__Object*)(r14 + 1))[r12] = r13;
	goto label$687$100;
	label$687$98:
	r15 = r13->y;
	r10 = r15;
	label$687$100:
	++r8;
	goto label$687$44;
	label$687$102:
	return;
}

void h2d_Layers_new(h2d__Layers r0,h2d__Object r1) {
	hl__types__ArrayBytes_Int r3;
	int r5;
	vbyte *r4;
	h2d_Object_new(((h2d__Object)r0),r1);
	r5 = 0;
	r4 = hl_alloc_bytes(r5);
	r5 = 0;
	r5 = 0;
	r3 = hl_types_ArrayBase_allocI32(r4,r5);
	r0->layersIndexes = r3;
	r5 = 0;
	r0->layerCount = r5;
	return;
}

