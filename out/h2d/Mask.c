// Generated by HLC 4.0.0 (HL v4)
#include <hl/code.h>

void h2d_Mask_onParentChanged(h2d__Mask r0) {
	h2d_Object_onParentChanged(((h2d__Object)r0));
	h2d_Mask_updateMask(r0);
	return;
}

void h2d_Mask_onAdd(h2d__Mask r0) {
	h2d_Object_onAdd(((h2d__Object)r0));
	h2d_Mask_updateMask(r0);
	return;
}

void h2d_Mask_updateMask(h2d__Mask r0) {
	bool r6;
	h2d__Object r2, r4;
	h2d__$Mask r5;
	h2d__Mask r1;
	r1 = NULL;
	r0->parentMask = r1;
	r2 = r0->parent;
	label$1044$3:
	if( !r2 ) goto label$1044$18;
	r5 = (h2d__$Mask)global$91;
	r6 = hl_BaseType_check(((hl__BaseType)r5),((vdynamic*)r2));
	if( !r6 ) goto label$1044$10;
	r1 = (h2d__Mask)r2;
	goto label$1044$11;
	label$1044$10:
	r1 = NULL;
	label$1044$11:
	if( !r1 ) goto label$1044$14;
	r0->parentMask = r1;
	goto label$1044$18;
	label$1044$14:
	if( r2 == NULL ) hl_null_access();
	r4 = r2->parent;
	r2 = r4;
	goto label$1044$3;
	label$1044$18:
	return;
}

void h2d_Mask_getBoundsRec(h2d__Mask r0,h2d__Object r1,h2d__col__Bounds r2,bool r3) {
	hl__types__ArrayObj r12;
	bool r10;
	h2d__Object r15;
	double r4, r6, r7, r8, r9, r18, r19, r20, r21;
	vdynamic *r16;
	varray *r17;
	int r11, r13, r14;
	if( r2 == NULL ) hl_null_access();
	r4 = r2->xMin;
	r6 = r2->yMin;
	r7 = r2->xMax;
	r8 = r2->yMax;
	r9 = 1e+020;
	r2->xMin = r9;
	r9 = 1e+020;
	r2->yMin = r9;
	r9 = -1e+020;
	r2->xMax = r9;
	r9 = -1e+020;
	r2->yMax = r9;
	r10 = r0->posChanged;
	if( !r10 ) goto label$1045$37;
	h2d_Object_calcAbsPos(((h2d__Object)r0));
	r11 = 0;
	r12 = r0->children;
	label$1045$18:
	if( r12 == NULL ) hl_null_access();
	r14 = r12->length;
	if( r11 >= r14 ) goto label$1045$35;
	r13 = r11;
	++r11;
	r14 = r12->length;
	if( ((unsigned)r13) < ((unsigned)r14) ) goto label$1045$28;
	r15 = NULL;
	goto label$1045$31;
	label$1045$28:
	r17 = r12->array;
	r16 = ((vdynamic**)(r17 + 1))[r13];
	r15 = (h2d__Object)r16;
	label$1045$31:
	if( r15 == NULL ) hl_null_access();
	r10 = true;
	r15->posChanged = r10;
	goto label$1045$18;
	label$1045$35:
	r10 = false;
	r0->posChanged = r10;
	label$1045$37:
	r11 = 0;
	r9 = (double)r11;
	r11 = 0;
	r18 = (double)r11;
	r11 = r0->width;
	r19 = (double)r11;
	r11 = r0->height;
	r20 = (double)r11;
	h2d_Object_addBounds(((h2d__Object)r0),r1,r2,r9,r18,r19,r20);
	if( r2 == NULL ) hl_null_access();
	r9 = r2->xMin;
	r18 = r2->yMin;
	r19 = r2->xMax;
	r20 = r2->yMax;
	r2->xMin = r4;
	r2->xMax = r7;
	r2->yMin = r6;
	r2->yMax = r8;
	h2d_Object_getBoundsRec(((h2d__Object)r0),r1,r2,r3);
	r21 = r2->xMin;
	if( !(r21 < r9) ) goto label$1045$63;
	if( !(r9 < r4) ) goto label$1045$61;
	r21 = r9;
	goto label$1045$62;
	label$1045$61:
	r21 = r4;
	label$1045$62:
	r2->xMin = r21;
	label$1045$63:
	r21 = r2->yMin;
	if( !(r21 < r18) ) goto label$1045$70;
	if( !(r18 < r6) ) goto label$1045$68;
	r21 = r18;
	goto label$1045$69;
	label$1045$68:
	r21 = r6;
	label$1045$69:
	r2->yMin = r21;
	label$1045$70:
	r21 = r2->xMax;
	if( !(r19 < r21) ) goto label$1045$77;
	if( !(r7 < r19) ) goto label$1045$75;
	r21 = r19;
	goto label$1045$76;
	label$1045$75:
	r21 = r7;
	label$1045$76:
	r2->xMax = r21;
	label$1045$77:
	r21 = r2->yMax;
	if( !(r20 < r21) ) goto label$1045$84;
	if( !(r8 < r20) ) goto label$1045$82;
	r21 = r20;
	goto label$1045$83;
	label$1045$82:
	r21 = r8;
	label$1045$83:
	r2->yMax = r21;
	label$1045$84:
	return;
}

void h2d_Mask_drawRec(h2d__Mask r0,h2d__RenderContext r1) {
	bool r11;
	h3d__Engine r16;
	double r2, r4, r5, r7, r8, r9, r10, r12, r13, r14, r15;
	int *r17, *r18, *r19, *r20;
	int r6;
	r2 = r0->absX;
	r4 = r0->absY;
	r6 = r0->width;
	r5 = (double)r6;
	r7 = r0->matA;
	r5 = r5 * r7;
	r6 = r0->height;
	r7 = (double)r6;
	r8 = r0->matC;
	r7 = r7 * r8;
	r5 = r5 + r7;
	r7 = r0->absX;
	r5 = r5 + r7;
	r6 = r0->width;
	r7 = (double)r6;
	r8 = r0->matB;
	r7 = r7 * r8;
	r6 = r0->height;
	r8 = (double)r6;
	r9 = r0->matD;
	r8 = r8 * r9;
	r7 = r7 + r8;
	r8 = r0->absY;
	r7 = r7 + r8;
	if( !(r5 < r2) ) goto label$1046$28;
	r8 = r2;
	r2 = r5;
	r5 = r8;
	label$1046$28:
	if( !(r7 < r4) ) goto label$1046$32;
	r8 = r4;
	r4 = r7;
	r7 = r8;
	label$1046$32:
	if( r1 == NULL ) hl_null_access();
	r11 = r1->hasRenderZone;
	if( !r11 ) goto label$1046$45;
	r9 = r1->renderX;
	r10 = r1->renderY;
	r12 = r1->renderW;
	r13 = r1->renderH;
	r14 = r5 - r2;
	r15 = r7 - r4;
	h2d_RenderContext_setRenderZone(r1,r2,r4,r14,r15);
	h2d_Object_drawRec(((h2d__Object)r0),r1);
	h2d_RenderContext_setRenderZone(r1,r9,r10,r12,r13);
	goto label$1046$58;
	label$1046$45:
	r12 = r5 - r2;
	r13 = r7 - r4;
	h2d_RenderContext_setRenderZone(r1,r2,r4,r12,r13);
	h2d_Object_drawRec(((h2d__Object)r0),r1);
	r11 = false;
	r1->hasRenderZone = r11;
	r16 = r1->engine;
	if( r16 == NULL ) hl_null_access();
	r17 = NULL;
	r18 = NULL;
	r19 = NULL;
	r20 = NULL;
	h3d_Engine_setRenderZone(r16,r17,r18,r19,r20);
	label$1046$58:
	return;
}

void h2d_Mask_new(h2d__Mask r0,int r1,int r2,h2d__Object r3) {
	h2d_Object_new(((h2d__Object)r0),r3);
	r0->width = r1;
	r0->height = r2;
	return;
}

