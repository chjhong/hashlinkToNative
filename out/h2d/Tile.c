// Generated by HLC 4.0.0 (HL v4)
#include <hl/code.h>

h3d__mat__Texture h2d_Tile_getTexture(h2d__Tile r0) {
	h3d__mat__Texture r1;
	r1 = r0->innerTex;
	return r1;
}

bool h2d_Tile_isDisposed(h2d__Tile r0) {
	vvirtual *r2;
	bool r3;
	vclosure *r4, *r5;
	h3d__mat__Texture r1;
	r1 = r0->innerTex;
	if( !r1 ) goto label$1821$15;
	r1 = r0->innerTex;
	if( r1 == NULL ) hl_null_access();
	r2 = r1->_t;
	if( r2 ) goto label$1821$13;
	r4 = r1->realloc;
	r5 = NULL;
	if( r4 == r5 ) goto label$1821$11;
	r3 = false;
	goto label$1821$12;
	label$1821$11:
	r3 = true;
	label$1821$12:
	return r3;
	label$1821$13:
	r3 = false;
	return r3;
	label$1821$15:
	r3 = true;
	return r3;
}

void h2d_Tile_setTexture(h2d__Tile r0,h3d__mat__Texture r1) {
	double r3, r5;
	int r4, r6;
	r0->innerTex = r1;
	if( !r1 ) goto label$1822$31;
	r4 = r0->x;
	r3 = (double)r4;
	if( r1 == NULL ) hl_null_access();
	r4 = r1->width;
	r5 = (double)r4;
	r3 = r3 / r5;
	r0->u = r3;
	r4 = r0->y;
	r3 = (double)r4;
	r4 = r1->height;
	r5 = (double)r4;
	r3 = r3 / r5;
	r0->v = r3;
	r4 = r0->x;
	r6 = r0->width;
	r4 = r4 + r6;
	r3 = (double)r4;
	r4 = r1->width;
	r5 = (double)r4;
	r3 = r3 / r5;
	r0->u2 = r3;
	r4 = r0->y;
	r6 = r0->height;
	r4 = r4 + r6;
	r3 = (double)r4;
	r4 = r1->height;
	r5 = (double)r4;
	r3 = r3 / r5;
	r0->v2 = r3;
	label$1822$31:
	return;
}

void h2d_Tile_switchTexture(h2d__Tile r0,h2d__Tile r1) {
	h3d__mat__Texture r3;
	if( r1 == NULL ) hl_null_access();
	r3 = r1->innerTex;
	h2d_Tile_setTexture(r0,r3);
	return;
}

h2d__Tile h2d_Tile_sub(h2d__Tile r0,int r1,int r2,int r3,int r4,int* r5,int* r6) {
	h2d__Tile r9;
	h3d__mat__Texture r10;
	int r7, r8, r11, r12, r13, r14;
	if( r5 ) goto label$1824$3;
	r7 = 0;
	goto label$1824$4;
	label$1824$3:
	r7 = *r5;
	label$1824$4:
	if( r6 ) goto label$1824$7;
	r8 = 0;
	goto label$1824$8;
	label$1824$7:
	r8 = *r6;
	label$1824$8:
	r9 = (h2d__Tile)hl_alloc_obj(h2d__Tile__val);
	r10 = r0->innerTex;
	r11 = r0->x;
	r11 = r11 + r1;
	r12 = r0->y;
	r12 = r12 + r2;
	r13 = r7;
	r5 = &r13;
	r14 = r8;
	r6 = &r14;
	h2d_Tile_new(r9,r10,r11,r12,r3,r4,r5,r6);
	return r9;
}

h2d__Tile h2d_Tile_center(h2d__Tile r0) {
	h2d__Tile r1;
	int *r8, *r10;
	int r2, r3, r4, r5, r6, r7, r9;
	r2 = 0;
	r3 = 0;
	r4 = r0->width;
	r5 = r0->height;
	r6 = r0->width;
	r7 = 1;
	r6 = r6 >> r7;
	r6 = -r6;
	r8 = &r6;
	r7 = r0->height;
	r9 = 1;
	r7 = r7 >> r9;
	r7 = -r7;
	r10 = &r7;
	r1 = h2d_Tile_sub(r0,r2,r3,r4,r5,r8,r10);
	return r1;
}

void h2d_Tile_setCenterRatio(h2d__Tile r0,vdynamic* r1,vdynamic* r2) {
	double r3, r5, r7;
	int r4;
	if( r1 ) goto label$1826$3;
	r3 = 0.5;
	r1 = hl_alloc_dynamic(&type$6);
	r1->v.d = r3;
	label$1826$3:
	if( r2 ) goto label$1826$6;
	r3 = 0.5;
	r2 = hl_alloc_dynamic(&type$6);
	r2->v.d = r3;
	label$1826$6:
	r3 = r1 ? r1->v.d : 0;
	r4 = r0->width;
	r5 = (double)r4;
	r3 = r3 * r5;
	r4 = (int)r3;
	r4 = -r4;
	r0->dx = r4;
	r5 = r2 ? r2->v.d : 0;
	r4 = r0->height;
	r7 = (double)r4;
	r5 = r5 * r7;
	r4 = (int)r5;
	r4 = -r4;
	r0->dy = r4;
	return;
}

void h2d_Tile_flipX(h2d__Tile r0) {
	double r1, r3;
	int r4, r5;
	r1 = r0->u;
	r3 = r0->u2;
	r0->u = r3;
	r0->u2 = r1;
	r4 = r0->dx;
	r4 = -r4;
	r5 = r0->width;
	r4 = r4 - r5;
	r0->dx = r4;
	return;
}

void h2d_Tile_flipY(h2d__Tile r0) {
	double r1, r3;
	int r4, r5;
	r1 = r0->v;
	r3 = r0->v2;
	r0->v = r3;
	r0->v2 = r1;
	r4 = r0->dy;
	r4 = -r4;
	r5 = r0->height;
	r4 = r4 - r5;
	r0->dy = r4;
	return;
}

void h2d_Tile_setPosition(h2d__Tile r0,int r1,int r2) {
	double r6, r7;
	h3d__mat__Texture r4;
	int r3, r8;
	r0->x = r1;
	r0->y = r2;
	r4 = r0->innerTex;
	if( !r4 ) goto label$1829$29;
	r6 = (double)r1;
	if( r4 == NULL ) hl_null_access();
	r3 = r4->width;
	r7 = (double)r3;
	r6 = r6 / r7;
	r0->u = r6;
	r6 = (double)r2;
	r3 = r4->height;
	r7 = (double)r3;
	r6 = r6 / r7;
	r0->v = r6;
	r8 = r0->width;
	r3 = r1 + r8;
	r6 = (double)r3;
	r3 = r4->width;
	r7 = (double)r3;
	r6 = r6 / r7;
	r0->u2 = r6;
	r8 = r0->height;
	r3 = r2 + r8;
	r6 = (double)r3;
	r3 = r4->height;
	r7 = (double)r3;
	r6 = r6 / r7;
	r0->v2 = r6;
	label$1829$29:
	return;
}

void h2d_Tile_setSize(h2d__Tile r0,int r1,int r2) {
	double r6, r7;
	h3d__mat__Texture r4;
	int r3;
	r0->width = r1;
	r0->height = r2;
	r4 = r0->innerTex;
	if( !r4 ) goto label$1830$19;
	r3 = r0->x;
	r3 = r3 + r1;
	r6 = (double)r3;
	if( r4 == NULL ) hl_null_access();
	r3 = r4->width;
	r7 = (double)r3;
	r6 = r6 / r7;
	r0->u2 = r6;
	r3 = r0->y;
	r3 = r3 + r2;
	r6 = (double)r3;
	r3 = r4->height;
	r7 = (double)r3;
	r6 = r6 / r7;
	r0->v2 = r6;
	label$1830$19:
	return;
}

void h2d_Tile_scaleToSize(h2d__Tile r0,int r1,int r2) {
	r0->width = r1;
	r0->height = r2;
	return;
}

void h2d_Tile_scrollDiscrete(h2d__Tile r0,double r1,double r2) {
	double r5, r6, r8;
	int r7;
	h3d__mat__Texture r3;
	r3 = r0->innerTex;
	r5 = r0->u;
	if( r3 == NULL ) hl_null_access();
	r7 = r3->width;
	r8 = (double)r7;
	r6 = r1 / r8;
	r5 = r5 + r6;
	r0->u = r5;
	r5 = r0->v;
	r7 = r3->height;
	r8 = (double)r7;
	r6 = r2 / r8;
	r5 = r5 - r6;
	r0->v = r5;
	r5 = r0->u2;
	r7 = r3->width;
	r8 = (double)r7;
	r6 = r1 / r8;
	r5 = r5 + r6;
	r0->u2 = r5;
	r5 = r0->v2;
	r7 = r3->height;
	r8 = (double)r7;
	r6 = r2 / r8;
	r5 = r5 - r6;
	r0->v2 = r5;
	r5 = r0->u;
	r7 = r3->width;
	r6 = (double)r7;
	r5 = r5 * r6;
	r7 = (int)r5;
	r0->x = r7;
	r6 = r0->v;
	r7 = r3->height;
	r8 = (double)r7;
	r6 = r6 * r8;
	r7 = (int)r6;
	r0->y = r7;
	return;
}

void h2d_Tile_dispose(h2d__Tile r0) {
	h3d__mat__Texture r2;
	r2 = r0->innerTex;
	if( !r2 ) goto label$1833$5;
	r2 = r0->innerTex;
	if( r2 == NULL ) hl_null_access();
	h3d_mat_Texture_dispose(r2);
	label$1833$5:
	r2 = NULL;
	r0->innerTex = r2;
	return;
}

h2d__Tile h2d_Tile_clone(h2d__Tile r0) {
	h2d__Tile r1;
	double r12;
	int *r8, *r10;
	int r3, r4, r5, r6, r7, r9;
	h3d__mat__Texture r2;
	r1 = (h2d__Tile)hl_alloc_obj(h2d__Tile__val);
	r2 = NULL;
	r3 = r0->x;
	r4 = r0->y;
	r5 = r0->width;
	r6 = r0->height;
	r7 = r0->dx;
	r8 = &r7;
	r9 = r0->dy;
	r10 = &r9;
	h2d_Tile_new(r1,r2,r3,r4,r5,r6,r8,r10);
	r2 = r0->innerTex;
	r1->innerTex = r2;
	r12 = r0->u;
	r1->u = r12;
	r12 = r0->u2;
	r1->u2 = r12;
	r12 = r0->v;
	r1->v = r12;
	r12 = r0->v2;
	r1->v2 = r12;
	return r1;
}

hl__types__ArrayObj h2d_Tile_split(h2d__Tile r0,int* r1,bool* r2) {
	hl__types__ArrayObj r5;
	hl_type *r7;
	bool r4;
	h2d__Tile r15;
	double r10, r11;
	int *r18;
	varray *r6;
	int r3, r8, r9, r12, r13, r14, r16, r17;
	if( r1 ) goto label$1835$3;
	r3 = 0;
	goto label$1835$4;
	label$1835$3:
	r3 = *r1;
	label$1835$4:
	if( r2 ) goto label$1835$7;
	r4 = false;
	goto label$1835$8;
	label$1835$7:
	r4 = *r2;
	label$1835$8:
	r7 = &type$336;
	r8 = 0;
	r6 = hl_alloc_array(r7,r8);
	r5 = hl_types_ArrayObj_alloc(r6);
	if( !r4 ) goto label$1835$43;
	r9 = 0;
	if( r3 != r9 ) goto label$1835$22;
	r8 = r0->height;
	r10 = (double)r8;
	r8 = r0->width;
	r11 = (double)r8;
	r10 = r10 / r11;
	r8 = (int)r10;
	r3 = r8;
	label$1835$22:
	r8 = r0->height;
	r10 = (double)r8;
	r11 = (double)r3;
	r10 = r10 / r11;
	r8 = (int)r10;
	r9 = 0;
	r12 = r3;
	label$1835$29:
	if( r9 >= r12 ) goto label$1835$42;
	if( r5 == NULL ) hl_null_access();
	r13 = 0;
	r14 = r9;
	++r9;
	r14 = r14 * r8;
	r16 = r0->width;
	r1 = NULL;
	r18 = NULL;
	r15 = h2d_Tile_sub(r0,r13,r14,r16,r8,r1,r18);
	r13 = hl_types_ArrayObj_push(r5,((vdynamic*)r15));
	goto label$1835$29;
	label$1835$42:
	goto label$1835$72;
	label$1835$43:
	r9 = 0;
	if( r3 != r9 ) goto label$1835$52;
	r8 = r0->width;
	r10 = (double)r8;
	r8 = r0->height;
	r11 = (double)r8;
	r10 = r10 / r11;
	r8 = (int)r10;
	r3 = r8;
	label$1835$52:
	r8 = r0->width;
	r10 = (double)r8;
	r11 = (double)r3;
	r10 = r10 / r11;
	r8 = (int)r10;
	r9 = 0;
	r12 = r3;
	label$1835$59:
	if( r9 >= r12 ) goto label$1835$72;
	if( r5 == NULL ) hl_null_access();
	r13 = r9;
	++r9;
	r13 = r13 * r8;
	r14 = 0;
	r17 = r0->height;
	r1 = NULL;
	r18 = NULL;
	r15 = h2d_Tile_sub(r0,r13,r14,r8,r17,r1,r18);
	r13 = hl_types_ArrayObj_push(r5,((vdynamic*)r15));
	goto label$1835$59;
	label$1835$72:
	return r5;
}

hl__types__ArrayObj h2d_Tile_gridFlatten(h2d__Tile r0,int r1,int* r2,int* r3) {
	hl__types__ArrayObj r6;
	hl_type *r8;
	h2d__Tile r19;
	double r10, r12, r16;
	varray *r7;
	int r4, r5, r9, r11, r13, r14, r15, r17, r18, r20, r21;
	if( r2 ) goto label$1836$3;
	r4 = 0;
	goto label$1836$4;
	label$1836$3:
	r4 = *r2;
	label$1836$4:
	if( r3 ) goto label$1836$7;
	r5 = 0;
	goto label$1836$8;
	label$1836$7:
	r5 = *r3;
	label$1836$8:
	r8 = &type$336;
	r9 = 0;
	r7 = hl_alloc_array(r8,r9);
	r6 = hl_types_ArrayObj_alloc(r7);
	r9 = 0;
	r11 = r0->height;
	r10 = (double)r11;
	r12 = (double)r1;
	r10 = r10 / r12;
	r11 = (int)r10;
	label$1836$18:
	if( r9 >= r11 ) goto label$1836$43;
	r13 = r9;
	++r9;
	r14 = 0;
	r15 = r0->width;
	r12 = (double)r15;
	r16 = (double)r1;
	r12 = r12 / r16;
	r15 = (int)r12;
	label$1836$28:
	if( r14 >= r15 ) goto label$1836$42;
	if( r6 == NULL ) hl_null_access();
	r17 = r14;
	++r14;
	r17 = r17 * r1;
	r18 = r13 * r1;
	r20 = r4;
	r2 = &r20;
	r21 = r5;
	r3 = &r21;
	r19 = h2d_Tile_sub(r0,r17,r18,r1,r1,r2,r3);
	r17 = hl_types_ArrayObj_push(r6,((vdynamic*)r19));
	goto label$1836$28;
	label$1836$42:
	goto label$1836$18;
	label$1836$43:
	return r6;
}

hl__types__ArrayObj h2d_Tile_grid(h2d__Tile r0,int r1,int* r2,int* r3) {
	hl__types__ArrayObj r6, r15;
	hl_type *r8;
	h2d__Tile r20;
	double r10, r12, r17;
	varray *r7;
	int r4, r5, r9, r11, r13, r14, r16, r18, r19, r21, r22;
	if( r2 ) goto label$1837$3;
	r4 = 0;
	goto label$1837$4;
	label$1837$3:
	r4 = *r2;
	label$1837$4:
	if( r3 ) goto label$1837$7;
	r5 = 0;
	goto label$1837$8;
	label$1837$7:
	r5 = *r3;
	label$1837$8:
	r8 = &type$46;
	r9 = 0;
	r7 = hl_alloc_array(r8,r9);
	r6 = hl_types_ArrayObj_alloc(r7);
	r9 = 0;
	r11 = r0->width;
	r10 = (double)r11;
	r12 = (double)r1;
	r10 = r10 / r12;
	r11 = (int)r10;
	label$1837$18:
	if( r9 >= r11 ) goto label$1837$49;
	r13 = r9;
	++r9;
	r8 = &type$336;
	r14 = 0;
	r7 = hl_alloc_array(r8,r14);
	r15 = hl_types_ArrayObj_alloc(r7);
	r14 = 0;
	r16 = r0->height;
	r12 = (double)r16;
	r17 = (double)r1;
	r12 = r12 / r17;
	r16 = (int)r12;
	label$1837$32:
	if( r14 >= r16 ) goto label$1837$46;
	if( r15 == NULL ) hl_null_access();
	r18 = r13 * r1;
	r19 = r14;
	++r14;
	r19 = r19 * r1;
	r21 = r4;
	r2 = &r21;
	r22 = r5;
	r3 = &r22;
	r20 = h2d_Tile_sub(r0,r18,r19,r1,r1,r2,r3);
	r18 = hl_types_ArrayObj_push(r15,((vdynamic*)r20));
	goto label$1837$32;
	label$1837$46:
	if( r6 == NULL ) hl_null_access();
	r14 = hl_types_ArrayObj_push(r6,((vdynamic*)r15));
	goto label$1837$18;
	label$1837$49:
	return r6;
}

String h2d_Tile_toString(h2d__Tile r0) {
	String r1, r5, r7;
	int *r3;
	vbyte *r4;
	int r2, r6;
	r1 = (String)global$437;
	r2 = r0->x;
	r3 = &r2;
	r4 = hl_itos(r2,r3);
	r5 = String___alloc__(r4,r2);
	r1 = String___add__(r1,r5);
	r5 = (String)global$438;
	r1 = String___add__(r1,r5);
	r2 = r0->y;
	r3 = &r2;
	r4 = hl_itos(r2,r3);
	r5 = String___alloc__(r4,r2);
	r1 = String___add__(r1,r5);
	r5 = (String)global$438;
	r1 = String___add__(r1,r5);
	r2 = r0->width;
	r3 = &r2;
	r4 = hl_itos(r2,r3);
	r5 = String___alloc__(r4,r2);
	r1 = String___add__(r1,r5);
	r5 = (String)global$439;
	r1 = String___add__(r1,r5);
	r2 = r0->height;
	r3 = &r2;
	r4 = hl_itos(r2,r3);
	r5 = String___alloc__(r4,r2);
	r1 = String___add__(r1,r5);
	r2 = r0->dx;
	r6 = 0;
	if( r2 != r6 ) goto label$1838$33;
	r2 = r0->dy;
	r6 = 0;
	if( r2 == r6 ) goto label$1838$47;
	label$1838$33:
	r5 = (String)global$438;
	r2 = r0->dx;
	r3 = &r2;
	r4 = hl_itos(r2,r3);
	r7 = String___alloc__(r4,r2);
	r5 = String___add__(r5,r7);
	r7 = (String)global$440;
	r5 = String___add__(r5,r7);
	r2 = r0->dy;
	r3 = &r2;
	r4 = hl_itos(r2,r3);
	r7 = String___alloc__(r4,r2);
	r5 = String___add__(r5,r7);
	goto label$1838$48;
	label$1838$47:
	r5 = (String)global$8;
	label$1838$48:
	r1 = String___add__(r1,r5);
	r5 = (String)global$177;
	r1 = String___add__(r1,r5);
	return r1;
}

void h2d_Tile_upload(h2d__Tile r0,hxd__BitmapData r1) {
	int *r4, *r5;
	h3d__mat__Texture r3;
	r3 = r0->innerTex;
	if( r3 == NULL ) hl_null_access();
	r4 = NULL;
	r5 = NULL;
	h3d_mat_Texture_uploadBitmap(r3,r1,r4,r5);
	return;
}

vbyte* h2d_Tile___string(h2d__Tile r0) {
	String r2;
	vbyte *r1;
	r2 = h2d_Tile_toString(r0);
	if( r2 == NULL ) hl_null_access();
	r1 = r2->bytes;
	return r1;
}

void h2d_Tile_new(h2d__Tile r0,h3d__mat__Texture r1,int r2,int r3,int r4,int r5,int* r6,int* r7) {
	int r8, r9;
	if( r6 ) goto label$1847$3;
	r8 = 0;
	goto label$1847$4;
	label$1847$3:
	r8 = *r6;
	label$1847$4:
	if( r7 ) goto label$1847$7;
	r9 = 0;
	goto label$1847$8;
	label$1847$7:
	r9 = *r7;
	label$1847$8:
	r0->innerTex = r1;
	r0->x = r2;
	r0->y = r3;
	r0->width = r4;
	r0->height = r5;
	r0->dx = r8;
	r0->dy = r9;
	if( !r1 ) goto label$1847$17;
	h2d_Tile_setTexture(r0,r1);
	label$1847$17:
	return;
}

vvirtual* h2d_Tile_isEmpty(hxd__BitmapData r0,int r1,int r2,int r3,int r4,int r5) {
	vvirtual *r21;
	bool r6, r20;
	int r8, r9, r10, r11, r12, r13, r14, r15, r16, r17, r18, r19;
	r6 = true;
	r8 = r3;
	r9 = r4;
	r10 = 0;
	r11 = 0;
	r12 = 0;
	label$1846$6:
	if( r12 >= r3 ) goto label$1846$50;
	r13 = r12;
	++r12;
	r14 = 0;
	label$1846$11:
	if( r14 >= r4 ) goto label$1846$49;
	r15 = r14;
	++r14;
	if( r0 == NULL ) hl_null_access();
	r16 = r13 + r1;
	r17 = r15 + r2;
	r16 = hxd_BitmapData_getPixel(r0,r16,r17);
	r18 = -16777216;
	r17 = r16 & r18;
	r18 = 0;
	if( r17 != r18 ) goto label$1846$30;
	r18 = 0;
	if( r16 == r18 ) goto label$1846$29;
	r17 = r13 + r1;
	r18 = r15 + r2;
	r19 = 0;
	hxd_BitmapData_setPixel(r0,r17,r18,r19);
	label$1846$29:
	goto label$1846$11;
	label$1846$30:
	if( r16 == r5 ) goto label$1846$41;
	r20 = false;
	r6 = r20;
	if( r13 >= r8 ) goto label$1846$35;
	r8 = r13;
	label$1846$35:
	if( r15 >= r9 ) goto label$1846$37;
	r9 = r15;
	label$1846$37:
	if( r10 >= r13 ) goto label$1846$39;
	r10 = r13;
	label$1846$39:
	if( r11 >= r15 ) goto label$1846$41;
	r11 = r15;
	label$1846$41:
	if( r16 != r5 ) goto label$1846$48;
	r18 = 0;
	if( r16 == r18 ) goto label$1846$48;
	r17 = r13 + r1;
	r18 = r15 + r2;
	r19 = 0;
	hxd_BitmapData_setPixel(r0,r17,r18,r19);
	label$1846$48:
	goto label$1846$11;
	label$1846$49:
	goto label$1846$6;
	label$1846$50:
	if( !r6 ) goto label$1846$53;
	r21 = NULL;
	return r21;
	label$1846$53:
	r21 = hl_alloc_virtual(&type$343);
	if( hl_vfields(r21)[0] ) *(int*)(hl_vfields(r21)[0]) = (int)r8; else hl_dyn_seti(r21->value,22420/*dx*/,&type$3,r8);
	if( hl_vfields(r21)[1] ) *(int*)(hl_vfields(r21)[1]) = (int)r9; else hl_dyn_seti(r21->value,22421/*dy*/,&type$3,r9);
	r12 = r10 - r8;
	r13 = 1;
	r12 = r12 + r13;
	if( hl_vfields(r21)[3] ) *(int*)(hl_vfields(r21)[3]) = (int)r12; else hl_dyn_seti(r21->value,119/*w*/,&type$3,r12);
	r12 = r11 - r9;
	r13 = 1;
	r12 = r12 + r13;
	if( hl_vfields(r21)[2] ) *(int*)(hl_vfields(r21)[2]) = (int)r12; else hl_dyn_seti(r21->value,104/*h*/,&type$3,r12);
	return r21;
}

h2d__Tile h2d_Tile_fromPixels(hxd__Pixels r0,vvirtual* r1) {
	hxd__Pixels r2;
	vvirtual *r7;
	bool r3;
	h2d__Tile r8;
	int *r13, *r14;
	vdynamic *r4;
	int r9, r10, r11, r12;
	h3d__mat__Texture r6;
	if( r0 == NULL ) hl_null_access();
	r3 = true;
	r4 = hl_alloc_dynbool(r3);
	r2 = hxd_Pixels_makeSquare(r0,r4);
	r7 = NULL;
	r6 = h3d_mat_Texture_fromPixels(r2,r7);
	if( r2 == r0 ) goto label$1845$9;
	if( r2 == NULL ) hl_null_access();
	hxd_Pixels_dispose(r2);
	label$1845$9:
	r8 = (h2d__Tile)hl_alloc_obj(h2d__Tile__val);
	r9 = 0;
	r10 = 0;
	r11 = r0->width;
	r12 = r0->height;
	r13 = NULL;
	r14 = NULL;
	h2d_Tile_new(r8,r6,r9,r10,r11,r12,r13,r14);
	return r8;
}

h2d__Tile h2d_Tile_fromTexture(h3d__mat__Texture r0) {
	h2d__Tile r1;
	int *r6, *r7;
	int r2, r3, r4, r5;
	r1 = (h2d__Tile)hl_alloc_obj(h2d__Tile__val);
	r2 = 0;
	r3 = 0;
	if( r0 == NULL ) hl_null_access();
	r4 = r0->width;
	r5 = r0->height;
	r6 = NULL;
	r7 = NULL;
	h2d_Tile_new(r1,r0,r2,r3,r4,r5,r6,r7);
	return r1;
}

vvirtual* h2d_Tile_autoCut(hxd__BitmapData r0,int r1,vdynamic* r2,vvirtual* r3) {
	vvirtual *r26, *r35;
	hl__types__ArrayObj r10, r14;
	hl_type *r21;
	venum *r15;
	h2d__Tile r31;
	double r16, r17, r23;
	hxd__BitmapInnerDataImpl r7;
	int *r32, *r34;
	vdynamic *r5;
	varray *r20;
	h3d__mat__Texture r13;
	int r6, r8, r9, r11, r12, r18, r19, r22, r24, r25, r27, r28, r29, r30, r33;
	if( r2 ) goto label$1843$3;
	r5 = hl_alloc_dynamic(&type$3);
	r5->v.i = r1;
	r2 = r5;
	label$1843$3:
	if( r0 == NULL ) hl_null_access();
	r7 = r0->data;
	if( r7 == NULL ) hl_null_access();
	r6 = r7->width;
	r8 = 1;
	r6 = r6 - r8;
	r7 = r0->data;
	if( r7 == NULL ) hl_null_access();
	r8 = r7->height;
	r9 = 1;
	r8 = r8 - r9;
	r6 = hxd_BitmapData_getPixel(r0,r6,r8);
	r10 = (hl__types__ArrayObj)hl_alloc_obj(hl__types__ArrayObj__val);
	hl_types_ArrayObj_new(r10);
	r8 = 1;
	r9 = 1;
	label$1843$19:
	if( r0 == NULL ) hl_null_access();
	r7 = r0->data;
	if( r7 == NULL ) hl_null_access();
	r12 = r7->width;
	if( r8 >= r12 ) goto label$1843$29;
	r12 = 1;
	r11 = r8 << r12;
	r8 = r11;
	goto label$1843$19;
	label$1843$29:
	if( r0 == NULL ) hl_null_access();
	r7 = r0->data;
	if( r7 == NULL ) hl_null_access();
	r12 = r7->height;
	if( r9 >= r12 ) goto label$1843$39;
	r12 = 1;
	r11 = r9 << r12;
	r9 = r11;
	goto label$1843$29;
	label$1843$39:
	r13 = (h3d__mat__Texture)hl_alloc_obj(h3d__mat__Texture__val);
	r14 = NULL;
	r15 = NULL;
	h3d_mat_Texture_new(r13,r8,r9,r14,r15,r3);
	r11 = 0;
	r7 = r0->data;
	if( r7 == NULL ) hl_null_access();
	r12 = r7->height;
	r16 = (double)r12;
	r12 = r2 ? r2->v.i : 0;
	r17 = (double)r12;
	r16 = r16 / r17;
	r12 = (int)r16;
	label$1843$52:
	if( r11 >= r12 ) goto label$1843$106;
	r18 = r11;
	++r11;
	r21 = &type$336;
	r19 = 0;
	r20 = hl_alloc_array(r21,r19);
	r14 = hl_types_ArrayObj_alloc(r20);
	if( r10 == NULL ) hl_null_access();
	r22 = r10->length;
	if( ((unsigned)r18) < ((unsigned)r22) ) goto label$1843$64;
	hl_types_ArrayObj___expand(r10,r18);
	label$1843$64:
	r20 = r10->array;
	((hl__types__ArrayObj*)(r20 + 1))[r18] = r14;
	r19 = 0;
	if( r0 == NULL ) hl_null_access();
	r7 = r0->data;
	if( r7 == NULL ) hl_null_access();
	r22 = r7->width;
	r17 = (double)r22;
	r23 = (double)r1;
	r17 = r17 / r23;
	r22 = (int)r17;
	label$1843$75:
	if( r19 >= r22 ) goto label$1843$105;
	r24 = r19;
	++r19;
	r25 = r24 * r1;
	r28 = r2 ? r2->v.i : 0;
	r27 = r18 * r28;
	r29 = r2 ? r2->v.i : 0;
	r26 = h2d_Tile_isEmpty(r0,r25,r27,r1,r29,r6);
	if( r26 ) goto label$1843$86;
	goto label$1843$105;
	label$1843$86:
	if( r14 == NULL ) hl_null_access();
	r31 = (h2d__Tile)hl_alloc_obj(h2d__Tile__val);
	r25 = r24 * r1;
	if( r26 == NULL ) hl_null_access();
	r27 = hl_vfields(r26)[0] ? (*(int*)(hl_vfields(r26)[0])) : (int)hl_dyn_geti(r26->value,22420/*dx*/,&type$3);
	r25 = r25 + r27;
	r28 = r2 ? r2->v.i : 0;
	r27 = r18 * r28;
	r28 = hl_vfields(r26)[1] ? (*(int*)(hl_vfields(r26)[1])) : (int)hl_dyn_geti(r26->value,22421/*dy*/,&type$3);
	r27 = r27 + r28;
	r28 = hl_vfields(r26)[3] ? (*(int*)(hl_vfields(r26)[3])) : (int)hl_dyn_geti(r26->value,119/*w*/,&type$3);
	r29 = hl_vfields(r26)[2] ? (*(int*)(hl_vfields(r26)[2])) : (int)hl_dyn_geti(r26->value,104/*h*/,&type$3);
	r30 = hl_vfields(r26)[0] ? (*(int*)(hl_vfields(r26)[0])) : (int)hl_dyn_geti(r26->value,22420/*dx*/,&type$3);
	r32 = &r30;
	r33 = hl_vfields(r26)[1] ? (*(int*)(hl_vfields(r26)[1])) : (int)hl_dyn_geti(r26->value,22421/*dy*/,&type$3);
	r34 = &r33;
	h2d_Tile_new(r31,r13,r25,r27,r28,r29,r32,r34);
	r25 = hl_types_ArrayObj_push(r14,((vdynamic*)r31));
	goto label$1843$75;
	label$1843$105:
	goto label$1843$52;
	label$1843$106:
	r31 = (h2d__Tile)hl_alloc_obj(h2d__Tile__val);
	r11 = 0;
	r12 = 0;
	if( r0 == NULL ) hl_null_access();
	r7 = r0->data;
	if( r7 == NULL ) hl_null_access();
	r18 = r7->width;
	r7 = r0->data;
	if( r7 == NULL ) hl_null_access();
	r19 = r7->height;
	r32 = NULL;
	r34 = NULL;
	h2d_Tile_new(r31,r13,r11,r12,r18,r19,r32,r34);
	h2d_Tile_upload(r31,r0);
	r35 = hl_alloc_virtual(&type$339);
	if( hl_vfields(r35)[0] ) *(h2d__Tile*)(hl_vfields(r35)[0]) = (h2d__Tile)r31; else hl_dyn_setp(r35->value,139868483/*main*/,&type$336,r31);
	if( hl_vfields(r35)[1] ) *(hl__types__ArrayObj*)(hl_vfields(r35)[1]) = (hl__types__ArrayObj)r10; else hl_dyn_setp(r35->value,271908229/*tiles*/,&type$46,r10);
	return r35;
}

h2d__Tile h2d_Tile_fromBitmap(hxd__BitmapData r0,vvirtual* r1) {
	h2d__Tile r2;
	hxd__BitmapInnerDataImpl r7;
	int *r9, *r10;
	int r4, r5, r6, r8;
	h3d__mat__Texture r3;
	r2 = (h2d__Tile)hl_alloc_obj(h2d__Tile__val);
	r3 = h3d_mat_Texture_fromBitmap(r0,r1);
	r4 = 0;
	r5 = 0;
	if( r0 == NULL ) hl_null_access();
	r7 = r0->data;
	if( r7 == NULL ) hl_null_access();
	r6 = r7->width;
	r7 = r0->data;
	if( r7 == NULL ) hl_null_access();
	r8 = r7->height;
	r9 = NULL;
	r10 = NULL;
	h2d_Tile_new(r2,r3,r4,r5,r6,r8,r9,r10);
	return r2;
}

h2d__Tile h2d_Tile_fromColor(int r0,vdynamic* r1,vdynamic* r2,vdynamic* r3,vvirtual* r4) {
	h2d__Tile r7;
	double r6;
	int *r12, *r13;
	h3d__mat__Texture r8;
	int r5, r9, r10, r11;
	if( r1 ) goto label$1841$3;
	r5 = 1;
	r1 = hl_alloc_dynamic(&type$3);
	r1->v.i = r5;
	label$1841$3:
	if( r2 ) goto label$1841$6;
	r5 = 1;
	r2 = hl_alloc_dynamic(&type$3);
	r2->v.i = r5;
	label$1841$6:
	if( r3 ) goto label$1841$9;
	r6 = 1.;
	r3 = hl_alloc_dynamic(&type$6);
	r3->v.d = r6;
	label$1841$9:
	r7 = (h2d__Tile)hl_alloc_obj(h2d__Tile__val);
	r8 = h3d_mat_Texture_fromColor(r0,r3,r4);
	r5 = 0;
	r9 = 0;
	r10 = 1;
	r11 = 1;
	r12 = NULL;
	r13 = NULL;
	h2d_Tile_new(r7,r8,r5,r9,r10,r11,r12,r13);
	r5 = r1 ? r1->v.i : 0;
	r7->width = r5;
	r5 = r2 ? r2->v.i : 0;
	r7->height = r5;
	return r7;
}

