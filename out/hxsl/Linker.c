// Generated by HLC 4.0.0 (HL v4)
#include <hl/code.h>

void hxsl_Linker_debug(hxsl__Linker r0,String r1,vvirtual* r2) {
	return;
}

vdynamic* hxsl_Linker_error(hxsl__Linker r0,String r1,vvirtual* r2) {
	vdynamic *r3;
	r3 = hxsl_Error_t(r1,r2);
	return r3;
}

void hxsl_Linker_mergeVar(hxsl__Linker r0,String r1,vvirtual* r2,vvirtual* r3,vvirtual* r4) {
	String r9, r12;
	hl__types__ArrayObj r17, r18;
	vvirtual *r8, *r21, *r23;
	venum *r7, *r11, *r13, *r14, *r15, *r26;
	bool r25;
	hxsl___Linker__AllocatedVar r24;
	vdynamic *r10;
	varray *r20;
	int r6, r16, r19, r22;
	if( r2 == NULL ) hl_null_access();
	r7 = hl_vfields(r2)[1] ? (*(venum**)(hl_vfields(r2)[1])) : (venum*)hl_dyn_getp(r2->value,118088286/*kind*/,&type$147);
	if( r7 == NULL ) hl_null_access();
	r6 = HL__ENUM_INDEX__(r7);
	switch(r6) {
		default:
			goto label$3878$9;
		case 0:
		case 1:
		case 3:
		case 4:
		case 5:
			goto label$3878$9;
		case 2:
		case 6:
			r9 = (String)global$319;
			hl_throw((vdynamic*)r9);
	}
	label$3878$9:
	r7 = hl_vfields(r2)[1] ? (*(venum**)(hl_vfields(r2)[1])) : (venum*)hl_dyn_getp(r2->value,118088286/*kind*/,&type$147);
	if( r3 == NULL ) hl_null_access();
	r11 = hl_vfields(r3)[1] ? (*(venum**)(hl_vfields(r3)[1])) : (venum*)hl_dyn_getp(r3->value,118088286/*kind*/,&type$147);
	if( r7 == r11 ) goto label$3878$32;
	r7 = hl_vfields(r2)[1] ? (*(venum**)(hl_vfields(r2)[1])) : (venum*)hl_dyn_getp(r2->value,118088286/*kind*/,&type$147);
	r11 = (venum*)global$1544;
	if( r7 == r11 ) goto label$3878$32;
	r7 = hl_vfields(r3)[1] ? (*(venum**)(hl_vfields(r3)[1])) : (venum*)hl_dyn_getp(r3->value,118088286/*kind*/,&type$147);
	r11 = (venum*)global$1544;
	if( r7 == r11 ) goto label$3878$32;
	r9 = (String)global$189;
	r9 = String___add__(r9,r1);
	r12 = (String)global$1549;
	r9 = String___add__(r9,r12);
	r7 = hl_vfields(r2)[1] ? (*(venum**)(hl_vfields(r2)[1])) : (venum*)hl_dyn_getp(r2->value,118088286/*kind*/,&type$147);
	r12 = Std_string(((vdynamic*)r7));
	r9 = String___add__(r9,r12);
	r12 = (String)global$609;
	r9 = String___add__(r9,r12);
	r7 = hl_vfields(r3)[1] ? (*(venum**)(hl_vfields(r3)[1])) : (venum*)hl_dyn_getp(r3->value,118088286/*kind*/,&type$147);
	r12 = Std_string(((vdynamic*)r7));
	r9 = String___add__(r9,r12);
	r10 = hxsl_Linker_error(r0,r9,r4);
	label$3878$32:
	r13 = hl_vfields(r3)[5] ? (*(venum**)(hl_vfields(r3)[5])) : (venum*)hl_dyn_getp(r3->value,218690500/*type*/,&type$148);
	r14 = hl_vfields(r2)[5] ? (*(venum**)(hl_vfields(r2)[5])) : (venum*)hl_dyn_getp(r2->value,218690500/*type*/,&type$148);
	if( r14 == NULL ) hl_null_access();
	r6 = HL__ENUM_INDEX__(r14);
	r16 = 13;
	if( r6 != r16 ) goto label$3878$95;
	if( r13 == NULL ) hl_null_access();
	r6 = HL__ENUM_INDEX__(r13);
	r16 = 13;
	if( r6 != r16 ) goto label$3878$95;
	r17 = ((hxsl_Type_TStruct*)r14)->p0;
	r18 = ((hxsl_Type_TStruct*)r13)->p0;
	r6 = 0;
	label$3878$45:
	if( r17 == NULL ) hl_null_access();
	r19 = r17->length;
	if( r6 >= r19 ) goto label$3878$94;
	r19 = r17->length;
	if( ((unsigned)r6) < ((unsigned)r19) ) goto label$3878$53;
	r8 = NULL;
	goto label$3878$56;
	label$3878$53:
	r20 = r17->array;
	r10 = ((vdynamic**)(r20 + 1))[r6];
	r8 = hl_to_virtual(&type$146,(vdynamic*)r10);
	label$3878$56:
	++r6;
	r21 = NULL;
	r16 = 0;
	label$3878$59:
	if( r18 == NULL ) hl_null_access();
	r22 = r18->length;
	if( r16 >= r22 ) goto label$3878$79;
	r22 = r18->length;
	if( ((unsigned)r16) < ((unsigned)r22) ) goto label$3878$67;
	r23 = NULL;
	goto label$3878$70;
	label$3878$67:
	r20 = r18->array;
	r10 = ((vdynamic**)(r20 + 1))[r16];
	r23 = hl_to_virtual(&type$146,(vdynamic*)r10);
	label$3878$70:
	++r16;
	if( r8 == NULL ) hl_null_access();
	r9 = hl_vfields(r8)[2] ? (*(String*)(hl_vfields(r8)[2])) : (String)hl_dyn_getp(r8->value,150958933/*name*/,&type$13);
	if( r23 == NULL ) hl_null_access();
	r12 = hl_vfields(r23)[2] ? (*(String*)(hl_vfields(r23)[2])) : (String)hl_dyn_getp(r23->value,150958933/*name*/,&type$13);
	if( r9 != r12 && (!r9 || !r12 || String___compare(r9,(vdynamic*)r12) != 0) ) goto label$3878$78;
	r21 = r23;
	goto label$3878$79;
	label$3878$78:
	goto label$3878$59;
	label$3878$79:
	if( r21 ) goto label$3878$87;
	r9 = NULL;
	r24 = NULL;
	r24 = hxsl_Linker_allocVar(r0,r8,r4,r9,r24);
	if( r24 == NULL ) hl_null_access();
	r23 = r24->v;
	r16 = hl_types_ArrayObj_push(r18,((vdynamic*)r23));
	goto label$3878$93;
	label$3878$87:
	r12 = (String)global$210;
	r9 = String___add__(r1,r12);
	if( r21 == NULL ) hl_null_access();
	r12 = hl_vfields(r21)[2] ? (*(String*)(hl_vfields(r21)[2])) : (String)hl_dyn_getp(r21->value,150958933/*name*/,&type$13);
	r9 = String___add__(r9,r12);
	hxsl_Linker_mergeVar(r0,r9,r8,r21,r4);
	label$3878$93:
	goto label$3878$45;
	label$3878$94:
	goto label$3878$112;
	label$3878$95:
	r15 = hl_vfields(r2)[5] ? (*(venum**)(hl_vfields(r2)[5])) : (venum*)hl_dyn_getp(r2->value,218690500/*type*/,&type$148);
	r26 = hl_vfields(r3)[5] ? (*(venum**)(hl_vfields(r3)[5])) : (venum*)hl_dyn_getp(r3->value,218690500/*type*/,&type$148);
	r25 = hl_type_enum_eq(((vdynamic*)r15),((vdynamic*)r26));
	if( r25 ) goto label$3878$112;
	r9 = (String)global$189;
	r9 = String___add__(r9,r1);
	r12 = (String)global$1550;
	r9 = String___add__(r9,r12);
	r15 = hl_vfields(r2)[5] ? (*(venum**)(hl_vfields(r2)[5])) : (venum*)hl_dyn_getp(r2->value,218690500/*type*/,&type$148);
	r12 = hxsl_Tools_toString(r15);
	r9 = String___add__(r9,r12);
	r12 = (String)global$609;
	r9 = String___add__(r9,r12);
	r15 = hl_vfields(r3)[5] ? (*(venum**)(hl_vfields(r3)[5])) : (venum*)hl_dyn_getp(r3->value,218690500/*type*/,&type$148);
	r12 = hxsl_Tools_toString(r15);
	r9 = String___add__(r9,r12);
	r10 = hxsl_Linker_error(r0,r9,r4);
	label$3878$112:
	return;
}

hxsl___Linker__AllocatedVar hxsl_Linker_allocVar(hxsl__Linker r0,vvirtual* r1,vvirtual* r2,String r3,hxsl___Linker__AllocatedVar r4) {
	String r8, r10, r25, r28;
	haxe__ds__StringMap r19;
	hl__types__ArrayObj r11, r15;
	vvirtual *r6, *r9;
	hl_type *r34;
	venum *r16, *r21, *r22, *r33, *r35;
	bool r23, r24;
	hxsl___Linker__AllocatedVar r7, r20, r29;
	haxe__ds__IntMap r31;
	int *r26;
	vdynamic *r17, *r32;
	vbyte *r27;
	varray *r18;
	int r12, r13, r14, r30;
	if( r1 == NULL ) hl_null_access();
	r6 = hl_vfields(r1)[3] ? (*(vvirtual**)(hl_vfields(r1)[3])) : (vvirtual*)hl_dyn_getp(r1->value,-310508246/*parent*/,&type$146);
	if( !r6 ) goto label$3879$27;
	if( r4 ) goto label$3879$27;
	r6 = hl_vfields(r1)[3] ? (*(vvirtual**)(hl_vfields(r1)[3])) : (vvirtual*)hl_dyn_getp(r1->value,-310508246/*parent*/,&type$146);
	r8 = NULL;
	r7 = NULL;
	r7 = hxsl_Linker_allocVar(r0,r6,r2,r8,r7);
	r4 = r7;
	if( r7 == NULL ) hl_null_access();
	r6 = r7->v;
	if( r6 == NULL ) hl_null_access();
	r8 = hl_vfields(r6)[2] ? (*(String*)(hl_vfields(r6)[2])) : (String)hl_dyn_getp(r6->value,150958933/*name*/,&type$13);
	r3 = r8;
	r9 = hl_vfields(r6)[3] ? (*(vvirtual**)(hl_vfields(r6)[3])) : (vvirtual*)hl_dyn_getp(r6->value,-310508246/*parent*/,&type$146);
	r6 = r9;
	label$3879$16:
	if( !r6 ) goto label$3879$27;
	if( r6 == NULL ) hl_null_access();
	r8 = hl_vfields(r6)[2] ? (*(String*)(hl_vfields(r6)[2])) : (String)hl_dyn_getp(r6->value,150958933/*name*/,&type$13);
	r10 = (String)global$210;
	r8 = String___add__(r8,r10);
	r8 = String___add__(r8,r3);
	r3 = r8;
	r9 = hl_vfields(r6)[3] ? (*(vvirtual**)(hl_vfields(r6)[3])) : (vvirtual*)hl_dyn_getp(r6->value,-310508246/*parent*/,&type$146);
	r6 = r9;
	goto label$3879$16;
	label$3879$27:
	if( r3 ) goto label$3879$31;
	if( r1 == NULL ) hl_null_access();
	r8 = hl_vfields(r1)[2] ? (*(String*)(hl_vfields(r1)[2])) : (String)hl_dyn_getp(r1->value,150958933/*name*/,&type$13);
	goto label$3879$36;
	label$3879$31:
	r10 = (String)global$210;
	r8 = String___add__(r3,r10);
	if( r1 == NULL ) hl_null_access();
	r10 = hl_vfields(r1)[2] ? (*(String*)(hl_vfields(r1)[2])) : (String)hl_dyn_getp(r1->value,150958933/*name*/,&type$13);
	r8 = String___add__(r8,r10);
	label$3879$36:
	r11 = hl_vfields(r1)[4] ? (*(hl__types__ArrayObj*)(hl_vfields(r1)[4])) : (hl__types__ArrayObj)hl_dyn_getp(r1->value,476822680/*qualifiers*/,&type$46);
	if( !r11 ) goto label$3879$59;
	r12 = 0;
	r11 = hl_vfields(r1)[4] ? (*(hl__types__ArrayObj*)(hl_vfields(r1)[4])) : (hl__types__ArrayObj)hl_dyn_getp(r1->value,476822680/*qualifiers*/,&type$46);
	label$3879$40:
	if( r11 == NULL ) hl_null_access();
	r14 = r11->length;
	if( r12 >= r14 ) goto label$3879$59;
	r14 = r11->length;
	if( ((unsigned)r12) < ((unsigned)r14) ) goto label$3879$48;
	r16 = NULL;
	goto label$3879$51;
	label$3879$48:
	r18 = r11->array;
	r17 = ((vdynamic**)(r18 + 1))[r12];
	r16 = (venum*)r17;
	label$3879$51:
	++r12;
	if( r16 == NULL ) hl_null_access();
	r13 = HL__ENUM_INDEX__(r16);
	r14 = 4;
	if( r13 != r14 ) goto label$3879$58;
	r10 = ((hxsl_VarQualifier_Name*)r16)->p0;
	r8 = r10;
	label$3879$58:
	goto label$3879$40;
	label$3879$59:
	r19 = r0->varMap;
	if( r19 == NULL ) hl_null_access();
	r17 = haxe_ds_StringMap_get(r19,r8);
	r7 = (hxsl___Linker__AllocatedVar)r17;
	if( r1 == NULL ) hl_null_access();
	r10 = hl_vfields(r1)[2] ? (*(String*)(hl_vfields(r1)[2])) : (String)hl_dyn_getp(r1->value,150958933/*name*/,&type$13);
	if( !r7 ) goto label$3879$196;
	r12 = 0;
	if( r7 == NULL ) hl_null_access();
	r11 = r7->merged;
	label$3879$69:
	if( r11 == NULL ) hl_null_access();
	r14 = r11->length;
	if( r12 >= r14 ) goto label$3879$85;
	r13 = r12;
	++r12;
	r14 = r11->length;
	if( ((unsigned)r13) < ((unsigned)r14) ) goto label$3879$79;
	r6 = NULL;
	goto label$3879$82;
	label$3879$79:
	r18 = r11->array;
	r17 = ((vdynamic**)(r18 + 1))[r13];
	r6 = hl_to_virtual(&type$146,(vdynamic*)r17);
	label$3879$82:
	if( r6 != r1 && (!r6 || !r1 || !r6->value || !r1->value || r6->value != r1->value) ) goto label$3879$84;
	return r7;
	label$3879$84:
	goto label$3879$69;
	label$3879$85:
	if( r1 == NULL ) hl_null_access();
	r21 = hl_vfields(r1)[1] ? (*(venum**)(hl_vfields(r1)[1])) : (venum*)hl_dyn_getp(r1->value,118088286/*kind*/,&type$147);
	r22 = (venum*)global$1375;
	if( r21 != r22 ) goto label$3879$92;
	r16 = (venum*)global$1551;
	r23 = hxsl_Tools_hasQualifier(r1,r16);
	if( !r23 ) goto label$3879$123;
	label$3879$92:
	r21 = hl_vfields(r1)[1] ? (*(venum**)(hl_vfields(r1)[1])) : (venum*)hl_dyn_getp(r1->value,118088286/*kind*/,&type$147);
	r22 = (venum*)global$1367;
	if( r21 == r22 ) goto label$3879$123;
	r21 = hl_vfields(r1)[1] ? (*(venum**)(hl_vfields(r1)[1])) : (venum*)hl_dyn_getp(r1->value,118088286/*kind*/,&type$147);
	r22 = (venum*)global$1358;
	if( r21 != r22 ) goto label$3879$101;
	r16 = (venum*)global$1552;
	r23 = hxsl_Tools_hasQualifier(r1,r16);
	if( r23 ) goto label$3879$123;
	label$3879$101:
	if( r7 == NULL ) hl_null_access();
	r6 = r7->v;
	if( r6 == NULL ) hl_null_access();
	r21 = hl_vfields(r6)[1] ? (*(venum**)(hl_vfields(r6)[1])) : (venum*)hl_dyn_getp(r6->value,118088286/*kind*/,&type$147);
	r22 = (venum*)global$1375;
	if( r21 != r22 ) goto label$3879$110;
	r16 = (venum*)global$1551;
	r24 = hxsl_Tools_hasQualifier(r6,r16);
	if( !r24 ) goto label$3879$121;
	label$3879$110:
	r21 = hl_vfields(r6)[1] ? (*(venum**)(hl_vfields(r6)[1])) : (venum*)hl_dyn_getp(r6->value,118088286/*kind*/,&type$147);
	r22 = (venum*)global$1367;
	if( r21 == r22 ) goto label$3879$121;
	r21 = hl_vfields(r6)[1] ? (*(venum**)(hl_vfields(r6)[1])) : (venum*)hl_dyn_getp(r6->value,118088286/*kind*/,&type$147);
	r22 = (venum*)global$1358;
	if( r21 != r22 ) goto label$3879$119;
	r16 = (venum*)global$1552;
	r24 = hxsl_Tools_hasQualifier(r6,r16);
	if( r24 ) goto label$3879$121;
	label$3879$119:
	r24 = false;
	goto label$3879$122;
	label$3879$121:
	r24 = true;
	label$3879$122:
	goto label$3879$124;
	label$3879$123:
	r24 = true;
	label$3879$124:
	if( r24 ) goto label$3879$134;
	r21 = hl_vfields(r1)[1] ? (*(venum**)(hl_vfields(r1)[1])) : (venum*)hl_dyn_getp(r1->value,118088286/*kind*/,&type$147);
	r22 = (venum*)global$1375;
	if( r21 != r22 ) goto label$3879$183;
	if( r7 == NULL ) hl_null_access();
	r6 = r7->v;
	if( r6 == NULL ) hl_null_access();
	r21 = hl_vfields(r6)[1] ? (*(venum**)(hl_vfields(r6)[1])) : (venum*)hl_dyn_getp(r6->value,118088286/*kind*/,&type$147);
	r22 = (venum*)global$1375;
	if( r21 != r22 ) goto label$3879$183;
	label$3879$134:
	r12 = 2;
	label$3879$135:
	r24 = true;
	if( !r24 ) goto label$3879$170;
	r19 = r0->varMap;
	if( r19 == NULL ) hl_null_access();
	r13 = r12;
	r26 = &r13;
	r27 = hl_itos(r13,r26);
	r28 = String___alloc__(r27,r13);
	r25 = String___add__(r8,r28);
	r17 = haxe_ds_StringMap_get(r19,r25);
	r20 = (hxsl___Linker__AllocatedVar)r17;
	if( r20 ) goto label$3879$149;
	goto label$3879$170;
	label$3879$149:
	r13 = 0;
	if( r20 == NULL ) hl_null_access();
	r11 = r20->merged;
	label$3879$152:
	if( r11 == NULL ) hl_null_access();
	r30 = r11->length;
	if( r13 >= r30 ) goto label$3879$168;
	r14 = r13;
	++r13;
	r30 = r11->length;
	if( ((unsigned)r14) < ((unsigned)r30) ) goto label$3879$162;
	r6 = NULL;
	goto label$3879$165;
	label$3879$162:
	r18 = r11->array;
	r17 = ((vdynamic**)(r18 + 1))[r14];
	r6 = hl_to_virtual(&type$146,(vdynamic*)r17);
	label$3879$165:
	if( r6 != r1 && (!r6 || !r1 || !r6->value || !r1->value || r6->value != r1->value) ) goto label$3879$167;
	return r20;
	label$3879$167:
	goto label$3879$152;
	label$3879$168:
	++r12;
	goto label$3879$135;
	label$3879$170:
	r13 = r12;
	r26 = &r13;
	r27 = hl_itos(r13,r26);
	r28 = String___alloc__(r27,r13);
	r25 = String___add__(r10,r28);
	r10 = r25;
	r13 = r12;
	r26 = &r13;
	r27 = hl_itos(r13,r26);
	r28 = String___alloc__(r27,r13);
	r25 = String___add__(r8,r28);
	r8 = r25;
	goto label$3879$196;
	label$3879$183:
	if( r7 == NULL ) hl_null_access();
	r11 = r7->merged;
	if( r11 == NULL ) hl_null_access();
	r12 = hl_types_ArrayObj_push(r11,((vdynamic*)r1));
	r9 = r7->v;
	hxsl_Linker_mergeVar(r0,r8,r1,r9,r2);
	r31 = r0->varIdMap;
	if( r31 == NULL ) hl_null_access();
	r12 = hl_vfields(r1)[0] ? (*(int*)(hl_vfields(r1)[0])) : (int)hl_dyn_geti(r1->value,23515/*id*/,&type$3);
	r13 = r7->id;
	r32 = hl_alloc_dynamic(&type$3);
	r32->v.i = r13;
	haxe_ds_IntMap_set(r31,r12,((vdynamic*)r32));
	return r7;
	label$3879$196:
	r11 = r0->allVars;
	if( r11 == NULL ) hl_null_access();
	r12 = r11->length;
	r13 = 1;
	r12 = r12 + r13;
	r6 = hl_alloc_virtual(&type$146);
	if( hl_vfields(r6)[0] ) *(int*)(hl_vfields(r6)[0]) = (int)r12; else hl_dyn_seti(r6->value,23515/*id*/,&type$3,r12);
	if( hl_vfields(r6)[2] ) *(String*)(hl_vfields(r6)[2]) = (String)r10; else hl_dyn_setp(r6->value,150958933/*name*/,&type$13,r10);
	if( r1 == NULL ) hl_null_access();
	r33 = hl_vfields(r1)[5] ? (*(venum**)(hl_vfields(r1)[5])) : (venum*)hl_dyn_getp(r1->value,218690500/*type*/,&type$148);
	if( hl_vfields(r6)[5] ) *(venum**)(hl_vfields(r6)[5]) = (venum*)r33; else hl_dyn_setp(r6->value,218690500/*type*/,&type$148,r33);
	r21 = hl_vfields(r1)[1] ? (*(venum**)(hl_vfields(r1)[1])) : (venum*)hl_dyn_getp(r1->value,118088286/*kind*/,&type$147);
	if( hl_vfields(r6)[1] ) *(venum**)(hl_vfields(r6)[1]) = (venum*)r21; else hl_dyn_setp(r6->value,118088286/*kind*/,&type$147,r21);
	r11 = hl_vfields(r1)[4] ? (*(hl__types__ArrayObj*)(hl_vfields(r1)[4])) : (hl__types__ArrayObj)hl_dyn_getp(r1->value,476822680/*qualifiers*/,&type$46);
	if( hl_vfields(r6)[4] ) *(hl__types__ArrayObj*)(hl_vfields(r6)[4]) = (hl__types__ArrayObj)r11; else hl_dyn_setp(r6->value,476822680/*qualifiers*/,&type$46,r11);
	if( r4 ) goto label$3879$214;
	r9 = NULL;
	goto label$3879$216;
	label$3879$214:
	if( r4 == NULL ) hl_null_access();
	r9 = r4->v;
	label$3879$216:
	if( hl_vfields(r6)[3] ) *(vvirtual**)(hl_vfields(r6)[3]) = (vvirtual*)r9; else hl_dyn_setp(r6->value,-310508246/*parent*/,&type$146,r9);
	r20 = (hxsl___Linker__AllocatedVar)hl_alloc_obj(hxsl___Linker__AllocatedVar__val);
	hxsl__Linker_AllocatedVar_new(r20);
	r20->v = r6;
	r34 = &type$146;
	r13 = 1;
	r18 = hl_alloc_array(r34,r13);
	r13 = 0;
	((vvirtual**)(r18 + 1))[r13] = r1;
	r11 = hl_types_ArrayObj_alloc(r18);
	r20->merged = r11;
	r20->path = r8;
	r20->id = r12;
	r20->parent = r4;
	r13 = r0->curInstance;
	r20->instanceIndex = r13;
	r11 = r0->allVars;
	if( r11 == NULL ) hl_null_access();
	r13 = hl_types_ArrayObj_push(r11,((vdynamic*)r20));
	r19 = r0->varMap;
	if( r19 == NULL ) hl_null_access();
	haxe_ds_StringMap_set(r19,r8,((vdynamic*)r20));
	r33 = hl_vfields(r6)[5] ? (*(venum**)(hl_vfields(r6)[5])) : (venum*)hl_dyn_getp(r6->value,218690500/*type*/,&type$148);
	if( r33 == NULL ) hl_null_access();
	r13 = HL__ENUM_INDEX__(r33);
	r14 = 13;
	if( r13 != r14 ) goto label$3879$271;
	r11 = ((hxsl_Type_TStruct*)r33)->p0;
	r34 = &type$146;
	r13 = 0;
	r18 = hl_alloc_array(r34,r13);
	r15 = hl_types_ArrayObj_alloc(r18);
	r13 = 0;
	label$3879$249:
	if( r11 == NULL ) hl_null_access();
	r30 = r11->length;
	if( r13 >= r30 ) goto label$3879$268;
	if( r15 == NULL ) hl_null_access();
	r14 = r13;
	++r13;
	r30 = r11->length;
	if( ((unsigned)r14) < ((unsigned)r30) ) goto label$3879$260;
	r9 = NULL;
	goto label$3879$263;
	label$3879$260:
	r18 = r11->array;
	r17 = ((vdynamic**)(r18 + 1))[r14];
	r9 = hl_to_virtual(&type$146,(vdynamic*)r17);
	label$3879$263:
	r29 = hxsl_Linker_allocVar(r0,r9,r2,r8,r20);
	if( r29 == NULL ) hl_null_access();
	r9 = r29->v;
	r14 = hl_types_ArrayObj_push(r15,((vdynamic*)r9));
	goto label$3879$249;
	label$3879$268:
	if( r6 == NULL ) hl_null_access();
	r35 = hl_alloc_enum(&type$148,13);
	((hxsl_Type_TStruct*)r35)->p0 = r15;
	if( hl_vfields(r6)[5] ) *(venum**)(hl_vfields(r6)[5]) = (venum*)r35; else hl_dyn_setp(r6->value,218690500/*type*/,&type$148,r35);
	label$3879$271:
	return r20;
}

vvirtual* hxsl_Linker_mapExprVar(hxsl__Linker r0,vvirtual* r1) {
	String r13;
	vvirtual *r3, *r7, *r10, *r12, *r19, *r22, *r24, *r25;
	venum *r2, *r6, *r16, *r17, *r18, *r21, *r23;
	bool r8;
	hxsl___Linker__AllocatedVar r11;
	hxsl___Linker__ShaderInfos r14;
	haxe__ds__IntMap r9;
	vclosure *r27;
	vdynamic *r15, *r20;
	int r5, r26;
	if( r1 == NULL ) hl_null_access();
	r2 = hl_vfields(r1)[0] ? (*(venum**)(hl_vfields(r1)[0])) : (venum*)hl_dyn_getp(r1->value,101/*e*/,&type$813);
	if( r2 == NULL ) hl_null_access();
	r5 = HL__ENUM_INDEX__(r2);
	switch(r5) {
		default:
		case 0:
		case 2:
		case 3:
		case 4:
		case 6:
		case 8:
		case 9:
		case 10:
		case 12:
			goto label$3880$294;
		case 1:
			r7 = ((hxsl_TExprDef_TVar*)r2)->p0;
			r9 = r0->locals;
			if( r9 == NULL ) hl_null_access();
			if( r7 == NULL ) hl_null_access();
			r5 = hl_vfields(r7)[0] ? (*(int*)(hl_vfields(r7)[0])) : (int)hl_dyn_geti(r7->value,23515/*id*/,&type$3);
			r8 = haxe_ds_IntMap_exists(r9,r5);
			if( r8 ) goto label$3880$59;
			r12 = hl_vfields(r1)[1] ? (*(vvirtual**)(hl_vfields(r1)[1])) : (vvirtual*)hl_dyn_getp(r1->value,112/*p*/,&type$800);
			r13 = NULL;
			r11 = NULL;
			r11 = hxsl_Linker_allocVar(r0,r7,r12,r13,r11);
			r14 = r0->curShader;
			if( !r14 ) goto label$3880$47;
			r14 = r0->curShader;
			if( r14 == NULL ) hl_null_access();
			r9 = r14->write;
			if( r9 == NULL ) hl_null_access();
			if( r11 == NULL ) hl_null_access();
			r5 = r11->id;
			r8 = haxe_ds_IntMap_exists(r9,r5);
			if( r8 ) goto label$3880$47;
			r14 = r0->curShader;
			if( r14 == NULL ) hl_null_access();
			r9 = r14->read;
			if( r9 == NULL ) hl_null_access();
			r5 = r11->id;
			haxe_ds_IntMap_set(r9,r5,((vdynamic*)r11));
			r14 = r0->curShader;
			if( r14 == NULL ) hl_null_access();
			r15 = r14->vertex;
			if( r15 ) goto label$3880$47;
			r10 = r11->v;
			if( r10 == NULL ) hl_null_access();
			r16 = hl_vfields(r10)[1] ? (*(venum**)(hl_vfields(r10)[1])) : (venum*)hl_dyn_getp(r10->value,118088286/*kind*/,&type$147);
			r17 = (venum*)global$1358;
			if( r16 != r17 ) goto label$3880$47;
			r14 = r0->curShader;
			if( r14 == NULL ) hl_null_access();
			r8 = false;
			r15 = hl_alloc_dynbool(r8);
			r14->vertex = r15;
			label$3880$47:
			r3 = hl_alloc_virtual(&type$812);
			if( r11 == NULL ) hl_null_access();
			r10 = r11->v;
			r6 = hl_alloc_enum(&type$813,1);
			((hxsl_TExprDef_TVar*)r6)->p0 = r10;
			if( hl_vfields(r3)[0] ) *(venum**)(hl_vfields(r3)[0]) = (venum*)r6; else hl_dyn_setp(r3->value,101/*e*/,&type$813,r6);
			r10 = r11->v;
			if( r10 == NULL ) hl_null_access();
			r18 = hl_vfields(r10)[5] ? (*(venum**)(hl_vfields(r10)[5])) : (venum*)hl_dyn_getp(r10->value,218690500/*type*/,&type$148);
			if( hl_vfields(r3)[2] ) *(venum**)(hl_vfields(r3)[2]) = (venum*)r18; else hl_dyn_setp(r3->value,116/*t*/,&type$148,r18);
			r12 = hl_vfields(r1)[1] ? (*(vvirtual**)(hl_vfields(r1)[1])) : (vvirtual*)hl_dyn_getp(r1->value,112/*p*/,&type$800);
			if( hl_vfields(r3)[1] ) *(vvirtual**)(hl_vfields(r3)[1]) = (vvirtual*)r12; else hl_dyn_setp(r3->value,112/*p*/,&type$800,r12);
			return r3;
			label$3880$59:
			goto label$3880$294;
		case 5:
			r3 = ((hxsl_TExprDef_TBinop*)r2)->p2;
			r19 = ((hxsl_TExprDef_TBinop*)r2)->p1;
			r21 = ((hxsl_TExprDef_TBinop*)r2)->p0;
			if( r19 == NULL ) hl_null_access();
			r6 = hl_vfields(r19)[0] ? (*(venum**)(hl_vfields(r19)[0])) : (venum*)hl_dyn_getp(r19->value,101/*e*/,&type$813);
			if( r21 == NULL ) hl_null_access();
			r5 = HL__ENUM_INDEX__(r21);
			switch(r5) {
				default:
				case 0:
				case 1:
				case 2:
				case 3:
				case 5:
				case 6:
				case 7:
				case 8:
				case 9:
				case 10:
				case 11:
				case 12:
				case 13:
				case 14:
				case 15:
				case 16:
				case 17:
				case 18:
				case 19:
					goto label$3880$264;
				case 4:
					if( r6 == NULL ) hl_null_access();
					r5 = HL__ENUM_INDEX__(r6);
					switch(r5) {
						default:
						case 0:
						case 2:
						case 3:
						case 4:
						case 5:
						case 6:
						case 7:
						case 8:
							goto label$3880$186;
						case 1:
							r7 = ((hxsl_TExprDef_TVar*)r6)->p0;
							r9 = r0->locals;
							if( r9 == NULL ) hl_null_access();
							if( r7 == NULL ) hl_null_access();
							r5 = hl_vfields(r7)[0] ? (*(int*)(hl_vfields(r7)[0])) : (int)hl_dyn_geti(r7->value,23515/*id*/,&type$3);
							r8 = haxe_ds_IntMap_exists(r9,r5);
							if( r8 ) goto label$3880$113;
							r22 = hxsl_Linker_mapExprVar(r0,r3);
							r12 = hl_vfields(r19)[1] ? (*(vvirtual**)(hl_vfields(r19)[1])) : (vvirtual*)hl_dyn_getp(r19->value,112/*p*/,&type$800);
							r13 = NULL;
							r11 = NULL;
							r11 = hxsl_Linker_allocVar(r0,r7,r12,r13,r11);
							r14 = r0->curShader;
							if( !r14 ) goto label$3880$94;
							r14 = r0->curShader;
							if( r14 == NULL ) hl_null_access();
							r9 = r14->write;
							if( r9 == NULL ) hl_null_access();
							if( r11 == NULL ) hl_null_access();
							r5 = r11->id;
							haxe_ds_IntMap_set(r9,r5,((vdynamic*)r11));
							label$3880$94:
							r24 = hl_alloc_virtual(&type$812);
							r25 = hl_alloc_virtual(&type$812);
							if( r11 == NULL ) hl_null_access();
							r10 = r11->v;
							r23 = hl_alloc_enum(&type$813,1);
							((hxsl_TExprDef_TVar*)r23)->p0 = r10;
							if( hl_vfields(r25)[0] ) *(venum**)(hl_vfields(r25)[0]) = (venum*)r23; else hl_dyn_setp(r25->value,101/*e*/,&type$813,r23);
							r10 = r11->v;
							if( r10 == NULL ) hl_null_access();
							r18 = hl_vfields(r10)[5] ? (*(venum**)(hl_vfields(r10)[5])) : (venum*)hl_dyn_getp(r10->value,218690500/*type*/,&type$148);
							if( hl_vfields(r25)[2] ) *(venum**)(hl_vfields(r25)[2]) = (venum*)r18; else hl_dyn_setp(r25->value,116/*t*/,&type$148,r18);
							r12 = hl_vfields(r1)[1] ? (*(vvirtual**)(hl_vfields(r1)[1])) : (vvirtual*)hl_dyn_getp(r1->value,112/*p*/,&type$800);
							if( hl_vfields(r25)[1] ) *(vvirtual**)(hl_vfields(r25)[1]) = (vvirtual*)r12; else hl_dyn_setp(r25->value,112/*p*/,&type$800,r12);
							r23 = hl_alloc_enum(&type$813,5);
							((hxsl_TExprDef_TBinop*)r23)->p0 = r21;
							((hxsl_TExprDef_TBinop*)r23)->p1 = r25;
							((hxsl_TExprDef_TBinop*)r23)->p2 = r22;
							if( hl_vfields(r24)[0] ) *(venum**)(hl_vfields(r24)[0]) = (venum*)r23; else hl_dyn_setp(r24->value,101/*e*/,&type$813,r23);
							r18 = hl_vfields(r1)[2] ? (*(venum**)(hl_vfields(r1)[2])) : (venum*)hl_dyn_getp(r1->value,116/*t*/,&type$148);
							if( hl_vfields(r24)[2] ) *(venum**)(hl_vfields(r24)[2]) = (venum*)r18; else hl_dyn_setp(r24->value,116/*t*/,&type$148,r18);
							r12 = hl_vfields(r1)[1] ? (*(vvirtual**)(hl_vfields(r1)[1])) : (vvirtual*)hl_dyn_getp(r1->value,112/*p*/,&type$800);
							if( hl_vfields(r24)[1] ) *(vvirtual**)(hl_vfields(r24)[1]) = (vvirtual*)r12; else hl_dyn_setp(r24->value,112/*p*/,&type$800,r12);
							return r24;
							label$3880$113:
							r10 = ((hxsl_TExprDef_TVar*)r6)->p0;
							r9 = r0->locals;
							if( r9 == NULL ) hl_null_access();
							if( r10 == NULL ) hl_null_access();
							r5 = hl_vfields(r10)[0] ? (*(int*)(hl_vfields(r10)[0])) : (int)hl_dyn_geti(r10->value,23515/*id*/,&type$3);
							r8 = haxe_ds_IntMap_exists(r9,r5);
							if( r8 ) goto label$3880$144;
							r22 = hxsl_Linker_mapExprVar(r0,r19);
							r24 = hxsl_Linker_mapExprVar(r0,r3);
							if( r22 == NULL ) hl_null_access();
							r12 = hl_vfields(r22)[1] ? (*(vvirtual**)(hl_vfields(r22)[1])) : (vvirtual*)hl_dyn_getp(r22->value,112/*p*/,&type$800);
							r13 = NULL;
							r11 = NULL;
							r11 = hxsl_Linker_allocVar(r0,r10,r12,r13,r11);
							r14 = r0->curShader;
							if( !r14 ) goto label$3880$136;
							r14 = r0->curShader;
							if( r14 == NULL ) hl_null_access();
							r9 = r14->write;
							if( r9 == NULL ) hl_null_access();
							if( r11 == NULL ) hl_null_access();
							r5 = r11->id;
							haxe_ds_IntMap_set(r9,r5,((vdynamic*)r11));
							label$3880$136:
							r25 = hl_alloc_virtual(&type$812);
							r23 = hl_alloc_enum(&type$813,5);
							((hxsl_TExprDef_TBinop*)r23)->p0 = r21;
							((hxsl_TExprDef_TBinop*)r23)->p1 = r22;
							((hxsl_TExprDef_TBinop*)r23)->p2 = r24;
							if( hl_vfields(r25)[0] ) *(venum**)(hl_vfields(r25)[0]) = (venum*)r23; else hl_dyn_setp(r25->value,101/*e*/,&type$813,r23);
							r18 = hl_vfields(r1)[2] ? (*(venum**)(hl_vfields(r1)[2])) : (venum*)hl_dyn_getp(r1->value,116/*t*/,&type$148);
							if( hl_vfields(r25)[2] ) *(venum**)(hl_vfields(r25)[2]) = (venum*)r18; else hl_dyn_setp(r25->value,116/*t*/,&type$148,r18);
							r12 = hl_vfields(r1)[1] ? (*(vvirtual**)(hl_vfields(r1)[1])) : (vvirtual*)hl_dyn_getp(r1->value,112/*p*/,&type$800);
							if( hl_vfields(r25)[1] ) *(vvirtual**)(hl_vfields(r25)[1]) = (vvirtual*)r12; else hl_dyn_setp(r25->value,112/*p*/,&type$800,r12);
							return r25;
							label$3880$144:
							goto label$3880$186;
						case 9:
							r22 = ((hxsl_TExprDef_TSwiz*)r6)->p0;
							if( r22 == NULL ) hl_null_access();
							r23 = hl_vfields(r22)[0] ? (*(venum**)(hl_vfields(r22)[0])) : (venum*)hl_dyn_getp(r22->value,101/*e*/,&type$813);
							if( r23 == NULL ) hl_null_access();
							r5 = HL__ENUM_INDEX__(r23);
							r26 = 1;
							if( r5 != r26 ) goto label$3880$186;
							r22 = ((hxsl_TExprDef_TSwiz*)r6)->p0;
							if( r22 == NULL ) hl_null_access();
							r23 = hl_vfields(r22)[0] ? (*(venum**)(hl_vfields(r22)[0])) : (venum*)hl_dyn_getp(r22->value,101/*e*/,&type$813);
							r7 = ((hxsl_TExprDef_TVar*)r23)->p0;
							r9 = r0->locals;
							if( r9 == NULL ) hl_null_access();
							if( r7 == NULL ) hl_null_access();
							r5 = hl_vfields(r7)[0] ? (*(int*)(hl_vfields(r7)[0])) : (int)hl_dyn_geti(r7->value,23515/*id*/,&type$3);
							r8 = haxe_ds_IntMap_exists(r9,r5);
							if( r8 ) goto label$3880$186;
							r22 = hxsl_Linker_mapExprVar(r0,r19);
							r24 = hxsl_Linker_mapExprVar(r0,r3);
							if( r22 == NULL ) hl_null_access();
							r12 = hl_vfields(r22)[1] ? (*(vvirtual**)(hl_vfields(r22)[1])) : (vvirtual*)hl_dyn_getp(r22->value,112/*p*/,&type$800);
							r13 = NULL;
							r11 = NULL;
							r11 = hxsl_Linker_allocVar(r0,r7,r12,r13,r11);
							r14 = r0->curShader;
							if( !r14 ) goto label$3880$178;
							r14 = r0->curShader;
							if( r14 == NULL ) hl_null_access();
							r9 = r14->write;
							if( r9 == NULL ) hl_null_access();
							if( r11 == NULL ) hl_null_access();
							r5 = r11->id;
							haxe_ds_IntMap_set(r9,r5,((vdynamic*)r11));
							label$3880$178:
							r25 = hl_alloc_virtual(&type$812);
							r23 = hl_alloc_enum(&type$813,5);
							((hxsl_TExprDef_TBinop*)r23)->p0 = r21;
							((hxsl_TExprDef_TBinop*)r23)->p1 = r22;
							((hxsl_TExprDef_TBinop*)r23)->p2 = r24;
							if( hl_vfields(r25)[0] ) *(venum**)(hl_vfields(r25)[0]) = (venum*)r23; else hl_dyn_setp(r25->value,101/*e*/,&type$813,r23);
							r18 = hl_vfields(r1)[2] ? (*(venum**)(hl_vfields(r1)[2])) : (venum*)hl_dyn_getp(r1->value,116/*t*/,&type$148);
							if( hl_vfields(r25)[2] ) *(venum**)(hl_vfields(r25)[2]) = (venum*)r18; else hl_dyn_setp(r25->value,116/*t*/,&type$148,r18);
							r12 = hl_vfields(r1)[1] ? (*(vvirtual**)(hl_vfields(r1)[1])) : (vvirtual*)hl_dyn_getp(r1->value,112/*p*/,&type$800);
							if( hl_vfields(r25)[1] ) *(vvirtual**)(hl_vfields(r25)[1]) = (vvirtual*)r12; else hl_dyn_setp(r25->value,112/*p*/,&type$800,r12);
							return r25;
					}
					label$3880$186:
					goto label$3880$264;
				case 20:
					if( r6 == NULL ) hl_null_access();
					r5 = HL__ENUM_INDEX__(r6);
					switch(r5) {
						default:
						case 0:
						case 2:
						case 3:
						case 4:
						case 5:
						case 6:
						case 7:
						case 8:
							goto label$3880$264;
						case 1:
							r7 = ((hxsl_TExprDef_TVar*)r6)->p0;
							r9 = r0->locals;
							if( r9 == NULL ) hl_null_access();
							if( r7 == NULL ) hl_null_access();
							r5 = hl_vfields(r7)[0] ? (*(int*)(hl_vfields(r7)[0])) : (int)hl_dyn_geti(r7->value,23515/*id*/,&type$3);
							r8 = haxe_ds_IntMap_exists(r9,r5);
							if( r8 ) goto label$3880$222;
							r22 = hxsl_Linker_mapExprVar(r0,r19);
							r24 = hxsl_Linker_mapExprVar(r0,r3);
							if( r22 == NULL ) hl_null_access();
							r12 = hl_vfields(r22)[1] ? (*(vvirtual**)(hl_vfields(r22)[1])) : (vvirtual*)hl_dyn_getp(r22->value,112/*p*/,&type$800);
							r13 = NULL;
							r11 = NULL;
							r11 = hxsl_Linker_allocVar(r0,r7,r12,r13,r11);
							r14 = r0->curShader;
							if( !r14 ) goto label$3880$214;
							r14 = r0->curShader;
							if( r14 == NULL ) hl_null_access();
							r9 = r14->write;
							if( r9 == NULL ) hl_null_access();
							if( r11 == NULL ) hl_null_access();
							r5 = r11->id;
							haxe_ds_IntMap_set(r9,r5,((vdynamic*)r11));
							label$3880$214:
							r25 = hl_alloc_virtual(&type$812);
							r23 = hl_alloc_enum(&type$813,5);
							((hxsl_TExprDef_TBinop*)r23)->p0 = r21;
							((hxsl_TExprDef_TBinop*)r23)->p1 = r22;
							((hxsl_TExprDef_TBinop*)r23)->p2 = r24;
							if( hl_vfields(r25)[0] ) *(venum**)(hl_vfields(r25)[0]) = (venum*)r23; else hl_dyn_setp(r25->value,101/*e*/,&type$813,r23);
							r18 = hl_vfields(r1)[2] ? (*(venum**)(hl_vfields(r1)[2])) : (venum*)hl_dyn_getp(r1->value,116/*t*/,&type$148);
							if( hl_vfields(r25)[2] ) *(venum**)(hl_vfields(r25)[2]) = (venum*)r18; else hl_dyn_setp(r25->value,116/*t*/,&type$148,r18);
							r12 = hl_vfields(r1)[1] ? (*(vvirtual**)(hl_vfields(r1)[1])) : (vvirtual*)hl_dyn_getp(r1->value,112/*p*/,&type$800);
							if( hl_vfields(r25)[1] ) *(vvirtual**)(hl_vfields(r25)[1]) = (vvirtual*)r12; else hl_dyn_setp(r25->value,112/*p*/,&type$800,r12);
							return r25;
							label$3880$222:
							goto label$3880$264;
						case 9:
							r22 = ((hxsl_TExprDef_TSwiz*)r6)->p0;
							if( r22 == NULL ) hl_null_access();
							r23 = hl_vfields(r22)[0] ? (*(venum**)(hl_vfields(r22)[0])) : (venum*)hl_dyn_getp(r22->value,101/*e*/,&type$813);
							if( r23 == NULL ) hl_null_access();
							r5 = HL__ENUM_INDEX__(r23);
							r26 = 1;
							if( r5 != r26 ) goto label$3880$264;
							r22 = ((hxsl_TExprDef_TSwiz*)r6)->p0;
							if( r22 == NULL ) hl_null_access();
							r23 = hl_vfields(r22)[0] ? (*(venum**)(hl_vfields(r22)[0])) : (venum*)hl_dyn_getp(r22->value,101/*e*/,&type$813);
							r7 = ((hxsl_TExprDef_TVar*)r23)->p0;
							r9 = r0->locals;
							if( r9 == NULL ) hl_null_access();
							if( r7 == NULL ) hl_null_access();
							r5 = hl_vfields(r7)[0] ? (*(int*)(hl_vfields(r7)[0])) : (int)hl_dyn_geti(r7->value,23515/*id*/,&type$3);
							r8 = haxe_ds_IntMap_exists(r9,r5);
							if( r8 ) goto label$3880$264;
							r22 = hxsl_Linker_mapExprVar(r0,r19);
							r24 = hxsl_Linker_mapExprVar(r0,r3);
							if( r22 == NULL ) hl_null_access();
							r12 = hl_vfields(r22)[1] ? (*(vvirtual**)(hl_vfields(r22)[1])) : (vvirtual*)hl_dyn_getp(r22->value,112/*p*/,&type$800);
							r13 = NULL;
							r11 = NULL;
							r11 = hxsl_Linker_allocVar(r0,r7,r12,r13,r11);
							r14 = r0->curShader;
							if( !r14 ) goto label$3880$256;
							r14 = r0->curShader;
							if( r14 == NULL ) hl_null_access();
							r9 = r14->write;
							if( r9 == NULL ) hl_null_access();
							if( r11 == NULL ) hl_null_access();
							r5 = r11->id;
							haxe_ds_IntMap_set(r9,r5,((vdynamic*)r11));
							label$3880$256:
							r25 = hl_alloc_virtual(&type$812);
							r23 = hl_alloc_enum(&type$813,5);
							((hxsl_TExprDef_TBinop*)r23)->p0 = r21;
							((hxsl_TExprDef_TBinop*)r23)->p1 = r22;
							((hxsl_TExprDef_TBinop*)r23)->p2 = r24;
							if( hl_vfields(r25)[0] ) *(venum**)(hl_vfields(r25)[0]) = (venum*)r23; else hl_dyn_setp(r25->value,101/*e*/,&type$813,r23);
							r18 = hl_vfields(r1)[2] ? (*(venum**)(hl_vfields(r1)[2])) : (venum*)hl_dyn_getp(r1->value,116/*t*/,&type$148);
							if( hl_vfields(r25)[2] ) *(venum**)(hl_vfields(r25)[2]) = (venum*)r18; else hl_dyn_setp(r25->value,116/*t*/,&type$148,r18);
							r12 = hl_vfields(r1)[1] ? (*(vvirtual**)(hl_vfields(r1)[1])) : (vvirtual*)hl_dyn_getp(r1->value,112/*p*/,&type$800);
							if( hl_vfields(r25)[1] ) *(vvirtual**)(hl_vfields(r25)[1]) = (vvirtual*)r12; else hl_dyn_setp(r25->value,112/*p*/,&type$800,r12);
							return r25;
					}
			}
			label$3880$264:
			goto label$3880$294;
		case 7:
			r9 = r0->locals;
			if( r9 == NULL ) hl_null_access();
			r7 = ((hxsl_TExprDef_TVarDecl*)r2)->p0;
			if( r7 == NULL ) hl_null_access();
			r5 = hl_vfields(r7)[0] ? (*(int*)(hl_vfields(r7)[0])) : (int)hl_dyn_geti(r7->value,23515/*id*/,&type$3);
			r8 = true;
			r20 = hl_alloc_dynbool(r8);
			haxe_ds_IntMap_set(r9,r5,r20);
			goto label$3880$294;
		case 11:
			r14 = r0->curShader;
			if( !r14 ) goto label$3880$285;
			r14 = r0->curShader;
			if( r14 == NULL ) hl_null_access();
			r8 = false;
			r15 = hl_alloc_dynbool(r8);
			r14->vertex = r15;
			r14 = r0->curShader;
			if( r14 == NULL ) hl_null_access();
			r8 = true;
			r14->hasDiscard = r8;
			label$3880$285:
			goto label$3880$294;
		case 13:
			r9 = r0->locals;
			if( r9 == NULL ) hl_null_access();
			r7 = ((hxsl_TExprDef_TFor*)r2)->p0;
			if( r7 == NULL ) hl_null_access();
			r5 = hl_vfields(r7)[0] ? (*(int*)(hl_vfields(r7)[0])) : (int)hl_dyn_geti(r7->value,23515/*id*/,&type$3);
			r8 = true;
			r20 = hl_alloc_dynbool(r8);
			haxe_ds_IntMap_set(r9,r5,r20);
	}
	label$3880$294:
	r27 = hl_alloc_closure_ptr(&type$3985,hxsl_Linker_mapExprVar,r0);
	r3 = hxsl_Tools_map(r1,r27);
	return r3;
}

hxsl___Linker__ShaderInfos hxsl_Linker_addShader(hxsl__Linker r0,String r1,vdynamic* r2,vvirtual* r3,int r4) {
	hl__types__ArrayObj r10;
	vvirtual *r9;
	hxsl___Linker__ShaderInfos r5, r7;
	int r8;
	r5 = (hxsl___Linker__ShaderInfos)hl_alloc_obj(hxsl___Linker__ShaderInfos__val);
	hxsl__Linker_ShaderInfos_new(r5,r1,r2);
	r0->curShader = r5;
	r5->priority = r4;
	r9 = hxsl_Linker_mapExprVar(r0,r3);
	r5->body = r9;
	r10 = r0->shaders;
	if( r10 == NULL ) hl_null_access();
	r8 = hl_types_ArrayObj_push(r10,((vdynamic*)r5));
	r7 = NULL;
	r0->curShader = r7;
	return r5;
}

int hxsl_Linker_sortByPriorityDesc(hxsl__Linker r0,hxsl___Linker__ShaderInfos r1,hxsl___Linker__ShaderInfos r2) {
	int r3, r4;
	if( r1 == NULL ) hl_null_access();
	r3 = r1->priority;
	if( r2 == NULL ) hl_null_access();
	r4 = r2->priority;
	if( r3 != r4 ) goto label$3882$9;
	r3 = r1->uid;
	r4 = r2->uid;
	r3 = r3 - r4;
	return r3;
	label$3882$9:
	r3 = r2->priority;
	r4 = r1->priority;
	r3 = r3 - r4;
	return r3;
}

void hxsl_Linker_buildDependency(hxsl__Linker r0,hxsl___Linker__ShaderInfos r1,hxsl___Linker__AllocatedVar r2,bool r3) {
	String r21, r22;
	haxe__ds__ObjectMap r17;
	vvirtual *r19, *r23;
	hl__types__ArrayObj r7;
	venum *r18, *r20;
	bool r4, r13;
	haxe__ds__IntMap r14;
	hxsl___Linker__ShaderInfos r10;
	vdynamic *r11, *r15, *r16;
	varray *r12;
	int r6, r8, r9;
	r4 = !r3;
	r6 = 0;
	r7 = r0->shaders;
	label$3883$3:
	if( r7 == NULL ) hl_null_access();
	r9 = r7->length;
	if( r6 >= r9 ) goto label$3883$62;
	r9 = r7->length;
	if( ((unsigned)r6) < ((unsigned)r9) ) goto label$3883$11;
	r10 = NULL;
	goto label$3883$14;
	label$3883$11:
	r12 = r7->array;
	r11 = ((vdynamic**)(r12 + 1))[r6];
	r10 = (hxsl___Linker__ShaderInfos)r11;
	label$3883$14:
	++r6;
	if( r10 != r1 ) goto label$3883$19;
	r13 = true;
	r4 = r13;
	goto label$3883$3;
	label$3883$19:
	if( r4 ) goto label$3883$21;
	goto label$3883$3;
	label$3883$21:
	if( r10 == NULL ) hl_null_access();
	r14 = r10->write;
	if( r14 == NULL ) hl_null_access();
	if( r2 == NULL ) hl_null_access();
	r8 = r2->id;
	r13 = haxe_ds_IntMap_exists(r14,r8);
	if( r13 ) goto label$3883$29;
	goto label$3883$3;
	label$3883$29:
	if( r1 == NULL ) hl_null_access();
	r15 = r1->vertex;
	r13 = r15 ? r15->v.b : 0;
	if( !r13 ) goto label$3883$43;
	r15 = r10->vertex;
	r13 = false;
	r16 = hl_alloc_dynbool(r13);
	if( r15 != r16 && (!r15 || !r16 || (r15->v.b != r16->v.b)) ) goto label$3883$38;
	goto label$3883$3;
	label$3883$38:
	r15 = r10->vertex;
	if( r15 ) goto label$3883$43;
	r13 = true;
	r15 = hl_alloc_dynbool(r13);
	r10->vertex = r15;
	label$3883$43:
	r17 = r1->deps;
	if( r17 == NULL ) hl_null_access();
	r13 = true;
	r11 = hl_alloc_dynbool(r13);
	haxe_ds_ObjectMap_set(r17,((vdynamic*)r10),r11);
	r8 = r0->debugDepth;
	++r8;
	r0->debugDepth = r8;
	hxsl_Linker_initDependencies(r0,r10);
	r8 = r0->debugDepth;
	--r8;
	r0->debugDepth = r8;
	r14 = r10->read;
	if( r14 == NULL ) hl_null_access();
	r8 = r2->id;
	r13 = haxe_ds_IntMap_exists(r14,r8);
	if( r13 ) goto label$3883$61;
	return;
	label$3883$61:
	goto label$3883$3;
	label$3883$62:
	if( r2 == NULL ) hl_null_access();
	r19 = r2->v;
	if( r19 == NULL ) hl_null_access();
	r18 = hl_vfields(r19)[1] ? (*(venum**)(hl_vfields(r19)[1])) : (venum*)hl_dyn_getp(r19->value,118088286/*kind*/,&type$147);
	r20 = (venum*)global$1358;
	if( r18 != r20 ) goto label$3883$80;
	r21 = (String)global$1553;
	r22 = r2->path;
	r21 = String___add__(r21,r22);
	r22 = (String)global$1554;
	r21 = String___add__(r21,r22);
	if( r1 == NULL ) hl_null_access();
	r22 = r1->name;
	r21 = String___add__(r21,r22);
	r22 = (String)global$1555;
	r21 = String___add__(r21,r22);
	r23 = NULL;
	r11 = hxsl_Linker_error(r0,r21,r23);
	label$3883$80:
	return;
}

void hxsl_Linker_initDependencies(hxsl__Linker r0,hxsl___Linker__ShaderInfos r1) {
	haxe__ds__ObjectMap r3;
	bool r7;
	hxsl___Linker__AllocatedVar r9;
	haxe__ds__IntMap r6;
	hxsl___Linker__ShaderInfos r4;
	vclosure *r8, *r10, *r13;
	vdynamic *r5, *r12, *r14;
	int r11;
	if( r1 == NULL ) hl_null_access();
	r3 = r1->deps;
	if( !r3 ) goto label$3884$4;
	return;
	label$3884$4:
	r3 = (haxe__ds__ObjectMap)hl_alloc_obj(haxe__ds__ObjectMap__val);
	haxe_ds_ObjectMap_new(r3);
	r1->deps = r3;
	r6 = r1->read;
	if( r6 == NULL ) hl_null_access();
	r5 = haxe_ds_IntMap_iterator(r6);
	label$3884$10:
	if( r5 == NULL ) hl_null_access();
	r8 = (vclosure*)hl_dyn_getp((vdynamic*)r5,407283053/*hasNext*/,&type$118);
	if( r8 == NULL ) hl_null_access();
	r7 = r8->hasValue ? ((bool (*)(vdynamic*))r8->fun)((vdynamic*)r8->value) : ((bool (*)(void))r8->fun)();
	if( !r7 ) goto label$3884$27;
	r10 = (vclosure*)hl_dyn_getp((vdynamic*)r5,151160317/*next*/,&type$3990);
	if( r10 == NULL ) hl_null_access();
	r9 = r10->hasValue ? ((hxsl___Linker__AllocatedVar (*)(vdynamic*))r10->fun)((vdynamic*)r10->value) : ((hxsl___Linker__AllocatedVar (*)(void))r10->fun)();
	if( r1 == NULL ) hl_null_access();
	r6 = r1->write;
	if( r6 == NULL ) hl_null_access();
	if( r9 == NULL ) hl_null_access();
	r11 = r9->id;
	r7 = haxe_ds_IntMap_exists(r6,r11);
	hxsl_Linker_buildDependency(r0,r1,r9,r7);
	goto label$3884$10;
	label$3884$27:
	if( r1 == NULL ) hl_null_access();
	r12 = r1->vertex;
	if( r12 ) goto label$3884$53;
	r3 = r1->deps;
	if( r3 == NULL ) hl_null_access();
	r5 = haxe_ds_ObjectMap_keys(r3);
	label$3884$33:
	if( r5 == NULL ) hl_null_access();
	r8 = (vclosure*)hl_dyn_getp((vdynamic*)r5,407283053/*hasNext*/,&type$118);
	if( r8 == NULL ) hl_null_access();
	r7 = r8->hasValue ? ((bool (*)(vdynamic*))r8->fun)((vdynamic*)r8->value) : ((bool (*)(void))r8->fun)();
	if( !r7 ) goto label$3884$53;
	r13 = (vclosure*)hl_dyn_getp((vdynamic*)r5,151160317/*next*/,&type$3991);
	if( r13 == NULL ) hl_null_access();
	r4 = r13->hasValue ? ((hxsl___Linker__ShaderInfos (*)(vdynamic*))r13->fun)((vdynamic*)r13->value) : ((hxsl___Linker__ShaderInfos (*)(void))r13->fun)();
	if( r4 == NULL ) hl_null_access();
	r12 = r4->vertex;
	r7 = false;
	r14 = hl_alloc_dynbool(r7);
	if( r12 != r14 && (!r12 || !r14 || (r12->v.b != r14->v.b)) ) goto label$3884$52;
	if( r1 == NULL ) hl_null_access();
	r7 = false;
	r12 = hl_alloc_dynbool(r7);
	r1->vertex = r12;
	goto label$3884$53;
	label$3884$52:
	goto label$3884$33;
	label$3884$53:
	if( r1 == NULL ) hl_null_access();
	r12 = r1->vertex;
	r7 = r12 ? r12->v.b : 0;
	if( !r7 ) goto label$3884$76;
	r3 = r1->deps;
	if( r3 == NULL ) hl_null_access();
	r5 = haxe_ds_ObjectMap_keys(r3);
	label$3884$60:
	if( r5 == NULL ) hl_null_access();
	r8 = (vclosure*)hl_dyn_getp((vdynamic*)r5,407283053/*hasNext*/,&type$118);
	if( r8 == NULL ) hl_null_access();
	r7 = r8->hasValue ? ((bool (*)(vdynamic*))r8->fun)((vdynamic*)r8->value) : ((bool (*)(void))r8->fun)();
	if( !r7 ) goto label$3884$76;
	r13 = (vclosure*)hl_dyn_getp((vdynamic*)r5,151160317/*next*/,&type$3991);
	if( r13 == NULL ) hl_null_access();
	r4 = r13->hasValue ? ((hxsl___Linker__ShaderInfos (*)(vdynamic*))r13->fun)((vdynamic*)r13->value) : ((hxsl___Linker__ShaderInfos (*)(void))r13->fun)();
	if( r4 == NULL ) hl_null_access();
	r12 = r4->vertex;
	if( r12 ) goto label$3884$75;
	r7 = true;
	r12 = hl_alloc_dynbool(r7);
	r4->vertex = r12;
	label$3884$75:
	goto label$3884$60;
	label$3884$76:
	return;
}

void hxsl_Linker_collect(hxsl__Linker r0,hxsl___Linker__ShaderInfos r1,hl__types__ArrayObj r2,bool r3) {
	String r8, r9;
	haxe__ds__ObjectMap r17;
	hl__types__ArrayObj r13;
	vvirtual *r10;
	hl_type *r15;
	bool r5;
	hxsl___Linker__ShaderInfos r6;
	vclosure *r18, *r19, *r20, *r21;
	vdynamic *r7, *r11, *r12;
	int r16, r22, r23;
	varray *r14;
	if( r1 == NULL ) hl_null_access();
	r5 = r1->onStack;
	if( !r5 ) goto label$3885$10;
	r8 = (String)global$1556;
	r9 = r1->name;
	r8 = String___add__(r8,r9);
	r9 = (String)global$177;
	r8 = String___add__(r8,r9);
	r10 = NULL;
	r7 = hxsl_Linker_error(r0,r8,r10);
	label$3885$10:
	r11 = r1->marked;
	r12 = hl_alloc_dynbool(r3);
	if( r11 != r12 && (!r11 || !r12 || (r11->v.b != r12->v.b)) ) goto label$3885$14;
	return;
	label$3885$14:
	r11 = hl_alloc_dynbool(r3);
	r1->marked = r11;
	r5 = true;
	r1->onStack = r5;
	r15 = &type$3872;
	r16 = 0;
	r14 = hl_alloc_array(r15,r16);
	r13 = hl_types_ArrayObj_alloc(r14);
	r17 = r1->deps;
	if( r17 == NULL ) hl_null_access();
	r7 = haxe_ds_ObjectMap_keys(r17);
	label$3885$25:
	if( r7 == NULL ) hl_null_access();
	r18 = (vclosure*)hl_dyn_getp((vdynamic*)r7,407283053/*hasNext*/,&type$118);
	if( r18 == NULL ) hl_null_access();
	r5 = r18->hasValue ? ((bool (*)(vdynamic*))r18->fun)((vdynamic*)r18->value) : ((bool (*)(void))r18->fun)();
	if( !r5 ) goto label$3885$37;
	if( r13 == NULL ) hl_null_access();
	r19 = (vclosure*)hl_dyn_getp((vdynamic*)r7,151160317/*next*/,&type$3991);
	if( r19 == NULL ) hl_null_access();
	r6 = r19->hasValue ? ((hxsl___Linker__ShaderInfos (*)(vdynamic*))r19->fun)((vdynamic*)r19->value) : ((hxsl___Linker__ShaderInfos (*)(void))r19->fun)();
	r16 = hl_types_ArrayObj_push(r13,((vdynamic*)r6));
	goto label$3885$25;
	label$3885$37:
	if( r13 == NULL ) hl_null_access();
	r20 = hl_alloc_closure_ptr(&type$3987,hxsl_Linker_sortByPriorityDesc,r0);
	if( r20 ) goto label$3885$42;
	r21 = NULL;
	goto label$3885$43;
	label$3885$42:
	r21 = hl_alloc_closure_ptr(&type$3992,fun$3995,r20);
	label$3885$43:
	hl_types_ArrayObj_sort(r13,r21);
	r16 = 0;
	label$3885$45:
	if( r13 == NULL ) hl_null_access();
	r23 = r13->length;
	if( r16 >= r23 ) goto label$3885$60;
	r22 = r16;
	++r16;
	r23 = r13->length;
	if( ((unsigned)r22) < ((unsigned)r23) ) goto label$3885$55;
	r6 = NULL;
	goto label$3885$58;
	label$3885$55:
	r14 = r13->array;
	r7 = ((vdynamic**)(r14 + 1))[r22];
	r6 = (hxsl___Linker__ShaderInfos)r7;
	label$3885$58:
	hxsl_Linker_collect(r0,r6,r2,r3);
	goto label$3885$45;
	label$3885$60:
	if( r1 == NULL ) hl_null_access();
	r11 = r1->vertex;
	if( r11 ) goto label$3885$65;
	r11 = hl_alloc_dynbool(r3);
	r1->vertex = r11;
	label$3885$65:
	r11 = r1->vertex;
	r12 = hl_alloc_dynbool(r3);
	if( r11 != r12 && (!r11 || !r12 || (r11->v.b != r12->v.b)) ) goto label$3885$70;
	if( r2 == NULL ) hl_null_access();
	r16 = hl_types_ArrayObj_push(r2,((vdynamic*)r1));
	label$3885$70:
	r5 = false;
	r1->onStack = r5;
	return;
}

void hxsl_Linker_uniqueLocals(hxsl__Linker r0,vvirtual* r1,haxe__ds__StringMap r2) {
	String r16, r24;
	hl__types__ArrayObj r11;
	haxe__ds__StringMap r8;
	vvirtual *r4, *r21;
	venum *r3, *r10;
	bool r13;
	vclosure *r7, *r9, *r14, *r17;
	int *r22;
	vdynamic *r12, *r15;
	vbyte *r23;
	varray *r20;
	int r6, r18, r19;
	if( r1 == NULL ) hl_null_access();
	r3 = hl_vfields(r1)[0] ? (*(venum**)(hl_vfields(r1)[0])) : (venum*)hl_dyn_getp(r1->value,101/*e*/,&type$813);
	if( r3 == NULL ) hl_null_access();
	r6 = HL__ENUM_INDEX__(r3);
	switch(r6) {
		default:
		case 0:
		case 1:
		case 2:
		case 3:
		case 5:
		case 6:
			r7 = hl_alloc_closure_ptr(&type$3998,hxsl_Linker_uniqueLocals,r0);
			r10 = hl_alloc_enum(&type$3996,0);
			((Enum$3996*)r10)->p0 = (vclosure*)r7;
			((Enum$3996*)r10)->p1 = (haxe__ds__StringMap)r2;
			r9 = hl_alloc_closure_ptr(&type$3995,fun$3996,r10);
			hxsl_Tools_iter(r1,r9);
			goto label$3886$79;
		case 4:
			r11 = ((hxsl_TExprDef_TBlock*)r3)->p0;
			r8 = (haxe__ds__StringMap)hl_alloc_obj(haxe__ds__StringMap__val);
			haxe_ds_StringMap_new(r8);
			if( r2 == NULL ) hl_null_access();
			r12 = haxe_ds_StringMap_keys(r2);
			label$3886$17:
			if( r12 == NULL ) hl_null_access();
			r14 = (vclosure*)hl_dyn_getp((vdynamic*)r12,407283053/*hasNext*/,&type$118);
			if( r14 == NULL ) hl_null_access();
			r13 = r14->hasValue ? ((bool (*)(vdynamic*))r14->fun)((vdynamic*)r14->value) : ((bool (*)(void))r14->fun)();
			if( !r13 ) goto label$3886$31;
			if( r8 == NULL ) hl_null_access();
			r17 = (vclosure*)hl_dyn_getp((vdynamic*)r12,151160317/*next*/,&type$378);
			if( r17 == NULL ) hl_null_access();
			r16 = r17->hasValue ? ((String (*)(vdynamic*))r17->fun)((vdynamic*)r17->value) : ((String (*)(void))r17->fun)();
			r13 = true;
			r15 = hl_alloc_dynbool(r13);
			haxe_ds_StringMap_set(r8,r16,r15);
			goto label$3886$17;
			label$3886$31:
			r6 = 0;
			label$3886$32:
			if( r11 == NULL ) hl_null_access();
			r19 = r11->length;
			if( r6 >= r19 ) goto label$3886$47;
			r18 = r6;
			++r6;
			r19 = r11->length;
			if( ((unsigned)r18) < ((unsigned)r19) ) goto label$3886$42;
			r4 = NULL;
			goto label$3886$45;
			label$3886$42:
			r20 = r11->array;
			r12 = ((vdynamic**)(r20 + 1))[r18];
			r4 = hl_to_virtual(&type$812,(vdynamic*)r12);
			label$3886$45:
			hxsl_Linker_uniqueLocals(r0,r4,r8);
			goto label$3886$32;
			label$3886$47:
			goto label$3886$79;
		case 7:
			r21 = ((hxsl_TExprDef_TVarDecl*)r3)->p0;
			if( r2 == NULL ) hl_null_access();
			if( r21 == NULL ) hl_null_access();
			r16 = hl_vfields(r21)[2] ? (*(String*)(hl_vfields(r21)[2])) : (String)hl_dyn_getp(r21->value,150958933/*name*/,&type$13);
			r13 = haxe_ds_StringMap_exists(r2,r16);
			if( !r13 ) goto label$3886$75;
			r6 = 2;
			label$3886$55:
			if( r2 == NULL ) hl_null_access();
			if( r21 == NULL ) hl_null_access();
			r16 = hl_vfields(r21)[2] ? (*(String*)(hl_vfields(r21)[2])) : (String)hl_dyn_getp(r21->value,150958933/*name*/,&type$13);
			r18 = r6;
			r22 = &r18;
			r23 = hl_itos(r18,r22);
			r24 = String___alloc__(r23,r18);
			r16 = String___add__(r16,r24);
			r13 = haxe_ds_StringMap_exists(r2,r16);
			if( !r13 ) goto label$3886$68;
			++r6;
			goto label$3886$55;
			label$3886$68:
			r16 = hl_vfields(r21)[2] ? (*(String*)(hl_vfields(r21)[2])) : (String)hl_dyn_getp(r21->value,150958933/*name*/,&type$13);
			r18 = r6;
			r22 = &r18;
			r23 = hl_itos(r18,r22);
			r24 = String___alloc__(r23,r18);
			r16 = String___add__(r16,r24);
			if( hl_vfields(r21)[2] ) *(String*)(hl_vfields(r21)[2]) = (String)r16; else hl_dyn_setp(r21->value,150958933/*name*/,&type$13,r16);
			label$3886$75:
			r16 = hl_vfields(r21)[2] ? (*(String*)(hl_vfields(r21)[2])) : (String)hl_dyn_getp(r21->value,150958933/*name*/,&type$13);
			r13 = true;
			r12 = hl_alloc_dynbool(r13);
			haxe_ds_StringMap_set(r2,r16,r12);
	}
	label$3886$79:
	return;
}

vvirtual* hxsl_Linker_link(hxsl__Linker r0,hl__types__ArrayObj r1) {
	String r27, r39;
	haxe__ds__ObjectMap r10, r18;
	vvirtual *r14, *r16, *r19, *r24, *r26, *r30, *r31;
	hl__types__ArrayObj r6, r13, r21, r23, r48, r60, r63, r65, r72, r73;
	haxe__ds__StringMap r4;
	venum *r28, *r29, *r32, *r40, *r45, *r64, *r68, *r70;
	hl_type *r8;
	bool r17, r56;
	hxsl___Linker__AllocatedVar r25;
	hxsl___Linker__ShaderInfos r38, r54, r55;
	haxe__ds__IntMap r5, r66;
	hxsl__Linker r2;
	hl__types__ArrayBytes_Int r33, r35, r36, r43;
	vclosure *r52, *r53, *r57, *r59, *r61, *r62, *r67, *r69, *r71;
	int *r49;
	vdynamic *r15, *r41, *r44, *r58;
	vbyte *r34, *r42;
	int r9, r11, r12, r20, r22, r37, r46, r47, r50, r51;
	varray *r7;
	r2 = r0;
	r4 = (haxe__ds__StringMap)hl_alloc_obj(haxe__ds__StringMap__val);
	haxe_ds_StringMap_new(r4);
	r0->varMap = r4;
	r5 = (haxe__ds__IntMap)hl_alloc_obj(haxe__ds__IntMap__val);
	haxe_ds_IntMap_new(r5);
	r0->varIdMap = r5;
	r6 = (hl__types__ArrayObj)hl_alloc_obj(hl__types__ArrayObj__val);
	hl_types_ArrayObj_new(r6);
	r0->allVars = r6;
	r8 = &type$3872;
	r9 = 0;
	r7 = hl_alloc_array(r8,r9);
	r6 = hl_types_ArrayObj_alloc(r7);
	r0->shaders = r6;
	r5 = (haxe__ds__IntMap)hl_alloc_obj(haxe__ds__IntMap__val);
	haxe_ds_IntMap_new(r5);
	r0->locals = r5;
	r10 = (haxe__ds__ObjectMap)hl_alloc_obj(haxe__ds__ObjectMap__val);
	haxe_ds_ObjectMap_new(r10);
	r8 = &type$144;
	r9 = 0;
	r7 = hl_alloc_array(r8,r9);
	r6 = hl_types_ArrayObj_alloc(r7);
	r9 = 0;
	label$3887$25:
	if( r1 == NULL ) hl_null_access();
	r12 = r1->length;
	if( r9 >= r12 ) goto label$3887$47;
	r12 = r1->length;
	if( ((unsigned)r9) < ((unsigned)r12) ) goto label$3887$33;
	r14 = NULL;
	goto label$3887$36;
	label$3887$33:
	r7 = r1->array;
	r15 = ((vdynamic**)(r7 + 1))[r9];
	r14 = hl_to_virtual(&type$144,(vdynamic*)r15);
	label$3887$36:
	++r9;
	r16 = r14;
	if( r10 == NULL ) hl_null_access();
	r17 = haxe_ds_ObjectMap_exists(r10,((vdynamic*)r14));
	if( !r17 ) goto label$3887$43;
	r19 = hxsl_Clone_shaderData(r14);
	r16 = r19;
	label$3887$43:
	haxe_ds_ObjectMap_set(r10,((vdynamic*)r16),((vdynamic*)r14));
	if( r6 == NULL ) hl_null_access();
	r11 = hl_types_ArrayObj_push(r6,((vdynamic*)r16));
	goto label$3887$25;
	label$3887$47:
	r11 = 0;
	r0->curInstance = r11;
	r8 = &type$146;
	r11 = 0;
	r7 = hl_alloc_array(r8,r11);
	r13 = hl_types_ArrayObj_alloc(r7);
	r11 = 0;
	label$3887$54:
	if( r6 == NULL ) hl_null_access();
	r20 = r6->length;
	if( r11 >= r20 ) goto label$3887$123;
	r20 = r6->length;
	if( ((unsigned)r11) < ((unsigned)r20) ) goto label$3887$62;
	r14 = NULL;
	goto label$3887$65;
	label$3887$62:
	r7 = r6->array;
	r15 = ((vdynamic**)(r7 + 1))[r11];
	r14 = hl_to_virtual(&type$144,(vdynamic*)r15);
	label$3887$65:
	++r11;
	r12 = 0;
	if( r14 == NULL ) hl_null_access();
	r21 = hl_vfields(r14)[2] ? (*(hl__types__ArrayObj*)(hl_vfields(r14)[2])) : (hl__types__ArrayObj)hl_dyn_getp(r14->value,239676598/*vars*/,&type$46);
	label$3887$69:
	if( r21 == NULL ) hl_null_access();
	r22 = r21->length;
	if( r12 >= r22 ) goto label$3887$92;
	r22 = r21->length;
	if( ((unsigned)r12) < ((unsigned)r22) ) goto label$3887$77;
	r24 = NULL;
	goto label$3887$80;
	label$3887$77:
	r7 = r21->array;
	r15 = ((vdynamic**)(r7 + 1))[r12];
	r24 = hl_to_virtual(&type$146,(vdynamic*)r15);
	label$3887$80:
	++r12;
	r26 = NULL;
	r27 = NULL;
	r25 = NULL;
	r25 = hxsl_Linker_allocVar(r0,r24,r26,r27,r25);
	if( r24 == NULL ) hl_null_access();
	r28 = hl_vfields(r24)[1] ? (*(venum**)(hl_vfields(r24)[1])) : (venum*)hl_dyn_getp(r24->value,118088286/*kind*/,&type$147);
	r29 = (venum*)global$1365;
	if( r28 != r29 ) goto label$3887$91;
	if( r13 == NULL ) hl_null_access();
	r20 = hl_types_ArrayObj_push(r13,((vdynamic*)r24));
	label$3887$91:
	goto label$3887$69;
	label$3887$92:
	r12 = 0;
	if( r14 == NULL ) hl_null_access();
	r21 = hl_vfields(r14)[0] ? (*(hl__types__ArrayObj*)(hl_vfields(r14)[0])) : (hl__types__ArrayObj)hl_dyn_getp(r14->value,63237214/*funs*/,&type$46);
	label$3887$95:
	if( r21 == NULL ) hl_null_access();
	r22 = r21->length;
	if( r12 >= r22 ) goto label$3887$119;
	r22 = r21->length;
	if( ((unsigned)r12) < ((unsigned)r22) ) goto label$3887$103;
	r30 = NULL;
	goto label$3887$106;
	label$3887$103:
	r7 = r21->array;
	r15 = ((vdynamic**)(r7 + 1))[r12];
	r30 = hl_to_virtual(&type$3863,(vdynamic*)r15);
	label$3887$106:
	++r12;
	if( r30 == NULL ) hl_null_access();
	r24 = hl_vfields(r30)[3] ? (*(vvirtual**)(hl_vfields(r30)[3])) : (vvirtual*)hl_dyn_getp(r30->value,5691731/*ref*/,&type$146);
	r31 = hl_vfields(r30)[1] ? (*(vvirtual**)(hl_vfields(r30)[1])) : (vvirtual*)hl_dyn_getp(r30->value,52297279/*expr*/,&type$812);
	if( r31 == NULL ) hl_null_access();
	r26 = hl_vfields(r31)[1] ? (*(vvirtual**)(hl_vfields(r31)[1])) : (vvirtual*)hl_dyn_getp(r31->value,112/*p*/,&type$800);
	r27 = NULL;
	r25 = NULL;
	r25 = hxsl_Linker_allocVar(r0,r24,r26,r27,r25);
	if( r25 == NULL ) hl_null_access();
	r32 = hl_vfields(r30)[2] ? (*(venum**)(hl_vfields(r30)[2])) : (venum*)hl_dyn_getp(r30->value,118088286/*kind*/,&type$824);
	r25->kind = r32;
	goto label$3887$95;
	label$3887$119:
	r12 = r0->curInstance;
	++r12;
	r0->curInstance = r12;
	goto label$3887$54;
	label$3887$123:
	r11 = 0;
	r12 = 4;
	r34 = hl_alloc_bytes(r12);
	r12 = 0;
	r20 = -3000;
	r22 = 2;
	r22 = r12 << r22;
	*(int*)(r34 + r22) = r20;
	++r12;
	r12 = 1;
	r33 = hl_types_ArrayBase_allocI32(r34,r12);
	r12 = 4;
	r34 = hl_alloc_bytes(r12);
	r12 = 0;
	r20 = -2000;
	r22 = 2;
	r22 = r12 << r22;
	*(int*)(r34 + r22) = r20;
	++r12;
	r12 = 1;
	r35 = hl_types_ArrayBase_allocI32(r34,r12);
	r12 = 4;
	r34 = hl_alloc_bytes(r12);
	r12 = 0;
	r20 = -1000;
	r22 = 2;
	r22 = r12 << r22;
	*(int*)(r34 + r22) = r20;
	++r12;
	r12 = 1;
	r36 = hl_types_ArrayBase_allocI32(r34,r12);
	r12 = 0;
	label$3887$155:
	if( r6 == NULL ) hl_null_access();
	r22 = r6->length;
	if( r12 >= r22 ) goto label$3887$340;
	r22 = r6->length;
	if( ((unsigned)r12) < ((unsigned)r22) ) goto label$3887$163;
	r14 = NULL;
	goto label$3887$166;
	label$3887$163:
	r7 = r6->array;
	r15 = ((vdynamic**)(r7 + 1))[r12];
	r14 = hl_to_virtual(&type$144,(vdynamic*)r15);
	label$3887$166:
	++r12;
	r20 = 0;
	if( r14 == NULL ) hl_null_access();
	r21 = hl_vfields(r14)[0] ? (*(hl__types__ArrayObj*)(hl_vfields(r14)[0])) : (hl__types__ArrayObj)hl_dyn_getp(r14->value,63237214/*funs*/,&type$46);
	label$3887$170:
	if( r21 == NULL ) hl_null_access();
	r37 = r21->length;
	if( r20 >= r37 ) goto label$3887$338;
	r37 = r21->length;
	if( ((unsigned)r20) < ((unsigned)r37) ) goto label$3887$178;
	r30 = NULL;
	goto label$3887$181;
	label$3887$178:
	r7 = r21->array;
	r15 = ((vdynamic**)(r7 + 1))[r20];
	r30 = hl_to_virtual(&type$3863,(vdynamic*)r15);
	label$3887$181:
	++r20;
	if( r30 == NULL ) hl_null_access();
	r24 = hl_vfields(r30)[3] ? (*(vvirtual**)(hl_vfields(r30)[3])) : (vvirtual*)hl_dyn_getp(r30->value,5691731/*ref*/,&type$146);
	r31 = hl_vfields(r30)[1] ? (*(vvirtual**)(hl_vfields(r30)[1])) : (vvirtual*)hl_dyn_getp(r30->value,52297279/*expr*/,&type$812);
	if( r31 == NULL ) hl_null_access();
	r26 = hl_vfields(r31)[1] ? (*(vvirtual**)(hl_vfields(r31)[1])) : (vvirtual*)hl_dyn_getp(r31->value,112/*p*/,&type$800);
	r27 = NULL;
	r25 = NULL;
	r25 = hxsl_Linker_allocVar(r0,r24,r26,r27,r25);
	if( r25 == NULL ) hl_null_access();
	r32 = r25->kind;
	if( r32 ) goto label$3887$195;
	r27 = (String)global$319;
	hl_throw((vdynamic*)r27);
	label$3887$195:
	r32 = r25->kind;
	if( r32 == NULL ) hl_null_access();
	r22 = HL__ENUM_INDEX__(r32);
	switch(r22) {
		default:
			goto label$3887$337;
		case 0:
		case 1:
			if( r14 == NULL ) hl_null_access();
			r27 = hl_vfields(r14)[1] ? (*(String*)(hl_vfields(r14)[1])) : (String)hl_dyn_getp(r14->value,150958933/*name*/,&type$13);
			r39 = (String)global$210;
			r27 = String___add__(r27,r39);
			r32 = r25->kind;
			r40 = (venum*)global$1368;
			if( r32 != r40 ) goto label$3887$209;
			r39 = (String)global$1411;
			goto label$3887$210;
			label$3887$209:
			r39 = (String)global$1412;
			label$3887$210:
			r27 = String___add__(r27,r39);
			r32 = r25->kind;
			r40 = (venum*)global$1368;
			if( r32 == r40 ) goto label$3887$216;
			r17 = false;
			goto label$3887$217;
			label$3887$216:
			r17 = true;
			label$3887$217:
			r41 = hl_alloc_dynbool(r17);
			r31 = hl_vfields(r30)[1] ? (*(vvirtual**)(hl_vfields(r30)[1])) : (vvirtual*)hl_dyn_getp(r30->value,52297279/*expr*/,&type$812);
			r38 = hxsl_Linker_addShader(r0,r27,r41,r31,r11);
			goto label$3887$337;
		case 2:
			r24 = hl_vfields(r30)[3] ? (*(vvirtual**)(hl_vfields(r30)[3])) : (vvirtual*)hl_dyn_getp(r30->value,5691731/*ref*/,&type$146);
			if( r24 == NULL ) hl_null_access();
			r27 = hl_vfields(r24)[2] ? (*(String*)(hl_vfields(r24)[2])) : (String)hl_dyn_getp(r24->value,150958933/*name*/,&type$13);
			if( !r27 ) goto label$3887$233;
			r22 = r27->length;
			r37 = 16;
			if( r22 != r37 ) goto label$3887$233;
			r34 = r27->bytes;
			r42 = (vbyte*)USTR("__init__fragment");
			r22 = hl_string_compare(r34,r42,r22);
			r37 = 0;
			if( r22 == r37 ) goto label$3887$246;
			label$3887$233:
			if( !r27 ) goto label$3887$242;
			r22 = r27->length;
			r37 = 14;
			if( r22 != r37 ) goto label$3887$242;
			r34 = r27->bytes;
			r42 = (vbyte*)USTR("__init__vertex");
			r22 = hl_string_compare(r34,r42,r22);
			r37 = 0;
			if( r22 == r37 ) goto label$3887$251;
			label$3887$242:
			r43 = r33;
			r44 = NULL;
			r41 = r44;
			goto label$3887$255;
			label$3887$246:
			r43 = r36;
			r17 = false;
			r44 = hl_alloc_dynbool(r17);
			r41 = r44;
			goto label$3887$255;
			label$3887$251:
			r43 = r35;
			r17 = true;
			r44 = hl_alloc_dynbool(r17);
			r41 = r44;
			label$3887$255:
			r31 = hl_vfields(r30)[1] ? (*(vvirtual**)(hl_vfields(r30)[1])) : (vvirtual*)hl_dyn_getp(r30->value,52297279/*expr*/,&type$812);
			if( r31 == NULL ) hl_null_access();
			r45 = hl_vfields(r31)[0] ? (*(venum**)(hl_vfields(r31)[0])) : (venum*)hl_dyn_getp(r31->value,101/*e*/,&type$813);
			if( r45 == NULL ) hl_null_access();
			r22 = HL__ENUM_INDEX__(r45);
			r37 = 4;
			if( r22 != r37 ) goto label$3887$308;
			r23 = ((hxsl_TExprDef_TBlock*)r45)->p0;
			r22 = 0;
			r37 = 0;
			label$3887$265:
			if( r23 == NULL ) hl_null_access();
			r47 = r23->length;
			if( r37 >= r47 ) goto label$3887$307;
			if( r14 == NULL ) hl_null_access();
			r27 = hl_vfields(r14)[1] ? (*(String*)(hl_vfields(r14)[1])) : (String)hl_dyn_getp(r14->value,150958933/*name*/,&type$13);
			r39 = (String)global$210;
			r27 = String___add__(r27,r39);
			if( r30 == NULL ) hl_null_access();
			r24 = hl_vfields(r30)[3] ? (*(vvirtual**)(hl_vfields(r30)[3])) : (vvirtual*)hl_dyn_getp(r30->value,5691731/*ref*/,&type$146);
			if( r24 == NULL ) hl_null_access();
			r39 = hl_vfields(r24)[2] ? (*(String*)(hl_vfields(r24)[2])) : (String)hl_dyn_getp(r24->value,150958933/*name*/,&type$13);
			r27 = String___add__(r27,r39);
			r46 = r22;
			++r22;
			r49 = &r46;
			r34 = hl_itos(r46,r49);
			r39 = String___alloc__(r34,r46);
			r27 = String___add__(r27,r39);
			r46 = r37;
			++r37;
			r47 = r23->length;
			if( ((unsigned)r46) < ((unsigned)r47) ) goto label$3887$290;
			r31 = NULL;
			goto label$3887$293;
			label$3887$290:
			r7 = r23->array;
			r15 = ((vdynamic**)(r7 + 1))[r46];
			r31 = hl_to_virtual(&type$812,(vdynamic*)r15);
			label$3887$293:
			if( r43 == NULL ) hl_null_access();
			r46 = 0;
			r47 = r43->length;
			if( ((unsigned)r46) < ((unsigned)r47) ) goto label$3887$298;
			hl_types_ArrayBytes_Int___expand(r43,r46);
			label$3887$298:
			r34 = r43->bytes;
			r47 = 2;
			r47 = r46 << r47;
			r50 = *(int*)(r34 + r47);
			r51 = r50;
			++r50;
			*(int*)(r34 + r47) = r50;
			r38 = hxsl_Linker_addShader(r0,r27,r41,r31,r51);
			goto label$3887$265;
			label$3887$307:
			goto label$3887$330;
			label$3887$308:
			if( r14 == NULL ) hl_null_access();
			r27 = hl_vfields(r14)[1] ? (*(String*)(hl_vfields(r14)[1])) : (String)hl_dyn_getp(r14->value,150958933/*name*/,&type$13);
			r39 = (String)global$210;
			r27 = String___add__(r27,r39);
			r24 = hl_vfields(r30)[3] ? (*(vvirtual**)(hl_vfields(r30)[3])) : (vvirtual*)hl_dyn_getp(r30->value,5691731/*ref*/,&type$146);
			if( r24 == NULL ) hl_null_access();
			r39 = hl_vfields(r24)[2] ? (*(String*)(hl_vfields(r24)[2])) : (String)hl_dyn_getp(r24->value,150958933/*name*/,&type$13);
			r27 = String___add__(r27,r39);
			r31 = hl_vfields(r30)[1] ? (*(vvirtual**)(hl_vfields(r30)[1])) : (vvirtual*)hl_dyn_getp(r30->value,52297279/*expr*/,&type$812);
			if( r43 == NULL ) hl_null_access();
			r22 = 0;
			r37 = r43->length;
			if( ((unsigned)r22) < ((unsigned)r37) ) goto label$3887$322;
			hl_types_ArrayBytes_Int___expand(r43,r22);
			label$3887$322:
			r34 = r43->bytes;
			r37 = 2;
			r37 = r22 << r37;
			r46 = *(int*)(r34 + r37);
			r47 = r46;
			++r46;
			*(int*)(r34 + r37) = r46;
			r38 = hxsl_Linker_addShader(r0,r27,r44,r31,r47);
			label$3887$330:
			goto label$3887$337;
		case 3:
			r27 = (String)global$1557;
			r24 = r25->v;
			if( r24 == NULL ) hl_null_access();
			r39 = hl_vfields(r24)[2] ? (*(String*)(hl_vfields(r24)[2])) : (String)hl_dyn_getp(r24->value,150958933/*name*/,&type$13);
			r27 = String___add__(r27,r39);
			hl_throw((vdynamic*)r27);
	}
	label$3887$337:
	goto label$3887$170;
	label$3887$338:
	++r11;
	goto label$3887$155;
	label$3887$340:
	r21 = r0->shaders;
	if( r21 == NULL ) hl_null_access();
	r52 = hl_alloc_closure_ptr(&type$3987,hxsl_Linker_sortByPriorityDesc,r0);
	if( r52 ) goto label$3887$346;
	r53 = NULL;
	goto label$3887$347;
	label$3887$346:
	r53 = hl_alloc_closure_ptr(&type$3992,fun$3995,r52);
	label$3887$347:
	hl_types_ArrayObj_sort(r21,r53);
	r38 = (hxsl___Linker__ShaderInfos)hl_alloc_obj(hxsl___Linker__ShaderInfos__val);
	r27 = (String)global$1558;
	r17 = false;
	r41 = hl_alloc_dynbool(r17);
	hxsl__Linker_ShaderInfos_new(r38,r27,r41);
	r18 = (haxe__ds__ObjectMap)hl_alloc_obj(haxe__ds__ObjectMap__val);
	haxe_ds_ObjectMap_new(r18);
	r38->deps = r18;
	r12 = 0;
	label$3887$357:
	if( r13 == NULL ) hl_null_access();
	r22 = r13->length;
	if( r12 >= r22 ) goto label$3887$377;
	r20 = r12;
	++r12;
	r22 = r13->length;
	if( ((unsigned)r20) < ((unsigned)r22) ) goto label$3887$367;
	r24 = NULL;
	goto label$3887$370;
	label$3887$367:
	r7 = r13->array;
	r15 = ((vdynamic**)(r7 + 1))[r20];
	r24 = hl_to_virtual(&type$146,(vdynamic*)r15);
	label$3887$370:
	r26 = NULL;
	r27 = NULL;
	r25 = NULL;
	r25 = hxsl_Linker_allocVar(r0,r24,r26,r27,r25);
	r17 = false;
	hxsl_Linker_buildDependency(r0,r38,r25,r17);
	goto label$3887$357;
	label$3887$377:
	r12 = 0;
	r21 = r0->shaders;
	label$3887$379:
	if( r21 == NULL ) hl_null_access();
	r22 = r21->length;
	if( r12 >= r22 ) goto label$3887$402;
	r22 = r21->length;
	if( ((unsigned)r12) < ((unsigned)r22) ) goto label$3887$387;
	r54 = NULL;
	goto label$3887$390;
	label$3887$387:
	r7 = r21->array;
	r15 = ((vdynamic**)(r7 + 1))[r12];
	r54 = (hxsl___Linker__ShaderInfos)r15;
	label$3887$390:
	++r12;
	if( r54 == NULL ) hl_null_access();
	r17 = r54->hasDiscard;
	if( !r17 ) goto label$3887$401;
	hxsl_Linker_initDependencies(r0,r54);
	if( r38 == NULL ) hl_null_access();
	r18 = r38->deps;
	if( r18 == NULL ) hl_null_access();
	r17 = true;
	r15 = hl_alloc_dynbool(r17);
	haxe_ds_ObjectMap_set(r18,((vdynamic*)r54),r15);
	label$3887$401:
	goto label$3887$379;
	label$3887$402:
	r12 = 0;
	r21 = r0->shaders;
	label$3887$404:
	if( r21 == NULL ) hl_null_access();
	r22 = r21->length;
	if( r12 >= r22 ) goto label$3887$449;
	r22 = r21->length;
	if( ((unsigned)r12) < ((unsigned)r22) ) goto label$3887$412;
	r54 = NULL;
	goto label$3887$415;
	label$3887$412:
	r7 = r21->array;
	r15 = ((vdynamic**)(r7 + 1))[r12];
	r54 = (hxsl___Linker__ShaderInfos)r15;
	label$3887$415:
	++r12;
	if( r54 == NULL ) hl_null_access();
	r41 = r54->vertex;
	if( !r41 ) goto label$3887$420;
	goto label$3887$404;
	label$3887$420:
	r17 = true;
	r5 = r54->read;
	if( r5 == NULL ) hl_null_access();
	r15 = haxe_ds_IntMap_iterator(r5);
	label$3887$424:
	if( r15 == NULL ) hl_null_access();
	r57 = (vclosure*)hl_dyn_getp((vdynamic*)r15,407283053/*hasNext*/,&type$118);
	if( r57 == NULL ) hl_null_access();
	r56 = r57->hasValue ? ((bool (*)(vdynamic*))r57->fun)((vdynamic*)r57->value) : ((bool (*)(void))r57->fun)();
	if( !r56 ) goto label$3887$443;
	r59 = (vclosure*)hl_dyn_getp((vdynamic*)r15,151160317/*next*/,&type$3990);
	if( r59 == NULL ) hl_null_access();
	r25 = r59->hasValue ? ((hxsl___Linker__AllocatedVar (*)(vdynamic*))r59->fun)((vdynamic*)r59->value) : ((hxsl___Linker__AllocatedVar (*)(void))r59->fun)();
	if( r25 == NULL ) hl_null_access();
	r24 = r25->v;
	if( r24 == NULL ) hl_null_access();
	r28 = hl_vfields(r24)[1] ? (*(venum**)(hl_vfields(r24)[1])) : (venum*)hl_dyn_getp(r24->value,118088286/*kind*/,&type$147);
	r29 = (venum*)global$1375;
	if( r28 == r29 ) goto label$3887$442;
	r56 = false;
	r17 = r56;
	goto label$3887$443;
	label$3887$442:
	goto label$3887$424;
	label$3887$443:
	if( !r17 ) goto label$3887$448;
	if( r54 == NULL ) hl_null_access();
	r56 = false;
	r41 = hl_alloc_dynbool(r56);
	r54->vertex = r41;
	label$3887$448:
	goto label$3887$404;
	label$3887$449:
	r8 = &type$3872;
	r12 = 0;
	r7 = hl_alloc_array(r8,r12);
	r21 = hl_types_ArrayObj_alloc(r7);
	r8 = &type$3872;
	r12 = 0;
	r7 = hl_alloc_array(r8,r12);
	r23 = hl_types_ArrayObj_alloc(r7);
	r17 = true;
	hxsl_Linker_collect(r0,r38,r21,r17);
	r17 = false;
	hxsl_Linker_collect(r0,r38,r23,r17);
	if( r23 == NULL ) hl_null_access();
	r15 = hl_types_ArrayObj_pop(r23);
	r54 = (hxsl___Linker__ShaderInfos)r15;
	if( r54 == r38 ) goto label$3887$467;
	r27 = (String)global$319;
	hl_throw((vdynamic*)r27);
	label$3887$467:
	r12 = 0;
	r48 = r0->shaders;
	label$3887$469:
	if( r48 == NULL ) hl_null_access();
	r22 = r48->length;
	if( r12 >= r22 ) goto label$3887$486;
	r20 = r12;
	++r12;
	r22 = r48->length;
	if( ((unsigned)r20) < ((unsigned)r22) ) goto label$3887$479;
	r54 = NULL;
	goto label$3887$482;
	label$3887$479:
	r7 = r48->array;
	r15 = ((vdynamic**)(r7 + 1))[r20];
	r54 = (hxsl___Linker__ShaderInfos)r15;
	label$3887$482:
	if( r54 == NULL ) hl_null_access();
	r41 = NULL;
	r54->marked = r41;
	goto label$3887$469;
	label$3887$486:
	r12 = 0;
	if( r21 == NULL ) hl_null_access();
	r48 = hl_types_ArrayObj_concat(r21,r23);
	label$3887$489:
	if( r48 == NULL ) hl_null_access();
	r22 = r48->length;
	if( r12 >= r22 ) goto label$3887$533;
	r22 = r48->length;
	if( ((unsigned)r12) < ((unsigned)r22) ) goto label$3887$497;
	r54 = NULL;
	goto label$3887$500;
	label$3887$497:
	r7 = r48->array;
	r15 = ((vdynamic**)(r7 + 1))[r12];
	r54 = (hxsl___Linker__ShaderInfos)r15;
	label$3887$500:
	++r12;
	if( r54 == NULL ) hl_null_access();
	r18 = r54->deps;
	if( r18 == NULL ) hl_null_access();
	r15 = haxe_ds_ObjectMap_keys(r18);
	label$3887$505:
	if( r15 == NULL ) hl_null_access();
	r57 = (vclosure*)hl_dyn_getp((vdynamic*)r15,407283053/*hasNext*/,&type$118);
	if( r57 == NULL ) hl_null_access();
	r17 = r57->hasValue ? ((bool (*)(vdynamic*))r57->fun)((vdynamic*)r57->value) : ((bool (*)(void))r57->fun)();
	if( !r17 ) goto label$3887$528;
	r61 = (vclosure*)hl_dyn_getp((vdynamic*)r15,151160317/*next*/,&type$3991);
	if( r61 == NULL ) hl_null_access();
	r55 = r61->hasValue ? ((hxsl___Linker__ShaderInfos (*)(vdynamic*))r61->fun)((vdynamic*)r61->value) : ((hxsl___Linker__ShaderInfos (*)(void))r61->fun)();
	if( r55 == NULL ) hl_null_access();
	r41 = r55->marked;
	if( r41 ) goto label$3887$527;
	r27 = r55->name;
	r39 = (String)global$1559;
	r27 = String___add__(r27,r39);
	if( r54 == NULL ) hl_null_access();
	r39 = r54->name;
	r27 = String___add__(r27,r39);
	r39 = (String)global$1560;
	r27 = String___add__(r27,r39);
	r26 = NULL;
	r58 = hxsl_Linker_error(r0,r27,r26);
	label$3887$527:
	goto label$3887$505;
	label$3887$528:
	if( r54 == NULL ) hl_null_access();
	r17 = true;
	r41 = hl_alloc_dynbool(r17);
	r54->marked = r41;
	goto label$3887$489;
	label$3887$533:
	r8 = &type$146;
	r12 = 0;
	r7 = hl_alloc_array(r8,r12);
	r48 = hl_types_ArrayObj_alloc(r7);
	r5 = (haxe__ds__IntMap)hl_alloc_obj(haxe__ds__IntMap__val);
	haxe_ds_IntMap_new(r5);
	r8 = &type$3978;
	r12 = 1;
	r7 = hl_alloc_array(r8,r12);
	r62 = NULL;
	r12 = 0;
	((vclosure**)(r7 + 1))[r12] = r62;
	r60 = hl_types_ArrayObj_alloc(r7);
	if( r60 == NULL ) hl_null_access();
	r12 = 0;
	r64 = hl_alloc_enum(&type$4000,0);
	((Enum$4000*)r64)->p0 = (hl__types__ArrayObj)r48;
	((Enum$4000*)r64)->p1 = (haxe__ds__IntMap)r5;
	((Enum$4000*)r64)->p2 = (hl__types__ArrayObj)r60;
	r62 = hl_alloc_closure_ptr(&type$3999,fun$3997,r64);
	r20 = r60->length;
	if( ((unsigned)r12) < ((unsigned)r20) ) goto label$3887$556;
	hl_types_ArrayObj___expand(r60,r12);
	label$3887$556:
	r7 = r60->array;
	((vclosure**)(r7 + 1))[r12] = r62;
	r12 = 0;
	if( r21 == NULL ) hl_null_access();
	r63 = hl_types_ArrayObj_concat(r21,r23);
	label$3887$561:
	if( r63 == NULL ) hl_null_access();
	r22 = r63->length;
	if( r12 >= r22 ) goto label$3887$624;
	r22 = r63->length;
	if( ((unsigned)r12) < ((unsigned)r22) ) goto label$3887$569;
	r54 = NULL;
	goto label$3887$572;
	label$3887$569:
	r7 = r63->array;
	r15 = ((vdynamic**)(r7 + 1))[r12];
	r54 = (hxsl___Linker__ShaderInfos)r15;
	label$3887$572:
	++r12;
	if( r54 == NULL ) hl_null_access();
	r66 = r54->read;
	if( r66 == NULL ) hl_null_access();
	r15 = haxe_ds_IntMap_iterator(r66);
	label$3887$577:
	if( r15 == NULL ) hl_null_access();
	r57 = (vclosure*)hl_dyn_getp((vdynamic*)r15,407283053/*hasNext*/,&type$118);
	if( r57 == NULL ) hl_null_access();
	r17 = r57->hasValue ? ((bool (*)(vdynamic*))r57->fun)((vdynamic*)r57->value) : ((bool (*)(void))r57->fun)();
	if( !r17 ) goto label$3887$598;
	r59 = (vclosure*)hl_dyn_getp((vdynamic*)r15,151160317/*next*/,&type$3990);
	if( r59 == NULL ) hl_null_access();
	r25 = r59->hasValue ? ((hxsl___Linker__AllocatedVar (*)(vdynamic*))r59->fun)((vdynamic*)r59->value) : ((hxsl___Linker__AllocatedVar (*)(void))r59->fun)();
	if( r60 == NULL ) hl_null_access();
	r20 = 0;
	r22 = r60->length;
	if( ((unsigned)r20) < ((unsigned)r22) ) goto label$3887$592;
	r62 = NULL;
	goto label$3887$595;
	label$3887$592:
	r7 = r60->array;
	r58 = ((vdynamic**)(r7 + 1))[r20];
	r62 = (vclosure*)r58;
	label$3887$595:
	if( r62 == NULL ) hl_null_access();
	r62->hasValue ? ((void (*)(vdynamic*,hxsl___Linker__AllocatedVar))r62->fun)((vdynamic*)r62->value,r25) : ((void (*)(hxsl___Linker__AllocatedVar))r62->fun)(r25);
	goto label$3887$577;
	label$3887$598:
	if( r54 == NULL ) hl_null_access();
	r66 = r54->write;
	if( r66 == NULL ) hl_null_access();
	r15 = haxe_ds_IntMap_iterator(r66);
	label$3887$602:
	if( r15 == NULL ) hl_null_access();
	r57 = (vclosure*)hl_dyn_getp((vdynamic*)r15,407283053/*hasNext*/,&type$118);
	if( r57 == NULL ) hl_null_access();
	r17 = r57->hasValue ? ((bool (*)(vdynamic*))r57->fun)((vdynamic*)r57->value) : ((bool (*)(void))r57->fun)();
	if( !r17 ) goto label$3887$623;
	r59 = (vclosure*)hl_dyn_getp((vdynamic*)r15,151160317/*next*/,&type$3990);
	if( r59 == NULL ) hl_null_access();
	r25 = r59->hasValue ? ((hxsl___Linker__AllocatedVar (*)(vdynamic*))r59->fun)((vdynamic*)r59->value) : ((hxsl___Linker__AllocatedVar (*)(void))r59->fun)();
	if( r60 == NULL ) hl_null_access();
	r20 = 0;
	r22 = r60->length;
	if( ((unsigned)r20) < ((unsigned)r22) ) goto label$3887$617;
	r62 = NULL;
	goto label$3887$620;
	label$3887$617:
	r7 = r60->array;
	r58 = ((vdynamic**)(r7 + 1))[r20];
	r62 = (vclosure*)r58;
	label$3887$620:
	if( r62 == NULL ) hl_null_access();
	r62->hasValue ? ((void (*)(vdynamic*,hxsl___Linker__AllocatedVar))r62->fun)((vdynamic*)r62->value,r25) : ((void (*)(hxsl___Linker__AllocatedVar))r62->fun)(r25);
	goto label$3887$602;
	label$3887$623:
	goto label$3887$561;
	label$3887$624:
	r8 = &type$4003;
	r12 = 1;
	r7 = hl_alloc_array(r8,r12);
	r67 = NULL;
	r12 = 0;
	((vclosure**)(r7 + 1))[r12] = r67;
	r63 = hl_types_ArrayObj_alloc(r7);
	if( r63 == NULL ) hl_null_access();
	r12 = 0;
	r68 = hl_alloc_enum(&type$4002,0);
	((Enum$4002*)r68)->p0 = (haxe__ds__IntMap)r5;
	((Enum$4002*)r68)->p1 = (hl__types__ArrayObj)r63;
	r67 = hl_alloc_closure_ptr(&type$4001,fun$3998,r68);
	r20 = r63->length;
	if( ((unsigned)r12) < ((unsigned)r20) ) goto label$3887$640;
	hl_types_ArrayObj___expand(r63,r12);
	label$3887$640:
	r7 = r63->array;
	((vclosure**)(r7 + 1))[r12] = r67;
	r12 = 0;
	label$3887$643:
	if( r48 == NULL ) hl_null_access();
	r22 = r48->length;
	if( r12 >= r22 ) goto label$3887$668;
	if( r63 == NULL ) hl_null_access();
	r20 = 0;
	r22 = r63->length;
	if( ((unsigned)r20) < ((unsigned)r22) ) goto label$3887$653;
	r67 = NULL;
	goto label$3887$656;
	label$3887$653:
	r7 = r63->array;
	r15 = ((vdynamic**)(r7 + 1))[r20];
	r67 = (vclosure*)r15;
	label$3887$656:
	if( r67 == NULL ) hl_null_access();
	r20 = r12;
	++r12;
	r22 = r48->length;
	if( ((unsigned)r20) < ((unsigned)r22) ) goto label$3887$663;
	r24 = NULL;
	goto label$3887$666;
	label$3887$663:
	r7 = r48->array;
	r15 = ((vdynamic**)(r7 + 1))[r20];
	r24 = hl_to_virtual(&type$146,(vdynamic*)r15);
	label$3887$666:
	r67->hasValue ? ((void (*)(vdynamic*,vvirtual*))r67->fun)((vdynamic*)r67->value,r24) : ((void (*)(vvirtual*))r67->fun)(r24);
	goto label$3887$643;
	label$3887$668:
	r70 = hl_alloc_enum(&type$4005,0);
	((Enum$4005*)r70)->p0 = (hl__types__ArrayObj)r48;
	((Enum$4005*)r70)->p1 = (hxsl__Linker)r2;
	r69 = hl_alloc_closure_ptr(&type$4004,fun$3999,r70);
	r8 = &type$3863;
	r12 = 2;
	r7 = hl_alloc_array(r8,r12);
	if( r69 == NULL ) hl_null_access();
	r32 = (venum*)global$1368;
	r27 = (String)global$1411;
	r30 = r69->hasValue ? ((vvirtual* (*)(vdynamic*,venum*,String,hl__types__ArrayObj))r69->fun)((vdynamic*)r69->value,r32,r27,r21) : ((vvirtual* (*)(venum*,String,hl__types__ArrayObj))r69->fun)(r32,r27,r21);
	r12 = 0;
	((vvirtual**)(r7 + 1))[r12] = r30;
	r32 = (venum*)global$1370;
	r27 = (String)global$1412;
	r30 = r69->hasValue ? ((vvirtual* (*)(vdynamic*,venum*,String,hl__types__ArrayObj))r69->fun)((vdynamic*)r69->value,r32,r27,r23) : ((vvirtual* (*)(venum*,String,hl__types__ArrayObj))r69->fun)(r32,r27,r23);
	r12 = 1;
	((vvirtual**)(r7 + 1))[r12] = r30;
	r65 = hl_types_ArrayObj_alloc(r7);
	if( r10 == NULL ) hl_null_access();
	r15 = haxe_ds_ObjectMap_keys(r10);
	label$3887$689:
	if( r15 == NULL ) hl_null_access();
	r57 = (vclosure*)hl_dyn_getp((vdynamic*)r15,407283053/*hasNext*/,&type$118);
	if( r57 == NULL ) hl_null_access();
	r17 = r57->hasValue ? ((bool (*)(vdynamic*))r57->fun)((vdynamic*)r57->value) : ((bool (*)(void))r57->fun)();
	if( !r17 ) goto label$3887$742;
	r71 = (vclosure*)hl_dyn_getp((vdynamic*)r15,151160317/*next*/,&type$4008);
	if( r71 == NULL ) hl_null_access();
	r14 = r71->hasValue ? ((vvirtual* (*)(vdynamic*))r71->fun)((vdynamic*)r71->value) : ((vvirtual* (*)(void))r71->fun)();
	if( r10 == NULL ) hl_null_access();
	r58 = haxe_ds_ObjectMap_get(r10,((vdynamic*)r14));
	r16 = hl_to_virtual(&type$144,(vdynamic*)r58);
	if( r14 != r16 && (!r14 || !r16 || !r14->value || !r16->value || r14->value != r16->value) ) goto label$3887$703;
	goto label$3887$689;
	label$3887$703:
	r12 = 0;
	if( r14 == NULL ) hl_null_access();
	r72 = hl_vfields(r14)[2] ? (*(hl__types__ArrayObj*)(hl_vfields(r14)[2])) : (hl__types__ArrayObj)hl_dyn_getp(r14->value,239676598/*vars*/,&type$46);
	if( r72 == NULL ) hl_null_access();
	r20 = r72->length;
	label$3887$708:
	if( r12 >= r20 ) goto label$3887$741;
	r22 = r12;
	++r12;
	if( r14 == NULL ) hl_null_access();
	r72 = hl_vfields(r14)[2] ? (*(hl__types__ArrayObj*)(hl_vfields(r14)[2])) : (hl__types__ArrayObj)hl_dyn_getp(r14->value,239676598/*vars*/,&type$46);
	if( r72 == NULL ) hl_null_access();
	r46 = r72->length;
	if( ((unsigned)r22) < ((unsigned)r46) ) goto label$3887$719;
	r24 = NULL;
	goto label$3887$722;
	label$3887$719:
	r7 = r72->array;
	r58 = ((vdynamic**)(r7 + 1))[r22];
	r24 = hl_to_virtual(&type$146,(vdynamic*)r58);
	label$3887$722:
	r26 = NULL;
	r27 = NULL;
	r25 = NULL;
	r25 = hxsl_Linker_allocVar(r0,r24,r26,r27,r25);
	if( r25 == NULL ) hl_null_access();
	r72 = r25->merged;
	if( r72 == NULL ) hl_null_access();
	if( r16 == NULL ) hl_null_access();
	r73 = hl_vfields(r16)[2] ? (*(hl__types__ArrayObj*)(hl_vfields(r16)[2])) : (hl__types__ArrayObj)hl_dyn_getp(r16->value,239676598/*vars*/,&type$46);
	if( r73 == NULL ) hl_null_access();
	r46 = r73->length;
	if( ((unsigned)r22) < ((unsigned)r46) ) goto label$3887$736;
	r24 = NULL;
	goto label$3887$739;
	label$3887$736:
	r7 = r73->array;
	r58 = ((vdynamic**)(r7 + 1))[r22];
	r24 = hl_to_virtual(&type$146,(vdynamic*)r58);
	label$3887$739:
	hl_types_ArrayObj_unshift(r72,((vdynamic*)r24));
	goto label$3887$708;
	label$3887$741:
	goto label$3887$689;
	label$3887$742:
	r14 = hl_alloc_virtual(&type$144);
	r27 = (String)global$1561;
	if( hl_vfields(r14)[1] ) *(String*)(hl_vfields(r14)[1]) = (String)r27; else hl_dyn_setp(r14->value,150958933/*name*/,&type$13,r27);
	if( hl_vfields(r14)[2] ) *(hl__types__ArrayObj*)(hl_vfields(r14)[2]) = (hl__types__ArrayObj)r48; else hl_dyn_setp(r14->value,239676598/*vars*/,&type$46,r48);
	if( hl_vfields(r14)[0] ) *(hl__types__ArrayObj*)(hl_vfields(r14)[0]) = (hl__types__ArrayObj)r65; else hl_dyn_setp(r14->value,63237214/*funs*/,&type$46,r65);
	return r14;
}

void hxsl_Linker_new(hxsl__Linker r0) {
	int r1;
	r1 = 0;
	r0->debugDepth = r1;
	return;
}

