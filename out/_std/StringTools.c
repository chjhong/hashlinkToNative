// Generated by HLC 4.0.0 (HL v4)
#include <hl/code.h>

String StringTools_quoteWinArg(String r0,bool r1) {
	String r5, r6;
	bool r3;
	EReg r4;
	hl__types__ArrayBytes_Int r16;
	$StringTools r17;
	StringBuf r7, r11, r15;
	vdynamic *r9, *r14;
	int r8, r10, r12, r13;
	r4 = (EReg)hl_alloc_obj(EReg__val);
	r5 = (String)global$191;
	r6 = (String)global$8;
	EReg_new(r4,r5,r6);
	r3 = EReg_match(r4,r0);
	if( r3 ) goto label$1977$98;
	r7 = (StringBuf)hl_alloc_obj(StringBuf__val);
	StringBuf_new(r7);
	if( r0 == NULL ) hl_null_access();
	r6 = (String)global$192;
	r9 = NULL;
	r8 = String_indexOf(r0,r6,r9);
	r10 = -1;
	if( r8 != r10 ) goto label$1977$23;
	r6 = (String)global$193;
	r9 = NULL;
	r8 = String_indexOf(r0,r6,r9);
	r10 = -1;
	if( r8 != r10 ) goto label$1977$23;
	r6 = (String)global$8;
	if( r0 == r6 || (r0 && r6 && String___compare(r0,(vdynamic*)r6) == 0) ) goto label$1977$23;
	r3 = false;
	goto label$1977$24;
	label$1977$23:
	r3 = true;
	label$1977$24:
	if( !r3 ) goto label$1977$27;
	r5 = (String)global$194;
	StringBuf_add(r7,((vdynamic*)r5));
	label$1977$27:
	r11 = (StringBuf)hl_alloc_obj(StringBuf__val);
	StringBuf_new(r11);
	r8 = 0;
	r10 = r0->length;
	label$1977$31:
	if( r8 >= r10 ) goto label$1977$87;
	if( r0 == NULL ) hl_null_access();
	r12 = r8;
	++r8;
	r9 = String_charCodeAt(r0,r12);
	if( r9 ) goto label$1977$54;
	if( r11 == NULL ) hl_null_access();
	r12 = r11->pos;
	r13 = 1;
	r12 = r12 >> r13;
	r13 = 0;
	if( r13 >= r12 ) goto label$1977$50;
	if( r7 == NULL ) hl_null_access();
	r5 = StringBuf_toString(r11);
	StringBuf_add(r7,((vdynamic*)r5));
	r15 = (StringBuf)hl_alloc_obj(StringBuf__val);
	StringBuf_new(r15);
	r11 = r15;
	label$1977$50:
	if( r7 == NULL ) hl_null_access();
	r12 = r9 ? r9->v.i : 0;
	StringBuf_addChar(r7,r12);
	goto label$1977$86;
	label$1977$54:
	r12 = r9 ? r9->v.i : 0;
	switch(r12) {
		default:
		case 0:
		case 1:
		case 2:
		case 3:
		case 4:
		case 5:
		case 6:
		case 7:
		case 8:
		case 9:
		case 10:
		case 11:
		case 12:
		case 13:
		case 14:
		case 15:
		case 16:
		case 17:
		case 18:
		case 19:
		case 20:
		case 21:
		case 22:
		case 23:
		case 24:
		case 25:
		case 26:
		case 27:
		case 28:
		case 29:
		case 30:
		case 31:
		case 32:
		case 33:
		case 35:
		case 36:
		case 37:
		case 38:
		case 39:
		case 40:
		case 41:
		case 42:
		case 43:
		case 44:
		case 45:
		case 46:
		case 47:
		case 48:
		case 49:
		case 50:
		case 51:
		case 52:
		case 53:
		case 54:
		case 55:
		case 56:
		case 57:
		case 58:
		case 59:
		case 60:
		case 61:
		case 62:
		case 63:
		case 64:
		case 65:
		case 66:
		case 67:
		case 68:
		case 69:
		case 70:
		case 71:
		case 72:
		case 73:
		case 74:
		case 75:
		case 76:
		case 77:
		case 78:
		case 79:
		case 80:
		case 81:
		case 82:
		case 83:
		case 84:
		case 85:
		case 86:
		case 87:
		case 88:
		case 89:
		case 90:
		case 91:
			if( r11 == NULL ) hl_null_access();
			r12 = r11->pos;
			r13 = 1;
			r12 = r12 >> r13;
			r13 = 0;
			if( r13 >= r12 ) goto label$1977$68;
			if( r7 == NULL ) hl_null_access();
			r5 = StringBuf_toString(r11);
			StringBuf_add(r7,((vdynamic*)r5));
			r15 = (StringBuf)hl_alloc_obj(StringBuf__val);
			StringBuf_new(r15);
			r11 = r15;
			label$1977$68:
			if( r7 == NULL ) hl_null_access();
			r12 = r9 ? r9->v.i : 0;
			StringBuf_addChar(r7,r12);
			goto label$1977$86;
		case 34:
			if( r11 == NULL ) hl_null_access();
			r5 = StringBuf_toString(r11);
			if( r7 == NULL ) hl_null_access();
			StringBuf_add(r7,((vdynamic*)r5));
			StringBuf_add(r7,((vdynamic*)r5));
			r15 = (StringBuf)hl_alloc_obj(StringBuf__val);
			StringBuf_new(r15);
			r11 = r15;
			r6 = (String)global$195;
			StringBuf_add(r7,((vdynamic*)r6));
			goto label$1977$86;
		case 92:
			if( r11 == NULL ) hl_null_access();
			r5 = (String)global$196;
			StringBuf_add(r11,((vdynamic*)r5));
	}
	label$1977$86:
	goto label$1977$31;
	label$1977$87:
	if( r7 == NULL ) hl_null_access();
	if( r11 == NULL ) hl_null_access();
	r5 = StringBuf_toString(r11);
	StringBuf_add(r7,((vdynamic*)r5));
	if( !r3 ) goto label$1977$96;
	r5 = StringBuf_toString(r11);
	StringBuf_add(r7,((vdynamic*)r5));
	r5 = (String)global$194;
	StringBuf_add(r7,((vdynamic*)r5));
	label$1977$96:
	r5 = StringBuf_toString(r7);
	r0 = r5;
	label$1977$98:
	if( !r1 ) goto label$1977$128;
	r7 = (StringBuf)hl_alloc_obj(StringBuf__val);
	StringBuf_new(r7);
	r8 = 0;
	if( r0 == NULL ) hl_null_access();
	r10 = r0->length;
	label$1977$104:
	if( r8 >= r10 ) goto label$1977$125;
	if( r0 == NULL ) hl_null_access();
	r12 = r8;
	++r8;
	r9 = String_charCodeAt(r0,r12);
	r17 = ($StringTools)global$197;
	r16 = r17->winMetaCharacters;
	if( r16 == NULL ) hl_null_access();
	r12 = r9 ? r9->v.i : 0;
	r14 = NULL;
	r12 = hl_types_ArrayBytes_Int_indexOf(r16,r12,r14);
	r13 = 0;
	if( r12 < r13 ) goto label$1977$121;
	if( r7 == NULL ) hl_null_access();
	r12 = 94;
	StringBuf_addChar(r7,r12);
	label$1977$121:
	if( r7 == NULL ) hl_null_access();
	r12 = r9 ? r9->v.i : 0;
	StringBuf_addChar(r7,r12);
	goto label$1977$104;
	label$1977$125:
	if( r7 == NULL ) hl_null_access();
	r5 = StringBuf_toString(r7);
	return r5;
	label$1977$128:
	return r0;
}

String StringTools_quoteUnixArg(String r0) {
	String r2, r3, r6, r7;
	bool r4;
	EReg r5;
	r3 = (String)global$8;
	if( r0 != r3 && (!r0 || !r3 || String___compare(r0,(vdynamic*)r3) != 0) ) goto label$1976$4;
	r2 = (String)global$187;
	return r2;
	label$1976$4:
	r5 = (EReg)hl_alloc_obj(EReg__val);
	r2 = (String)global$188;
	r3 = (String)global$8;
	EReg_new(r5,r2,r3);
	r4 = EReg_match(r5,r0);
	if( r4 ) goto label$1976$11;
	return r0;
	label$1976$11:
	r2 = (String)global$189;
	r6 = (String)global$189;
	r7 = (String)global$190;
	r3 = StringTools_replace(r0,r6,r7);
	r2 = String___add__(r2,r3);
	r3 = (String)global$189;
	r2 = String___add__(r2,r3);
	return r2;
}

String StringTools_hex(int r0,vdynamic* r1) {
	String r2, r4;
	bool r3;
	int r5, r6;
	r2 = (String)global$8;
	label$1975$1:
	r3 = true;
	if( !r3 ) goto label$1975$18;
	r4 = (String)global$185;
	if( r4 == NULL ) hl_null_access();
	r6 = 15;
	r5 = r0 & r6;
	r4 = String_charAt(r4,r5);
	r4 = String___add__(r4,r2);
	r2 = r4;
	r6 = 4;
	r5 = ((unsigned)r0) >> r6;
	r0 = r5;
	r6 = 0;
	if( r6 < r5 ) goto label$1975$17;
	goto label$1975$18;
	label$1975$17:
	goto label$1975$1;
	label$1975$18:
	if( !r1 ) goto label$1975$28;
	label$1975$19:
	if( r2 == NULL ) hl_null_access();
	r5 = r2->length;
	r6 = r1 ? r1->v.i : 0;
	if( r5 >= r6 ) goto label$1975$28;
	r4 = (String)global$186;
	r4 = String___add__(r4,r2);
	r2 = r4;
	goto label$1975$19;
	label$1975$28:
	return r2;
}

String StringTools_replace(String r0,String r1,String r2) {
	String r3;
	hl__types__ArrayObj r4;
	if( r0 == NULL ) hl_null_access();
	r4 = String_split(r0,r1);
	if( r4 == NULL ) hl_null_access();
	r3 = hl_types_ArrayObj_join(r4,r2);
	return r3;
}

String StringTools_lpad(String r0,String r1,int r2) {
	String r5;
	StringBuf r7;
	int r4, r6;
	if( r1 == NULL ) hl_null_access();
	r4 = r1->length;
	r6 = 0;
	if( r6 < r4 ) goto label$1973$5;
	return r0;
	label$1973$5:
	r7 = (StringBuf)hl_alloc_obj(StringBuf__val);
	StringBuf_new(r7);
	if( r0 == NULL ) hl_null_access();
	r6 = r0->length;
	r4 = r2 - r6;
	r2 = r4;
	label$1973$11:
	if( r7 == NULL ) hl_null_access();
	r4 = r7->pos;
	r6 = 1;
	r4 = r4 >> r6;
	if( r4 >= r2 ) goto label$1973$19;
	StringBuf_add(r7,((vdynamic*)r1));
	goto label$1973$11;
	label$1973$19:
	StringBuf_add(r7,((vdynamic*)r0));
	r5 = StringBuf_toString(r7);
	return r5;
}

String StringTools_trim(String r0) {
	String r1;
	r1 = StringTools_rtrim(r0);
	r1 = StringTools_ltrim(r1);
	return r1;
}

String StringTools_rtrim(String r0) {
	String r2;
	bool r6;
	vdynamic *r7;
	int r1, r3, r4, r5;
	if( r0 == NULL ) hl_null_access();
	r1 = r0->length;
	r3 = 0;
	label$1971$3:
	if( r3 >= r1 ) goto label$1971$12;
	r4 = r1 - r3;
	r5 = 1;
	r4 = r4 - r5;
	r6 = StringTools_isSpace(r0,r4);
	if( !r6 ) goto label$1971$12;
	++r3;
	goto label$1971$3;
	label$1971$12:
	r5 = 0;
	if( r5 >= r3 ) goto label$1971$20;
	if( r0 == NULL ) hl_null_access();
	r4 = 0;
	r5 = r1 - r3;
	r7 = hl_alloc_dynamic(&type$3);
	r7->v.i = r5;
	r2 = String_substr(r0,r4,r7);
	return r2;
	label$1971$20:
	return r0;
}

String StringTools_ltrim(String r0) {
	String r2;
	bool r5;
	vdynamic *r6;
	int r1, r3, r4;
	if( r0 == NULL ) hl_null_access();
	r1 = r0->length;
	r3 = 0;
	label$1970$3:
	if( r3 >= r1 ) goto label$1970$9;
	r5 = StringTools_isSpace(r0,r3);
	if( !r5 ) goto label$1970$9;
	++r3;
	goto label$1970$3;
	label$1970$9:
	r4 = 0;
	if( r4 >= r3 ) goto label$1970$16;
	if( r0 == NULL ) hl_null_access();
	r4 = r1 - r3;
	r6 = hl_alloc_dynamic(&type$3);
	r6->v.i = r4;
	r2 = String_substr(r0,r3,r6);
	return r2;
	label$1970$16:
	return r0;
}

bool StringTools_isSpace(String r0,int r1) {
	bool r5;
	vdynamic *r2, *r6;
	int r3, r4;
	if( r0 == NULL ) hl_null_access();
	r2 = String_charCodeAt(r0,r1);
	r3 = r2 ? r2->v.i : 0;
	r4 = 8;
	if( r4 >= r3 ) goto label$1969$8;
	r3 = r2 ? r2->v.i : 0;
	r4 = 14;
	if( r3 < r4 ) goto label$1969$15;
	label$1969$8:
	r3 = 32;
	r6 = hl_alloc_dynamic(&type$3);
	r6->v.i = r3;
	if( r2 == r6 || (r2 && r6 && (r2->v.i == r6->v.i)) ) goto label$1969$13;
	r5 = false;
	goto label$1969$14;
	label$1969$13:
	r5 = true;
	label$1969$14:
	return r5;
	label$1969$15:
	r5 = true;
	return r5;
}

bool StringTools_endsWith(String r0,String r1) {
	bool r6;
	vbyte *r7, *r8;
	int r2, r3, r4, r5, r9, r10;
	if( r1 == NULL ) hl_null_access();
	r2 = r1->length;
	if( r0 == NULL ) hl_null_access();
	r3 = r0->length;
	if( r3 < r2 ) goto label$1968$20;
	r7 = r0->bytes;
	r4 = r3 - r2;
	r5 = 1;
	r4 = r4 << r5;
	r8 = r1->bytes;
	r5 = 0;
	r10 = 1;
	r9 = r2 << r10;
	r4 = hl_bytes_compare(r7,r4,r8,r5,r9);
	r5 = 0;
	if( r4 == r5 ) goto label$1968$18;
	r6 = false;
	goto label$1968$19;
	label$1968$18:
	r6 = true;
	label$1968$19:
	return r6;
	label$1968$20:
	r6 = false;
	return r6;
}

bool StringTools_startsWith(String r0,String r1) {
	bool r4;
	vbyte *r5, *r6;
	int r2, r3, r7, r8;
	if( r0 == NULL ) hl_null_access();
	r2 = r0->length;
	if( r1 == NULL ) hl_null_access();
	r3 = r1->length;
	if( r2 < r3 ) goto label$1967$19;
	r5 = r0->bytes;
	r2 = 0;
	r6 = r1->bytes;
	r3 = 0;
	r7 = r1->length;
	r8 = 1;
	r7 = r7 << r8;
	r2 = hl_bytes_compare(r5,r2,r6,r3,r7);
	r3 = 0;
	if( r2 == r3 ) goto label$1967$17;
	r4 = false;
	goto label$1967$18;
	label$1967$17:
	r4 = true;
	label$1967$18:
	return r4;
	label$1967$19:
	r4 = false;
	return r4;
}

String StringTools_htmlEscape(String r0,vdynamic* r1) {
	String r5, r8;
	bool r15;
	StringBuf r2;
	vbyte *r9, *r10;
	int r4, r6, r7, r11, r12, r13, r14;
	r2 = (StringBuf)hl_alloc_obj(StringBuf__val);
	StringBuf_new(r2);
	r4 = 0;
	r5 = r0;
	label$1966$4:
	if( r5 == NULL ) hl_null_access();
	r7 = r5->length;
	if( r4 >= r7 ) goto label$1966$66;
	r6 = r4;
	++r4;
	r9 = r5->bytes;
	r11 = 1;
	r7 = r6 << r11;
	r7 = *(unsigned short*)(r9 + r7);
	r12 = 55296;
	if( r7 < r12 ) goto label$1966$32;
	r12 = 56319;
	if( r7 >= r12 ) goto label$1966$32;
	r11 = r4;
	++r4;
	r10 = r5->bytes;
	r13 = 55232;
	r12 = r7 - r13;
	r13 = 10;
	r12 = r12 << r13;
	r14 = 1;
	r13 = r11 << r14;
	r13 = *(unsigned short*)(r10 + r13);
	r14 = 1023;
	r13 = r13 & r14;
	r12 = r12 | r13;
	r7 = r12;
	label$1966$32:
	switch(r7) {
		default:
		case 0:
		case 1:
		case 2:
		case 3:
		case 4:
		case 5:
		case 6:
		case 7:
		case 8:
		case 9:
		case 10:
		case 11:
		case 12:
		case 13:
		case 14:
		case 15:
		case 16:
		case 17:
		case 18:
		case 19:
		case 20:
		case 21:
		case 22:
		case 23:
		case 24:
		case 25:
		case 26:
		case 27:
		case 28:
		case 29:
		case 30:
		case 31:
		case 32:
		case 33:
		case 35:
		case 36:
		case 37:
		case 40:
		case 41:
		case 42:
		case 43:
		case 44:
		case 45:
		case 46:
		case 47:
		case 48:
		case 49:
		case 50:
		case 51:
		case 52:
		case 53:
		case 54:
		case 55:
		case 56:
		case 57:
		case 58:
		case 59:
		case 61:
			if( r2 == NULL ) hl_null_access();
			StringBuf_addChar(r2,r7);
			goto label$1966$65;
		case 34:
			r15 = r1 ? r1->v.b : 0;
			if( !r15 ) goto label$1966$42;
			if( r2 == NULL ) hl_null_access();
			r8 = (String)global$180;
			StringBuf_add(r2,((vdynamic*)r8));
			goto label$1966$44;
			label$1966$42:
			if( r2 == NULL ) hl_null_access();
			StringBuf_addChar(r2,r7);
			label$1966$44:
			goto label$1966$65;
		case 38:
			if( r2 == NULL ) hl_null_access();
			r8 = (String)global$181;
			StringBuf_add(r2,((vdynamic*)r8));
			goto label$1966$65;
		case 39:
			r15 = r1 ? r1->v.b : 0;
			if( !r15 ) goto label$1966$55;
			if( r2 == NULL ) hl_null_access();
			r8 = (String)global$182;
			StringBuf_add(r2,((vdynamic*)r8));
			goto label$1966$57;
			label$1966$55:
			if( r2 == NULL ) hl_null_access();
			StringBuf_addChar(r2,r7);
			label$1966$57:
			goto label$1966$65;
		case 60:
			if( r2 == NULL ) hl_null_access();
			r8 = (String)global$183;
			StringBuf_add(r2,((vdynamic*)r8));
			goto label$1966$65;
		case 62:
			if( r2 == NULL ) hl_null_access();
			r8 = (String)global$184;
			StringBuf_add(r2,((vdynamic*)r8));
	}
	label$1966$65:
	goto label$1966$4;
	label$1966$66:
	if( r2 == NULL ) hl_null_access();
	r5 = StringBuf_toString(r2);
	return r5;
}

