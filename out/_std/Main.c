// Generated by HLC 4.0.0 (HL v4)
#include <hl/code.h>

void Main_init(Main r0) {
	String r9;
	hl__types__ArrayObj r12;
	hxd__res__Resource r7;
	bool r25;
	h2d__Object r3;
	h2d__Tile r6, r13;
	$Math r27;
	h2d__Font r2;
	h2d__Text r1;
	hxd__res__Loader r8;
	hxd__res__$Image r10;
	h2d__Bitmap r24;
	double r21, r22, r23, r26, r28, r29;
	hxd__res__Image r11;
	h2d__Scene r5;
	int r14, r15, r16, r17, r18, r19, r20;
	r1 = (h2d__Text)hl_alloc_obj(h2d__Text__val);
	r2 = hxd_res_DefaultFont_get();
	r3 = NULL;
	h2d_Text_new(r1,r2,r3);
	r0->tf = r1;
	r5 = r0->s2d;
	if( r5 == NULL ) hl_null_access();
	r1 = r0->tf;
	h2d_Layers_addChild(((h2d__Layers)r5),((h2d__Object)r1));
	r8 = hxd_Res_get_loader();
	if( r8 == NULL ) hl_null_access();
	r9 = (String)global$166;
	r10 = (hxd__res__$Image)global$167;
	r7 = hxd_res_Loader_loadCache(r8,r9,((hl__Class)r10));
	r11 = (hxd__res__Image)r7;
	if( r11 == NULL ) hl_null_access();
	r6 = hxd_res_Image_toTile(r11);
	r12 = (hl__types__ArrayObj)hl_alloc_obj(hl__types__ArrayObj__val);
	hl_types_ArrayObj_new(r12);
	r0->bmps = r12;
	if( r6 == NULL ) hl_null_access();
	r13 = h2d_Tile_center(r6);
	r6 = r13;
	r14 = r0->amount_X;
	r15 = r0->amount_Y;
	r14 = r14 * r15;
	r15 = 0;
	r16 = 0;
	r17 = r0->amount_X;
	label$1786$29:
	if( r16 >= r17 ) goto label$1786$141;
	++r16;
	r18 = 0;
	r19 = r0->amount_Y;
	label$1786$34:
	if( r18 >= r19 ) goto label$1786$140;
	++r18;
	++r15;
	r21 = (double)r15;
	r22 = (double)r14;
	r21 = r21 / r22;
	r23 = (double)r14;
	if( !(r23 < r21) ) goto label$1786$45;
	r20 = 0;
	r15 = r20;
	label$1786$45:
	r24 = (h2d__Bitmap)hl_alloc_obj(h2d__Bitmap__val);
	r5 = r0->s2d;
	h2d_Bitmap_new(r24,r6,((h2d__Object)r5));
	r0->bmp = r24;
	r24 = r0->bmp;
	if( r24 == NULL ) hl_null_access();
	r25 = true;
	r24->posChanged = r25;
	r22 = r24->scaleX;
	r23 = 0.20000000000000001;
	r22 = r22 * r23;
	r24->scaleX = r22;
	r25 = true;
	r24->posChanged = r25;
	r22 = r24->scaleY;
	r23 = 0.20000000000000001;
	r22 = r22 * r23;
	r24->scaleY = r22;
	r24 = r0->bmp;
	r5 = r0->s2d;
	if( r5 == NULL ) hl_null_access();
	r20 = r5->width;
	r22 = (double)r20;
	r20 = 2;
	r23 = (double)r20;
	r22 = r22 / r23;
	r27 = ($Math)global$168;
	r26 = r27->PI;
	r23 = r21 * r26;
	r20 = 2;
	r26 = (double)r20;
	r23 = r23 * r26;
	r23 = hl_math_cos(r23);
	r5 = r0->s2d;
	if( r5 == NULL ) hl_null_access();
	r20 = r5->width;
	r26 = (double)r20;
	r20 = 2;
	r28 = (double)r20;
	r26 = r26 / r28;
	r5 = r0->s2d;
	if( r5 == NULL ) hl_null_access();
	r20 = r5->height;
	r28 = (double)r20;
	r20 = 2;
	r29 = (double)r20;
	r28 = r28 / r29;
	r26 = Math_min(r26,r28);
	r23 = r23 * r26;
	r22 = r22 + r23;
	if( r24 == NULL ) hl_null_access();
	r25 = true;
	r24->posChanged = r25;
	r24->x = r22;
	r24 = r0->bmp;
	r5 = r0->s2d;
	if( r5 == NULL ) hl_null_access();
	r20 = r5->height;
	r22 = (double)r20;
	r20 = 2;
	r23 = (double)r20;
	r22 = r22 / r23;
	r27 = ($Math)global$168;
	r26 = r27->PI;
	r23 = r21 * r26;
	r20 = 2;
	r26 = (double)r20;
	r23 = r23 * r26;
	r23 = hl_math_sin(r23);
	r5 = r0->s2d;
	if( r5 == NULL ) hl_null_access();
	r20 = r5->width;
	r26 = (double)r20;
	r20 = 2;
	r28 = (double)r20;
	r26 = r26 / r28;
	r5 = r0->s2d;
	if( r5 == NULL ) hl_null_access();
	r20 = r5->height;
	r28 = (double)r20;
	r20 = 2;
	r29 = (double)r20;
	r28 = r28 / r29;
	r26 = Math_min(r26,r28);
	r23 = r23 * r26;
	r22 = r22 + r23;
	if( r24 == NULL ) hl_null_access();
	r25 = true;
	r24->posChanged = r25;
	r24->y = r22;
	r12 = r0->bmps;
	if( r12 == NULL ) hl_null_access();
	r24 = r0->bmp;
	r20 = hl_types_ArrayObj_push(r12,((vdynamic*)r24));
	goto label$1786$34;
	label$1786$140:
	goto label$1786$29;
	label$1786$141:
	return;
}

void Main_update(Main r0,double r1) {
	String r12, r14;
	vvirtual *r13, *r15;
	hl__types__ArrayObj r4;
	bool r16;
	haxe__$Log r11;
	h2d__Text r19;
	double r17, r18;
	vclosure *r10;
	h2d__Bitmap r7;
	int *r20;
	vdynamic *r8;
	vbyte *r21;
	varray *r9;
	int r2, r5, r6;
	r2 = 0;
	r4 = r0->bmps;
	label$1787$2:
	if( r4 == NULL ) hl_null_access();
	r6 = r4->length;
	if( r2 >= r6 ) goto label$1787$40;
	r6 = r4->length;
	if( ((unsigned)r2) < ((unsigned)r6) ) goto label$1787$10;
	r7 = NULL;
	goto label$1787$13;
	label$1787$10:
	r9 = r4->array;
	r8 = ((vdynamic**)(r9 + 1))[r2];
	r7 = (h2d__Bitmap)r8;
	label$1787$13:
	++r2;
	if( r7 ) goto label$1787$30;
	r11 = (haxe__$Log)global$147;
	r10 = r11->trace;
	if( r10 == NULL ) hl_null_access();
	r12 = (String)global$169;
	r13 = hl_alloc_virtual(&type$1345);
	r14 = (String)global$149;
	if( hl_vfields(r13)[1] ) *(String*)(hl_vfields(r13)[1]) = (String)r14; else hl_dyn_setp(r13->value,37969014/*fileName*/,&type$13,r14);
	r5 = 48;
	if( hl_vfields(r13)[2] ) *(int*)(hl_vfields(r13)[2]) = (int)r5; else hl_dyn_seti(r13->value,371360620/*lineNumber*/,&type$3,r5);
	r14 = (String)global$150;
	if( hl_vfields(r13)[0] ) *(String*)(hl_vfields(r13)[0]) = (String)r14; else hl_dyn_setp(r13->value,-63073762/*className*/,&type$13,r14);
	r14 = (String)global$170;
	if( hl_vfields(r13)[3] ) *(String*)(hl_vfields(r13)[3]) = (String)r14; else hl_dyn_setp(r13->value,302979532/*methodName*/,&type$13,r14);
	r15 = hl_to_virtual(&type$320,(vdynamic*)r13);
	r10->hasValue ? ((void (*)(vdynamic*,vdynamic*,vvirtual*))r10->fun)((vdynamic*)r10->value,((vdynamic*)r12),r15) : ((void (*)(vdynamic*,vvirtual*))r10->fun)(((vdynamic*)r12),r15);
	label$1787$30:
	if( !r7 ) goto label$1787$39;
	if( r7 == NULL ) hl_null_access();
	r16 = true;
	r7->posChanged = r16;
	r17 = r7->rotation;
	r18 = 0.59999999999999998;
	r18 = r18 * r1;
	r17 = r17 + r18;
	r7->rotation = r17;
	label$1787$39:
	goto label$1787$2;
	label$1787$40:
	r19 = r0->tf;
	if( r19 == NULL ) hl_null_access();
	r12 = (String)global$171;
	r17 = hxd_Timer_fps();
	r20 = &r2;
	r21 = hl_ftos(r17,r20);
	r14 = String___alloc__(r21,r2);
	r12 = String___add__(r12,r14);
	r12 = h2d_Text_set_text(r19,r12);
	return;
}

void Main_new(Main r0) {
	int r1;
	r1 = 20;
	r0->amount_Y = r1;
	r1 = 50;
	r0->amount_X = r1;
	hxd_App_new(((hxd__App)r0));
	return;
}

void Main_main() {
	String r3, r5;
	vvirtual *r4, *r8, *r11;
	Main r12;
	haxe__$Log r2;
	hxd__res__Loader r9;
	hxd__fs__EmbedFileSystem r10;
	vclosure *r1;
	vdynamic *r7;
	int r6;
	r2 = (haxe__$Log)global$147;
	r1 = r2->trace;
	if( r1 == NULL ) hl_null_access();
	r3 = (String)global$148;
	r4 = hl_alloc_virtual(&type$1345);
	r5 = (String)global$149;
	if( hl_vfields(r4)[1] ) *(String*)(hl_vfields(r4)[1]) = (String)r5; else hl_dyn_setp(r4->value,37969014/*fileName*/,&type$13,r5);
	r6 = 58;
	if( hl_vfields(r4)[2] ) *(int*)(hl_vfields(r4)[2]) = (int)r6; else hl_dyn_seti(r4->value,371360620/*lineNumber*/,&type$3,r6);
	r5 = (String)global$150;
	if( hl_vfields(r4)[0] ) *(String*)(hl_vfields(r4)[0]) = (String)r5; else hl_dyn_setp(r4->value,-63073762/*className*/,&type$13,r5);
	r5 = (String)global$151;
	if( hl_vfields(r4)[3] ) *(String*)(hl_vfields(r4)[3]) = (String)r5; else hl_dyn_setp(r4->value,302979532/*methodName*/,&type$13,r5);
	r8 = hl_to_virtual(&type$320,(vdynamic*)r4);
	r1->hasValue ? ((void (*)(vdynamic*,vdynamic*,vvirtual*))r1->fun)((vdynamic*)r1->value,((vdynamic*)r3),r8) : ((void (*)(vdynamic*,vvirtual*))r1->fun)(((vdynamic*)r3),r8);
	r9 = (hxd__res__Loader)hl_alloc_obj(hxd__res__Loader__val);
	r10 = (hxd__fs__EmbedFileSystem)hl_alloc_obj(hxd__fs__EmbedFileSystem__val);
	r3 = (String)global$154;
	r7 = haxe_Unserializer_run(r3);
	hxd_fs_EmbedFileSystem_new(r10,r7);
	if( r10 ) goto label$1764$23;
	r11 = NULL;
	goto label$1764$27;
	label$1764$23:
	r11 = r10->$_f1;
	if( r11 ) goto label$1764$27;
	r11 = hl_to_virtual(&type$325,(vdynamic*)r10);
	r10->$_f1 = r11;
	label$1764$27:
	hxd_res_Loader_new(r9,r11);
	r9 = hxd_Res_set_loader(r9);
	r12 = (Main)hl_alloc_obj(Main__val);
	Main_new(r12);
	return;
}

