// Generated by HLC 4.0.0 (HL v4)
#include <hl/code.h>

hl__types__ArrayObj sys_FileSystem_readDirectory(String r0) {
	String r3;
	hl__types__ArrayObj r7;
	SysError r6;
	hl_type *r8;
	int r9, r10, r11;
	vbyte *r2;
	varray *r1, *r5;
	r2 = Sys_getPath(r0);
	r1 = hl_sys_read_dir(r2);
	if( r1 ) goto label$2009$8;
	r6 = (SysError)hl_alloc_obj(SysError__val);
	r3 = (String)global$203;
	r3 = String___add__(r3,r0);
	SysError_new(r6,r3);
	hl_throw((vdynamic*)r6);
	label$2009$8:
	r8 = &type$13;
	r9 = 0;
	r5 = hl_alloc_array(r8,r9);
	r7 = hl_types_ArrayObj_alloc(r5);
	r9 = 0;
	label$2009$13:
	r11 = r1->size;
	if( r9 >= r11 ) goto label$2009$23;
	if( r7 == NULL ) hl_null_access();
	r10 = r9;
	++r9;
	r2 = ((vbyte**)(r1 + 1))[r10];
	r3 = Sys_makePath(r2);
	r10 = hl_types_ArrayObj_push(r7,((vdynamic*)r3));
	goto label$2009$13;
	label$2009$23:
	return r7;
}

void sys_FileSystem_deleteFile(String r0) {
	String r4;
	SysError r5;
	bool r2;
	vbyte *r3;
	r3 = Sys_getPath(r0);
	r2 = hl_sys_delete(r3);
	if( r2 ) goto label$2007$8;
	r5 = (SysError)hl_alloc_obj(SysError__val);
	r4 = (String)global$202;
	r4 = String___add__(r4,r0);
	SysError_new(r5,r4);
	hl_throw((vdynamic*)r5);
	label$2007$8:
	return;
}

void sys_FileSystem_createDirectory(String r0) {
	String r1, r3, r9, r10;
	SysError r17;
	hl__types__ArrayObj r4;
	hl_type *r6;
	bool r8;
	vdynamic *r13, *r14, *r15;
	vbyte *r16;
	int r7, r11, r12;
	varray *r5;
	r1 = haxe_io_Path_addTrailingSlash(r0);
	r3 = NULL;
	r6 = &type$13;
	r7 = 0;
	r5 = hl_alloc_array(r6,r7);
	r4 = hl_types_ArrayObj_alloc(r5);
	label$2004$6:
	r8 = true;
	if( !r8 ) goto label$2004$17;
	r9 = haxe_io_Path_directory(r1);
	r3 = r9;
	if( r1 != r3 && (!r1 || !r3 || String___compare(r1,(vdynamic*)r3) != 0) ) goto label$2004$13;
	goto label$2004$17;
	label$2004$13:
	if( r4 == NULL ) hl_null_access();
	hl_types_ArrayObj_unshift(r4,((vdynamic*)r1));
	r1 = r3;
	goto label$2004$6;
	label$2004$17:
	r7 = 0;
	label$2004$18:
	if( r4 == NULL ) hl_null_access();
	r12 = r4->length;
	if( r7 >= r12 ) goto label$2004$50;
	r12 = r4->length;
	if( ((unsigned)r7) < ((unsigned)r12) ) goto label$2004$26;
	r9 = NULL;
	goto label$2004$29;
	label$2004$26:
	r5 = r4->array;
	r13 = ((vdynamic**)(r5 + 1))[r7];
	r9 = (String)r13;
	label$2004$29:
	++r7;
	if( r9 == NULL ) hl_null_access();
	r11 = r9->length;
	r12 = 1;
	r11 = r11 - r12;
	r14 = String_charCodeAt(r9,r11);
	r11 = 58;
	r15 = hl_alloc_dynamic(&type$3);
	r15->v.i = r11;
	if( r14 == r15 || (r14 && r15 && (r14->v.i == r15->v.i)) ) goto label$2004$49;
	r8 = sys_FileSystem_exists(r9);
	if( r8 ) goto label$2004$49;
	r16 = Sys_getPath(r9);
	r11 = 493;
	r8 = hl_sys_create_dir(r16,r11);
	if( r8 ) goto label$2004$49;
	r17 = (SysError)hl_alloc_obj(SysError__val);
	r10 = (String)global$201;
	r10 = String___add__(r10,r9);
	SysError_new(r17,r10);
	hl_throw((vdynamic*)r17);
	label$2004$49:
	goto label$2004$18;
	label$2004$50:
	return;
}

bool sys_FileSystem_isDirectory(String r0) {
	String r3;
	bool r1;
	vdynamic *r4, *r6;
	int r5, r7;
	vbyte *r2;
	if( r0 == NULL ) hl_null_access();
	r5 = 1;
	r4 = String_charCodeAt(r0,r5);
	r5 = 58;
	r6 = hl_alloc_dynamic(&type$3);
	r6->v.i = r5;
	if( r4 != r6 && (!r4 || !r6 || (r4->v.i != r6->v.i)) ) goto label$2002$11;
	r5 = r0->length;
	r7 = 3;
	if( r7 < r5 ) goto label$2002$11;
	r3 = haxe_io_Path_addTrailingSlash(r0);
	goto label$2002$12;
	label$2002$11:
	r3 = haxe_io_Path_removeTrailingSlashes(r0);
	label$2002$12:
	r2 = Sys_getPath(r3);
	r1 = hl_sys_is_dir(r2);
	return r1;
}

String sys_FileSystem_absolutePath(String r0) {
	String r2;
	hl__types__ArrayObj r3;
	hl_type *r5;
	bool r1;
	int r6;
	varray *r4;
	r1 = haxe_io_Path_isAbsolute(r0);
	if( !r1 ) goto label$1998$3;
	return r0;
	label$1998$3:
	r5 = &type$13;
	r6 = 2;
	r4 = hl_alloc_array(r5,r6);
	r2 = Sys_getCwd();
	r6 = 0;
	((String*)(r4 + 1))[r6] = r2;
	r6 = 1;
	((String*)(r4 + 1))[r6] = r0;
	r3 = hl_types_ArrayObj_alloc(r4);
	r2 = haxe_io_Path_join(r3);
	return r2;
}

String sys_FileSystem_fullPath(String r0) {
	String r1;
	vbyte *r2;
	r2 = Sys_getPath(r0);
	r2 = hl_sys_full_path(r2);
	r1 = Sys_makePath(r2);
	return r1;
}

vvirtual* sys_FileSystem_stat(String r0) {
	String r3;
	Date r11;
	vvirtual *r10;
	SysError r9;
	vdynamic *r4, *r6;
	int r5, r7;
	vbyte *r2;
	varray *r1;
	if( r0 == NULL ) hl_null_access();
	r5 = 1;
	r4 = String_charCodeAt(r0,r5);
	r5 = 58;
	r6 = hl_alloc_dynamic(&type$3);
	r6->v.i = r5;
	if( r4 != r6 && (!r4 || !r6 || (r4->v.i != r6->v.i)) ) goto label$1993$11;
	r5 = r0->length;
	r7 = 3;
	if( r7 < r5 ) goto label$1993$11;
	r3 = haxe_io_Path_addTrailingSlash(r0);
	goto label$1993$12;
	label$1993$11:
	r3 = haxe_io_Path_removeTrailingSlashes(r0);
	label$1993$12:
	r2 = Sys_getPath(r3);
	r1 = hl_sys_stat(r2);
	if( r1 ) goto label$1993$20;
	r9 = (SysError)hl_alloc_obj(SysError__val);
	r3 = (String)global$200;
	r3 = String___add__(r3,r0);
	SysError_new(r9,r3);
	hl_throw((vdynamic*)r9);
	label$1993$20:
	r10 = hl_alloc_virtual(&type$860);
	r5 = 0;
	r5 = ((int*)(r1 + 1))[r5];
	if( hl_vfields(r10)[3] ) *(int*)(hl_vfields(r10)[3]) = (int)r5; else hl_dyn_seti(r10->value,5145602/*gid*/,&type$3,r5);
	r5 = 1;
	r5 = ((int*)(r1 + 1))[r5];
	if( hl_vfields(r10)[10] ) *(int*)(hl_vfields(r10)[10]) = (int)r5; else hl_dyn_seti(r10->value,5841808/*uid*/,&type$3,r5);
	r5 = 2;
	r5 = ((int*)(r1 + 1))[r5];
	r11 = Date_fromInt(r5);
	if( hl_vfields(r10)[0] ) *(Date*)(hl_vfields(r10)[0]) = (Date)r11; else hl_dyn_setp(r10->value,115020147/*atime*/,&type$24,r11);
	r5 = 3;
	r5 = ((int*)(r1 + 1))[r5];
	r11 = Date_fromInt(r5);
	if( hl_vfields(r10)[6] ) *(Date*)(hl_vfields(r10)[6]) = (Date)r11; else hl_dyn_setp(r10->value,262801146/*mtime*/,&type$24,r11);
	r5 = 4;
	r5 = ((int*)(r1 + 1))[r5];
	r11 = Date_fromInt(r5);
	if( hl_vfields(r10)[1] ) *(Date*)(hl_vfields(r10)[1]) = (Date)r11; else hl_dyn_setp(r10->value,229128954/*ctime*/,&type$24,r11);
	r5 = 5;
	r5 = ((int*)(r1 + 1))[r5];
	if( hl_vfields(r10)[9] ) *(int*)(hl_vfields(r10)[9]) = (int)r5; else hl_dyn_seti(r10->value,206807499/*size*/,&type$3,r5);
	r5 = 6;
	r5 = ((int*)(r1 + 1))[r5];
	if( hl_vfields(r10)[2] ) *(int*)(hl_vfields(r10)[2]) = (int)r5; else hl_dyn_seti(r10->value,4995541/*dev*/,&type$3,r5);
	r5 = 7;
	r5 = ((int*)(r1 + 1))[r5];
	if( hl_vfields(r10)[4] ) *(int*)(hl_vfields(r10)[4]) = (int)r5; else hl_dyn_seti(r10->value,5246186/*ino*/,&type$3,r5);
	r5 = 8;
	r5 = ((int*)(r1 + 1))[r5];
	if( hl_vfields(r10)[7] ) *(int*)(hl_vfields(r10)[7]) = (int)r5; else hl_dyn_seti(r10->value,-37296679/*nlink*/,&type$3,r5);
	r5 = 9;
	r5 = ((int*)(r1 + 1))[r5];
	if( hl_vfields(r10)[8] ) *(int*)(hl_vfields(r10)[8]) = (int)r5; else hl_dyn_seti(r10->value,195464621/*rdev*/,&type$3,r5);
	r5 = 10;
	r5 = ((int*)(r1 + 1))[r5];
	if( hl_vfields(r10)[5] ) *(int*)(hl_vfields(r10)[5]) = (int)r5; else hl_dyn_seti(r10->value,140563565/*mode*/,&type$3,r5);
	return r10;
}

bool sys_FileSystem_exists(String r0) {
	String r3;
	bool r1;
	vdynamic *r4, *r6;
	int r5, r7;
	vbyte *r2;
	if( r0 == NULL ) hl_null_access();
	r5 = 1;
	r4 = String_charCodeAt(r0,r5);
	r5 = 58;
	r6 = hl_alloc_dynamic(&type$3);
	r6->v.i = r5;
	if( r4 != r6 && (!r4 || !r6 || (r4->v.i != r6->v.i)) ) goto label$1988$11;
	r5 = r0->length;
	r7 = 3;
	if( r7 < r5 ) goto label$1988$11;
	r3 = haxe_io_Path_addTrailingSlash(r0);
	goto label$1988$12;
	label$1988$11:
	r3 = haxe_io_Path_removeTrailingSlashes(r0);
	label$1988$12:
	r2 = Sys_getPath(r3);
	r1 = hl_sys_exists(r2);
	return r1;
}

