// Generated by HLC 4.0.0 (HL v4)
#include <hl/code.h>

double haxe_MainLoop_tick() {
	haxe__MainEvent r1, r5;
	vclosure *r10;
	double r3, r4, r6, r7, r9;
	haxe__$MainLoop r2;
	int r8;
	haxe_MainLoop_sortEvents();
	r2 = (haxe__$MainLoop)global$755;
	r1 = r2->pending;
	r3 = hl_sys_time();
	r4 = 1000000000.;
	label$3077$5:
	if( !r1 ) goto label$3077$31;
	if( r1 == NULL ) hl_null_access();
	r5 = r1->next;
	r6 = r1->nextRun;
	r6 = r6 - r3;
	r7 = r1->nextRun;
	r8 = 0;
	r9 = (double)r8;
	if( r7 < r9 ) goto label$3077$18;
	r8 = 0;
	r9 = (double)r8;
	if( !(r9 >= r6) ) goto label$3077$27;
	label$3077$18:
	r8 = 0;
	r7 = (double)r8;
	r4 = r7;
	r10 = r1->f;
	if( !r10 ) goto label$3077$26;
	r10 = r1->f;
	if( r10 == NULL ) hl_null_access();
	r10->hasValue ? ((void (*)(vdynamic*))r10->fun)((vdynamic*)r10->value) : ((void (*)(void))r10->fun)();
	label$3077$26:
	goto label$3077$29;
	label$3077$27:
	if( !(r6 < r4) ) goto label$3077$29;
	r4 = r6;
	label$3077$29:
	r1 = r5;
	goto label$3077$5;
	label$3077$31:
	return r4;
}

void haxe_MainLoop_sortEvents() {
	bool r7;
	haxe__MainEvent r0, r3, r8, r9, r12, r14, r17;
	double r15, r16;
	haxe__$MainLoop r1;
	int r4, r5, r6, r10, r11, r13;
	r1 = (haxe__$MainLoop)global$755;
	r0 = r1->pending;
	if( r0 ) goto label$3081$4;
	return;
	label$3081$4:
	r4 = 1;
	r5 = 0;
	r6 = 0;
	label$3081$7:
	r7 = true;
	if( !r7 ) goto label$3081$95;
	r3 = r0;
	r8 = NULL;
	r0 = r8;
	r9 = NULL;
	r8 = r9;
	r11 = 0;
	r10 = r11;
	label$3081$17:
	if( !r3 ) goto label$3081$85;
	++r10;
	r9 = r3;
	r11 = 0;
	r5 = r11;
	r11 = 0;
	r13 = r4;
	label$3081$25:
	if( r11 >= r13 ) goto label$3081$35;
	++r11;
	++r5;
	if( r9 == NULL ) hl_null_access();
	r12 = r9->next;
	r9 = r12;
	if( r12 ) goto label$3081$34;
	goto label$3081$35;
	label$3081$34:
	goto label$3081$25;
	label$3081$35:
	r6 = r4;
	label$3081$36:
	r13 = 0;
	if( r13 < r5 ) goto label$3081$42;
	r13 = 0;
	if( r13 >= r6 ) goto label$3081$83;
	if( !r9 ) goto label$3081$83;
	label$3081$42:
	r13 = 0;
	if( r5 != r13 ) goto label$3081$50;
	r12 = r9;
	if( r9 == NULL ) hl_null_access();
	r14 = r9->next;
	r9 = r14;
	--r6;
	goto label$3081$74;
	label$3081$50:
	r13 = 0;
	if( r6 == r13 ) goto label$3081$64;
	if( !r9 ) goto label$3081$64;
	if( r3 == NULL ) hl_null_access();
	r11 = r3->priority;
	if( r9 == NULL ) hl_null_access();
	r13 = r9->priority;
	if( r13 < r11 ) goto label$3081$64;
	r11 = r3->priority;
	r13 = r9->priority;
	if( r11 != r13 ) goto label$3081$70;
	r15 = r3->nextRun;
	r16 = r9->nextRun;
	if( !(r16 >= r15) ) goto label$3081$70;
	label$3081$64:
	r12 = r3;
	if( r3 == NULL ) hl_null_access();
	r14 = r3->next;
	r3 = r14;
	--r5;
	goto label$3081$74;
	label$3081$70:
	r12 = r9;
	r14 = r9->next;
	r9 = r14;
	--r6;
	label$3081$74:
	if( !r8 ) goto label$3081$78;
	if( r8 == NULL ) hl_null_access();
	r8->next = r12;
	goto label$3081$79;
	label$3081$78:
	r0 = r12;
	label$3081$79:
	if( r12 == NULL ) hl_null_access();
	r12->prev = r8;
	r8 = r12;
	goto label$3081$36;
	label$3081$83:
	r3 = r9;
	goto label$3081$17;
	label$3081$85:
	if( r8 == NULL ) hl_null_access();
	r17 = NULL;
	r8->next = r17;
	r13 = 1;
	if( r13 < r10 ) goto label$3081$91;
	goto label$3081$95;
	label$3081$91:
	r13 = 2;
	r11 = r4 * r13;
	r4 = r11;
	goto label$3081$7;
	label$3081$95:
	if( r0 == NULL ) hl_null_access();
	r17 = NULL;
	r0->prev = r17;
	r1 = (haxe__$MainLoop)global$755;
	r1->pending = r0;
	return;
}

haxe__MainEvent haxe_MainLoop_add(vclosure* r0,int* r1) {
	String r4;
	haxe__MainEvent r5, r6;
	haxe__$MainLoop r7;
	int r2;
	if( r1 ) goto label$3080$3;
	r2 = 0;
	goto label$3080$4;
	label$3080$3:
	r2 = *r1;
	label$3080$4:
	if( r0 ) goto label$3080$7;
	r4 = (String)global$756;
	hl_throw((vdynamic*)r4);
	label$3080$7:
	r5 = (haxe__MainEvent)hl_alloc_obj(haxe__MainEvent__val);
	haxe_MainEvent_new(r5,r0,r2);
	r7 = (haxe__$MainLoop)global$755;
	r6 = r7->pending;
	if( !r6 ) goto label$3080$14;
	if( r6 == NULL ) hl_null_access();
	r6->prev = r5;
	label$3080$14:
	r5->next = r6;
	r7 = (haxe__$MainLoop)global$755;
	r7->pending = r5;
	return r5;
}

bool haxe_MainLoop_hasEvents() {
	bool r3;
	haxe__MainEvent r0, r2;
	haxe__$MainLoop r1;
	r1 = (haxe__$MainLoop)global$755;
	r0 = r1->pending;
	label$3078$2:
	if( !r0 ) goto label$3078$12;
	if( r0 == NULL ) hl_null_access();
	r3 = r0->isBlocking;
	if( !r3 ) goto label$3078$9;
	r3 = true;
	return r3;
	label$3078$9:
	r2 = r0->next;
	r0 = r2;
	goto label$3078$2;
	label$3078$12:
	r3 = false;
	return r3;
}

