// Generated by HLC 4.0.0 (HL v4)
#include <hl/code.h>

bool h3d_col_SkinCollider_contains(h3d__col__SkinCollider r0,h3d__col__Point r1) {
	bool r3;
	h3d__col__PolygonBuffer r4;
	h3d_col_SkinCollider_applyTransform(r0);
	r4 = r0->transform;
	if( r4 == NULL ) hl_null_access();
	r3 = h3d_col_PolygonBuffer_contains(r4,r1);
	return r3;
}

bool h3d_col_SkinCollider_inFrustum(h3d__col__SkinCollider r0,h3d__Matrix r1) {
	bool r3;
	h3d__col__PolygonBuffer r4;
	h3d_col_SkinCollider_applyTransform(r0);
	r4 = r0->transform;
	if( r4 == NULL ) hl_null_access();
	r3 = h3d_col_PolygonBuffer_inFrustum(r4,r1);
	return r3;
}

double h3d_col_SkinCollider_rayIntersection(h3d__col__SkinCollider r0,h3d__col__Ray r1,bool r2) {
	double r4;
	h3d__col__PolygonBuffer r5;
	h3d_col_SkinCollider_applyTransform(r0);
	r5 = r0->transform;
	if( r5 == NULL ) hl_null_access();
	r4 = h3d_col_PolygonBuffer_rayIntersection(r5,r1,r2);
	return r4;
}

void h3d_col_SkinCollider_applyTransform(h3d__col__SkinCollider r0) {
	hl__types__ArrayObj r29;
	bool r2;
	h3d__anim__Skin r8;
	h3d__scene__Skin r3;
	hl__types__ArrayBytes_Int r30;
	hl__types__ArrayBytes_Single r16;
	hl__types__ArrayBytes_Float r24;
	float r18;
	double r13, r14, r15, r20, r21, r22, r25, r26, r27, r28, r33, r34, r35;
	h3d__col__PolygonBuffer r17;
	vdynamic *r6;
	varray *r32;
	h3d__Matrix r31;
	vbyte *r19;
	int r4, r5, r7, r9, r10, r11, r12, r23;
	r3 = r0->obj;
	if( r3 == NULL ) hl_null_access();
	r2 = r3->jointsUpdated;
	if( r2 ) goto label$2642$10;
	r4 = r0->lastFrame;
	r3 = r0->obj;
	if( r3 == NULL ) hl_null_access();
	r5 = r3->lastFrame;
	if( r4 != r5 ) goto label$2642$10;
	return;
	label$2642$10:
	r3 = r0->obj;
	if( r3 == NULL ) hl_null_access();
	r4 = r3->lastFrame;
	r0->lastFrame = r4;
	r3 = r0->obj;
	if( r3 == NULL ) hl_null_access();
	h3d_scene_Skin_syncJoints(r3);
	r4 = 0;
	r5 = 0;
	r3 = r0->obj;
	if( r3 == NULL ) hl_null_access();
	r8 = r3->skinData;
	if( r8 == NULL ) hl_null_access();
	r7 = r8->bonesPerVertex;
	r9 = 0;
	r3 = r0->obj;
	if( r3 == NULL ) hl_null_access();
	r8 = r3->skinData;
	if( r8 == NULL ) hl_null_access();
	r10 = r8->vertexCount;
	label$2642$30:
	if( r9 >= r10 ) goto label$2642$216;
	++r9;
	r13 = 0.;
	r14 = 0.;
	r15 = 0.;
	r17 = r0->col;
	if( r17 == NULL ) hl_null_access();
	r16 = r17->buffer;
	if( r16 == NULL ) hl_null_access();
	r12 = r16->length;
	if( ((unsigned)r5) < ((unsigned)r12) ) goto label$2642$44;
	r18 = 0.;
	goto label$2642$48;
	label$2642$44:
	r19 = r16->bytes;
	r12 = 2;
	r12 = r5 << r12;
	r18 = *(float*)(r19 + r12);
	label$2642$48:
	r20 = (double)r18;
	r17 = r0->col;
	if( r17 == NULL ) hl_null_access();
	r16 = r17->buffer;
	if( r16 == NULL ) hl_null_access();
	r12 = 1;
	r11 = r5 + r12;
	r12 = r16->length;
	if( ((unsigned)r11) < ((unsigned)r12) ) goto label$2642$59;
	r18 = 0.;
	goto label$2642$63;
	label$2642$59:
	r19 = r16->bytes;
	r12 = 2;
	r12 = r11 << r12;
	r18 = *(float*)(r19 + r12);
	label$2642$63:
	r21 = (double)r18;
	r17 = r0->col;
	if( r17 == NULL ) hl_null_access();
	r16 = r17->buffer;
	if( r16 == NULL ) hl_null_access();
	r12 = 2;
	r11 = r5 + r12;
	r12 = r16->length;
	if( ((unsigned)r11) < ((unsigned)r12) ) goto label$2642$74;
	r18 = 0.;
	goto label$2642$78;
	label$2642$74:
	r19 = r16->bytes;
	r12 = 2;
	r12 = r11 << r12;
	r18 = *(float*)(r19 + r12);
	label$2642$78:
	r22 = (double)r18;
	r11 = 0;
	label$2642$80:
	if( r11 >= r7 ) goto label$2642$173;
	++r11;
	r3 = r0->obj;
	if( r3 == NULL ) hl_null_access();
	r8 = r3->skinData;
	if( r8 == NULL ) hl_null_access();
	r24 = r8->vertexWeights;
	if( r24 == NULL ) hl_null_access();
	r23 = r24->length;
	if( ((unsigned)r4) < ((unsigned)r23) ) goto label$2642$93;
	r25 = 0.;
	goto label$2642$97;
	label$2642$93:
	r19 = r24->bytes;
	r23 = 3;
	r23 = r4 << r23;
	r25 = *(double*)(r19 + r23);
	label$2642$97:
	r12 = 0;
	r27 = (double)r12;
	if( r25 != r27 ) goto label$2642$102;
	++r4;
	goto label$2642$80;
	label$2642$102:
	r3 = r0->obj;
	if( r3 == NULL ) hl_null_access();
	r29 = r3->currentPalette;
	if( r29 == NULL ) hl_null_access();
	r3 = r0->obj;
	if( r3 == NULL ) hl_null_access();
	r8 = r3->skinData;
	if( r8 == NULL ) hl_null_access();
	r30 = r8->vertexJoints;
	if( r30 == NULL ) hl_null_access();
	r12 = r4;
	++r4;
	r23 = r30->length;
	if( ((unsigned)r12) < ((unsigned)r23) ) goto label$2642$118;
	r12 = 0;
	goto label$2642$122;
	label$2642$118:
	r19 = r30->bytes;
	r23 = 2;
	r23 = r12 << r23;
	r12 = *(int*)(r19 + r23);
	label$2642$122:
	r23 = r29->length;
	if( ((unsigned)r12) < ((unsigned)r23) ) goto label$2642$126;
	r31 = NULL;
	goto label$2642$129;
	label$2642$126:
	r32 = r29->array;
	r6 = ((vdynamic**)(r32 + 1))[r12];
	r31 = (h3d__Matrix)r6;
	label$2642$129:
	if( r31 == NULL ) hl_null_access();
	r34 = r31->_11;
	r33 = r20 * r34;
	r35 = r31->_21;
	r34 = r21 * r35;
	r33 = r33 + r34;
	r35 = r31->_31;
	r34 = r22 * r35;
	r33 = r33 + r34;
	r34 = r31->_41;
	r33 = r33 + r34;
	r26 = r33;
	r34 = r31->_12;
	r33 = r20 * r34;
	r35 = r31->_22;
	r34 = r21 * r35;
	r33 = r33 + r34;
	r35 = r31->_32;
	r34 = r22 * r35;
	r33 = r33 + r34;
	r34 = r31->_42;
	r33 = r33 + r34;
	r27 = r33;
	r34 = r31->_13;
	r33 = r20 * r34;
	r35 = r31->_23;
	r34 = r21 * r35;
	r33 = r33 + r34;
	r35 = r31->_33;
	r34 = r22 * r35;
	r33 = r33 + r34;
	r34 = r31->_43;
	r33 = r33 + r34;
	r28 = r33;
	r34 = r26 * r25;
	r33 = r13 + r34;
	r13 = r33;
	r34 = r27 * r25;
	r33 = r14 + r34;
	r14 = r33;
	r34 = r28 * r25;
	r33 = r15 + r34;
	r15 = r33;
	goto label$2642$80;
	label$2642$173:
	r17 = r0->transform;
	if( r17 == NULL ) hl_null_access();
	r16 = r17->buffer;
	if( r16 == NULL ) hl_null_access();
	r11 = r5;
	++r5;
	r18 = (float)r13;
	r12 = r16->length;
	if( ((unsigned)r11) < ((unsigned)r12) ) goto label$2642$183;
	hl_types_ArrayBytes_Single___expand(r16,r11);
	label$2642$183:
	r19 = r16->bytes;
	r12 = 2;
	r12 = r11 << r12;
	*(float*)(r19 + r12) = r18;
	r17 = r0->transform;
	if( r17 == NULL ) hl_null_access();
	r16 = r17->buffer;
	if( r16 == NULL ) hl_null_access();
	r11 = r5;
	++r5;
	r18 = (float)r14;
	r12 = r16->length;
	if( ((unsigned)r11) < ((unsigned)r12) ) goto label$2642$197;
	hl_types_ArrayBytes_Single___expand(r16,r11);
	label$2642$197:
	r19 = r16->bytes;
	r12 = 2;
	r12 = r11 << r12;
	*(float*)(r19 + r12) = r18;
	r17 = r0->transform;
	if( r17 == NULL ) hl_null_access();
	r16 = r17->buffer;
	if( r16 == NULL ) hl_null_access();
	r11 = r5;
	++r5;
	r18 = (float)r15;
	r12 = r16->length;
	if( ((unsigned)r11) < ((unsigned)r12) ) goto label$2642$211;
	hl_types_ArrayBytes_Single___expand(r16,r11);
	label$2642$211:
	r19 = r16->bytes;
	r12 = 2;
	r12 = r11 << r12;
	*(float*)(r19 + r12) = r18;
	goto label$2642$30;
	label$2642$216:
	return;
}

void h3d_col_SkinCollider_new(h3d__col__SkinCollider r0,h3d__scene__Skin r1,h3d__col__PolygonBuffer r2) {
	hl__types__ArrayBytes_hl_UI16 r6;
	hl__types__ArrayBytes_Single r5;
	int *r8, *r10;
	h3d__col__PolygonBuffer r3;
	int r7, r9;
	r0->obj = r1;
	r0->col = r2;
	r3 = (h3d__col__PolygonBuffer)hl_alloc_obj(h3d__col__PolygonBuffer__val);
	h3d_col_PolygonBuffer_new(r3);
	r0->transform = r3;
	r3 = r0->transform;
	if( r3 == NULL ) hl_null_access();
	if( r2 == NULL ) hl_null_access();
	r5 = r2->buffer;
	if( r5 == NULL ) hl_null_access();
	r5 = hl_types_ArrayBytes_Single_copy(r5);
	r6 = r2->indexes;
	r7 = r2->startIndex;
	r8 = &r7;
	r9 = r2->triCount;
	r10 = &r9;
	h3d_col_PolygonBuffer_setData(r3,r5,r6,r8,r10);
	return;
}

