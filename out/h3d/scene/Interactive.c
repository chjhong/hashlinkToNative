// Generated by HLC 4.0.0 (HL v4)
#include <hl/code.h>

void h3d_scene_Interactive_onAdd(h3d__scene__Interactive r0) {
	h3d__scene__Scene r1;
	r1 = h3d_scene_Object_getScene(((h3d__scene__Object)r0));
	r0->scene = r1;
	r1 = r0->scene;
	if( !r1 ) goto label$1414$7;
	r1 = r0->scene;
	if( r1 == NULL ) hl_null_access();
	h3d_scene_Scene_addEventTarget(r1,r0);
	label$1414$7:
	h3d_scene_Object_onAdd(((h3d__scene__Object)r0));
	return;
}

void h3d_scene_Interactive_onRemove(h3d__scene__Interactive r0) {
	h3d__scene__Scene r2;
	r2 = r0->scene;
	if( !r2 ) goto label$1415$7;
	r2 = r0->scene;
	if( r2 == NULL ) hl_null_access();
	h3d_scene_Scene_removeEventTarget(r2,r0);
	r2 = NULL;
	r0->scene = r2;
	label$1415$7:
	h3d_scene_Object_onRemove(((h3d__scene__Object)r0));
	return;
}

void h3d_scene_Interactive_preventClick(h3d__scene__Interactive r0) {
	int r1;
	r1 = -1;
	r0->mouseDownButton = r1;
	return;
}

vvirtual* h3d_scene_Interactive_getInteractiveScene(h3d__scene__Interactive r0) {
	vvirtual *r2;
	h3d__scene__Scene r1;
	r1 = r0->scene;
	if( r1 ) goto label$1417$4;
	r2 = NULL;
	goto label$1417$8;
	label$1417$4:
	r2 = r1->$_f28;
	if( r2 ) goto label$1417$8;
	r2 = hl_to_virtual(&type$1318,(vdynamic*)r1);
	r1->$_f28 = r2;
	label$1417$8:
	return r2;
}

void h3d_scene_Interactive_handleEvent(h3d__scene__Interactive r0,hxd__Event r1) {
	venum *r5, *r8;
	bool r3;
	hxd__$System r10;
	vclosure *r7, *r9;
	int r4, r6;
	r3 = r0->propagateEvents;
	if( !r3 ) goto label$1418$5;
	if( r1 == NULL ) hl_null_access();
	r3 = true;
	r1->propagate = r3;
	label$1418$5:
	r3 = r0->cancelEvents;
	if( !r3 ) goto label$1418$10;
	if( r1 == NULL ) hl_null_access();
	r3 = true;
	r1->cancel = r3;
	label$1418$10:
	if( r1 == NULL ) hl_null_access();
	r5 = r1->kind;
	if( r5 == NULL ) hl_null_access();
	r4 = HL__ENUM_INDEX__(r5);
	switch(r4) {
		default:
			goto label$1418$116;
		case 0:
			r3 = r0->enableRightButton;
			if( r3 ) goto label$1418$21;
			r4 = r1->button;
			r6 = 0;
			if( r4 != r6 ) goto label$1418$26;
			label$1418$21:
			r4 = r1->button;
			r0->mouseDownButton = r4;
			r7 = r0->onPush;
			if( r7 == NULL ) hl_null_access();
			r7->hasValue ? ((void (*)(vdynamic*,hxd__Event))r7->fun)((vdynamic*)r7->value,r1) : ((void (*)(hxd__Event))r7->fun)(r1);
			label$1418$26:
			goto label$1418$116;
		case 1:
			r3 = r0->enableRightButton;
			if( r3 ) goto label$1418$32;
			r4 = r1->button;
			r6 = 0;
			if( r4 != r6 ) goto label$1418$41;
			label$1418$32:
			r7 = r0->onRelease;
			if( r7 == NULL ) hl_null_access();
			r7->hasValue ? ((void (*)(vdynamic*,hxd__Event))r7->fun)((vdynamic*)r7->value,r1) : ((void (*)(hxd__Event))r7->fun)(r1);
			r4 = r0->mouseDownButton;
			r6 = r1->button;
			if( r4 != r6 ) goto label$1418$41;
			r7 = r0->onClick;
			if( r7 == NULL ) hl_null_access();
			r7->hasValue ? ((void (*)(vdynamic*,hxd__Event))r7->fun)((vdynamic*)r7->value,r1) : ((void (*)(hxd__Event))r7->fun)(r1);
			label$1418$41:
			r4 = -1;
			r0->mouseDownButton = r4;
			goto label$1418$116;
		case 2:
			r7 = r0->onMove;
			if( r7 == NULL ) hl_null_access();
			r7->hasValue ? ((void (*)(vdynamic*,hxd__Event))r7->fun)((vdynamic*)r7->value,r1) : ((void (*)(hxd__Event))r7->fun)(r1);
			goto label$1418$116;
		case 3:
			r7 = r0->onOver;
			if( r7 == NULL ) hl_null_access();
			r7->hasValue ? ((void (*)(vdynamic*,hxd__Event))r7->fun)((vdynamic*)r7->value,r1) : ((void (*)(hxd__Event))r7->fun)(r1);
			r3 = r1->cancel;
			if( r3 ) goto label$1418$60;
			r8 = r0->cursor;
			if( !r8 ) goto label$1418$60;
			r10 = (hxd__$System)global$409;
			r9 = r10->setCursor;
			if( r9 == NULL ) hl_null_access();
			r8 = r0->cursor;
			r9->hasValue ? ((void (*)(vdynamic*,venum*))r9->fun)((vdynamic*)r9->value,r8) : ((void (*)(venum*))r9->fun)(r8);
			label$1418$60:
			goto label$1418$116;
		case 4:
			r4 = -1;
			r0->mouseDownButton = r4;
			r7 = r0->onOut;
			if( r7 == NULL ) hl_null_access();
			r7->hasValue ? ((void (*)(vdynamic*,hxd__Event))r7->fun)((vdynamic*)r7->value,r1) : ((void (*)(hxd__Event))r7->fun)(r1);
			r3 = r1->cancel;
			if( r3 ) goto label$1418$73;
			r10 = (hxd__$System)global$409;
			r9 = r10->setCursor;
			if( r9 == NULL ) hl_null_access();
			r8 = (venum*)global$410;
			r9->hasValue ? ((void (*)(vdynamic*,venum*))r9->fun)((vdynamic*)r9->value,r8) : ((void (*)(venum*))r9->fun)(r8);
			label$1418$73:
			goto label$1418$116;
		case 5:
			r7 = r0->onWheel;
			if( r7 == NULL ) hl_null_access();
			r7->hasValue ? ((void (*)(vdynamic*,hxd__Event))r7->fun)((vdynamic*)r7->value,r1) : ((void (*)(hxd__Event))r7->fun)(r1);
			goto label$1418$116;
		case 6:
			r7 = r0->onFocus;
			if( r7 == NULL ) hl_null_access();
			r7->hasValue ? ((void (*)(vdynamic*,hxd__Event))r7->fun)((vdynamic*)r7->value,r1) : ((void (*)(hxd__Event))r7->fun)(r1);
			goto label$1418$116;
		case 7:
			r7 = r0->onFocusLost;
			if( r7 == NULL ) hl_null_access();
			r7->hasValue ? ((void (*)(vdynamic*,hxd__Event))r7->fun)((vdynamic*)r7->value,r1) : ((void (*)(hxd__Event))r7->fun)(r1);
			goto label$1418$116;
		case 8:
			r7 = r0->onKeyDown;
			if( r7 == NULL ) hl_null_access();
			r7->hasValue ? ((void (*)(vdynamic*,hxd__Event))r7->fun)((vdynamic*)r7->value,r1) : ((void (*)(hxd__Event))r7->fun)(r1);
			goto label$1418$116;
		case 9:
			r7 = r0->onKeyUp;
			if( r7 == NULL ) hl_null_access();
			r7->hasValue ? ((void (*)(vdynamic*,hxd__Event))r7->fun)((vdynamic*)r7->value,r1) : ((void (*)(hxd__Event))r7->fun)(r1);
			goto label$1418$116;
		case 10:
			r3 = r0->enableRightButton;
			if( r3 ) goto label$1418$99;
			r4 = r1->button;
			r6 = 0;
			if( r4 != r6 ) goto label$1418$106;
			label$1418$99:
			r5 = (venum*)global$411;
			r1->kind = r5;
			r7 = r0->onRelease;
			if( r7 == NULL ) hl_null_access();
			r7->hasValue ? ((void (*)(vdynamic*,hxd__Event))r7->fun)((vdynamic*)r7->value,r1) : ((void (*)(hxd__Event))r7->fun)(r1);
			r5 = (venum*)global$412;
			r1->kind = r5;
			label$1418$106:
			r4 = -1;
			r0->mouseDownButton = r4;
			goto label$1418$116;
		case 11:
			r7 = r0->onTextInput;
			if( r7 == NULL ) hl_null_access();
			r7->hasValue ? ((void (*)(vdynamic*,hxd__Event))r7->fun)((vdynamic*)r7->value,r1) : ((void (*)(hxd__Event))r7->fun)(r1);
			goto label$1418$116;
		case 12:
			r7 = r0->onCheck;
			if( r7 == NULL ) hl_null_access();
			r7->hasValue ? ((void (*)(vdynamic*,hxd__Event))r7->fun)((vdynamic*)r7->value,r1) : ((void (*)(hxd__Event))r7->fun)(r1);
	}
	label$1418$116:
	return;
}

venum* h3d_scene_Interactive_set_cursor(h3d__scene__Interactive r0,venum* r1) {
	venum *r2;
	bool r4;
	hxd__$System r6;
	vclosure *r5;
	r0->cursor = r1;
	r4 = h3d_scene_Interactive_isOver(r0);
	if( !r4 ) goto label$1419$10;
	r2 = r0->cursor;
	if( !r2 ) goto label$1419$10;
	r6 = (hxd__$System)global$409;
	r5 = r6->setCursor;
	if( r5 == NULL ) hl_null_access();
	r2 = r0->cursor;
	r5->hasValue ? ((void (*)(vdynamic*,venum*))r5->fun)((vdynamic*)r5->value,r2) : ((void (*)(venum*))r5->fun)(r2);
	label$1419$10:
	return r1;
}

void h3d_scene_Interactive_focus(h3d__scene__Interactive r0) {
	vvirtual *r4;
	h3d__scene__Scene r2;
	hxd__SceneEvents r3;
	r2 = r0->scene;
	if( !r2 ) goto label$1420$6;
	r2 = r0->scene;
	if( r2 == NULL ) hl_null_access();
	r3 = r2->events;
	if( r3 ) goto label$1420$7;
	label$1420$6:
	return;
	label$1420$7:
	r2 = r0->scene;
	if( r2 == NULL ) hl_null_access();
	r3 = r2->events;
	if( r3 == NULL ) hl_null_access();
	r4 = r0->$_f42;
	if( r4 ) goto label$1420$15;
	r4 = hl_to_virtual(&type$1316,(vdynamic*)r0);
	r0->$_f42 = r4;
	label$1420$15:
	hxd_SceneEvents_focus(r3,r4);
	return;
}

void h3d_scene_Interactive_blur(h3d__scene__Interactive r0) {
	bool r2;
	h3d__scene__Scene r4;
	hxd__SceneEvents r3;
	r2 = h3d_scene_Interactive_hasFocus(r0);
	if( !r2 ) goto label$1421$7;
	r4 = r0->scene;
	if( r4 == NULL ) hl_null_access();
	r3 = r4->events;
	if( r3 == NULL ) hl_null_access();
	hxd_SceneEvents_blur(r3);
	label$1421$7:
	return;
}

bool h3d_scene_Interactive_isOver(h3d__scene__Interactive r0) {
	vvirtual *r4;
	bool r3;
	h3d__scene__Scene r1;
	hxd__SceneEvents r2;
	r1 = r0->scene;
	if( !r1 ) goto label$1422$16;
	r1 = r0->scene;
	if( r1 == NULL ) hl_null_access();
	r2 = r1->events;
	if( !r2 ) goto label$1422$16;
	r1 = r0->scene;
	if( r1 == NULL ) hl_null_access();
	r2 = r1->events;
	if( r2 == NULL ) hl_null_access();
	r4 = r2->currentOver;
	if( r4 ? (r0 && r4->value == (vdynamic*)r0) : (r0 == NULL) ) goto label$1422$14;
	r3 = false;
	goto label$1422$15;
	label$1422$14:
	r3 = true;
	label$1422$15:
	return r3;
	label$1422$16:
	r3 = false;
	return r3;
}

bool h3d_scene_Interactive_hasFocus(h3d__scene__Interactive r0) {
	vvirtual *r4;
	bool r3;
	h3d__scene__Scene r1;
	hxd__SceneEvents r2;
	r1 = r0->scene;
	if( !r1 ) goto label$1423$16;
	r1 = r0->scene;
	if( r1 == NULL ) hl_null_access();
	r2 = r1->events;
	if( !r2 ) goto label$1423$16;
	r1 = r0->scene;
	if( r1 == NULL ) hl_null_access();
	r2 = r1->events;
	if( r2 == NULL ) hl_null_access();
	r4 = r2->currentFocus;
	if( r4 ? (r0 && r4->value == (vdynamic*)r0) : (r0 == NULL) ) goto label$1423$14;
	r3 = false;
	goto label$1423$15;
	label$1423$14:
	r3 = true;
	label$1423$15:
	return r3;
	label$1423$16:
	r3 = false;
	return r3;
}

void h3d_scene_Interactive_onTextInput(h3d__scene__Interactive r0,hxd__Event r1) {
	return;
}

void h3d_scene_Interactive_onCheck(h3d__scene__Interactive r0,hxd__Event r1) {
	return;
}

void h3d_scene_Interactive_onKeyDown(h3d__scene__Interactive r0,hxd__Event r1) {
	return;
}

void h3d_scene_Interactive_onKeyUp(h3d__scene__Interactive r0,hxd__Event r1) {
	return;
}

void h3d_scene_Interactive_onFocusLost(h3d__scene__Interactive r0,hxd__Event r1) {
	return;
}

void h3d_scene_Interactive_onFocus(h3d__scene__Interactive r0,hxd__Event r1) {
	return;
}

void h3d_scene_Interactive_onWheel(h3d__scene__Interactive r0,hxd__Event r1) {
	return;
}

void h3d_scene_Interactive_onMove(h3d__scene__Interactive r0,hxd__Event r1) {
	return;
}

void h3d_scene_Interactive_onClick(h3d__scene__Interactive r0,hxd__Event r1) {
	return;
}

void h3d_scene_Interactive_onRelease(h3d__scene__Interactive r0,hxd__Event r1) {
	return;
}

void h3d_scene_Interactive_onPush(h3d__scene__Interactive r0,hxd__Event r1) {
	return;
}

void h3d_scene_Interactive_onOut(h3d__scene__Interactive r0,hxd__Event r1) {
	return;
}

void h3d_scene_Interactive_onOver(h3d__scene__Interactive r0,hxd__Event r1) {
	return;
}

void h3d_scene_Interactive_new(h3d__scene__Interactive r0,vvirtual* r1,h3d__scene__Object r2) {
	venum *r12;
	bool r11;
	h3d__Vector r4;
	vclosure *r3;
	double *r5, *r6, *r7, *r8;
	int r10;
	r3 = r0->onOver;
	if( r3 ) goto label$1437$4;
	r3 = hl_alloc_closure_ptr(&type$2630,h3d_scene_Interactive_onOver,r0);
	r0->onOver = r3;
	label$1437$4:
	r3 = r0->onOut;
	if( r3 ) goto label$1437$8;
	r3 = hl_alloc_closure_ptr(&type$2630,h3d_scene_Interactive_onOut,r0);
	r0->onOut = r3;
	label$1437$8:
	r3 = r0->onPush;
	if( r3 ) goto label$1437$12;
	r3 = hl_alloc_closure_ptr(&type$2630,h3d_scene_Interactive_onPush,r0);
	r0->onPush = r3;
	label$1437$12:
	r3 = r0->onRelease;
	if( r3 ) goto label$1437$16;
	r3 = hl_alloc_closure_ptr(&type$2630,h3d_scene_Interactive_onRelease,r0);
	r0->onRelease = r3;
	label$1437$16:
	r3 = r0->onClick;
	if( r3 ) goto label$1437$20;
	r3 = hl_alloc_closure_ptr(&type$2630,h3d_scene_Interactive_onClick,r0);
	r0->onClick = r3;
	label$1437$20:
	r3 = r0->onMove;
	if( r3 ) goto label$1437$24;
	r3 = hl_alloc_closure_ptr(&type$2630,h3d_scene_Interactive_onMove,r0);
	r0->onMove = r3;
	label$1437$24:
	r3 = r0->onWheel;
	if( r3 ) goto label$1437$28;
	r3 = hl_alloc_closure_ptr(&type$2630,h3d_scene_Interactive_onWheel,r0);
	r0->onWheel = r3;
	label$1437$28:
	r3 = r0->onFocus;
	if( r3 ) goto label$1437$32;
	r3 = hl_alloc_closure_ptr(&type$2630,h3d_scene_Interactive_onFocus,r0);
	r0->onFocus = r3;
	label$1437$32:
	r3 = r0->onFocusLost;
	if( r3 ) goto label$1437$36;
	r3 = hl_alloc_closure_ptr(&type$2630,h3d_scene_Interactive_onFocusLost,r0);
	r0->onFocusLost = r3;
	label$1437$36:
	r3 = r0->onKeyUp;
	if( r3 ) goto label$1437$40;
	r3 = hl_alloc_closure_ptr(&type$2630,h3d_scene_Interactive_onKeyUp,r0);
	r0->onKeyUp = r3;
	label$1437$40:
	r3 = r0->onKeyDown;
	if( r3 ) goto label$1437$44;
	r3 = hl_alloc_closure_ptr(&type$2630,h3d_scene_Interactive_onKeyDown,r0);
	r0->onKeyDown = r3;
	label$1437$44:
	r3 = r0->onCheck;
	if( r3 ) goto label$1437$48;
	r3 = hl_alloc_closure_ptr(&type$2630,h3d_scene_Interactive_onCheck,r0);
	r0->onCheck = r3;
	label$1437$48:
	r3 = r0->onTextInput;
	if( r3 ) goto label$1437$52;
	r3 = hl_alloc_closure_ptr(&type$2630,h3d_scene_Interactive_onTextInput,r0);
	r0->onTextInput = r3;
	label$1437$52:
	r4 = (h3d__Vector)hl_alloc_obj(h3d__Vector__val);
	r5 = NULL;
	r6 = NULL;
	r7 = NULL;
	r8 = NULL;
	h3d_Vector_new(r4,r5,r6,r7,r8);
	r0->hitPoint = r4;
	r10 = -1;
	r0->mouseDownButton = r10;
	r11 = false;
	r0->propagateEvents = r11;
	r11 = false;
	r0->cancelEvents = r11;
	h3d_scene_Object_new(((h3d__scene__Object)r0),r2);
	r0->shape = r1;
	r12 = (venum*)global$406;
	r12 = h3d_scene_Interactive_set_cursor(r0,r12);
	return;
}

