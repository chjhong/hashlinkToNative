// Generated by HLC 4.0.0 (HL v4)
#include <hl/code.h>

hl__types__ArrayObj h3d_scene_DepthPass_getOutputs(h3d__scene__DepthPass r0) {
	String r6;
	hl__types__ArrayObj r1;
	venum *r5;
	hl_type *r3;
	vdynamic *r7;
	int r4;
	varray *r2;
	r3 = &type$2397;
	r4 = 1;
	r2 = hl_alloc_array(r3,r4);
	r6 = (String)global$653;
	r7 = NULL;
	r5 = hl_alloc_enum(&type$2397,1);
	((hxsl_Output_Value*)r5)->p0 = r6;
	((hxsl_Output_Value*)r5)->p1 = r7;
	{ venum *tmp;
	tmp = hl_alloc_enum(&type$2397,3);
	((hxsl_Output_PackFloat*)tmp)->p0 = r5;
	r5 = tmp; };
	r4 = 0;
	((venum**)(r2 + 1))[r4] = r5;
	r1 = hl_types_ArrayObj_alloc(r2);
	return r1;
}

h3d__pass__Object h3d_scene_DepthPass_draw(h3d__scene__DepthPass r0,h3d__pass__Object r1) {
	bool *r10;
	String r5;
	h3d__impl__TextureCache r3;
	vvirtual *r22;
	hl__types__ArrayObj r12;
	venum *r11;
	bool r9, r17;
	h3d__Engine r7;
	h3d__pass__Object r21;
	double r18;
	vdynamic *r16, *r19, *r20;
	int *r14, *r15;
	h3d__scene__RenderContext r4;
	int r6, r8;
	h3d__mat__Texture r2;
	r4 = r0->ctx;
	if( r4 == NULL ) hl_null_access();
	r3 = r4->textures;
	if( r3 == NULL ) hl_null_access();
	r5 = (String)global$720;
	r4 = r0->ctx;
	if( r4 == NULL ) hl_null_access();
	r7 = r4->engine;
	if( r7 == NULL ) hl_null_access();
	r6 = r7->width;
	r4 = r0->ctx;
	if( r4 == NULL ) hl_null_access();
	r7 = r4->engine;
	if( r7 == NULL ) hl_null_access();
	r8 = r7->height;
	r9 = true;
	r10 = &r9;
	r11 = NULL;
	r12 = NULL;
	r2 = h3d_impl_TextureCache_allocTarget(r3,r5,r6,r8,r10,r11,r12);
	r4 = r0->ctx;
	if( r4 == NULL ) hl_null_access();
	r7 = r4->engine;
	if( r7 == NULL ) hl_null_access();
	r14 = NULL;
	r15 = NULL;
	h3d_Engine_pushTarget(r7,r2,r14,r15);
	r4 = r0->ctx;
	if( r4 == NULL ) hl_null_access();
	r7 = r4->engine;
	if( r7 == NULL ) hl_null_access();
	r17 = r0->enableSky;
	if( !r17 ) goto label$3018$36;
	r6 = 0;
	r16 = hl_alloc_dynamic(&type$3);
	r16->v.i = r6;
	goto label$3018$38;
	label$3018$36:
	r6 = 16711680;
	r16 = hl_alloc_dynamic(&type$3);
	r16->v.i = r6;
	label$3018$38:
	r6 = 1;
	r18 = (double)r6;
	r19 = hl_alloc_dynamic(&type$6);
	r19->v.d = r18;
	r20 = NULL;
	h3d_Engine_clear(r7,r16,r19,r20);
	r21 = h3d_pass_Default_draw(((h3d__pass__Default)r0),r1);
	r4 = r0->ctx;
	if( r4 == NULL ) hl_null_access();
	r7 = r4->engine;
	if( r7 == NULL ) hl_null_access();
	h3d_Engine_popTarget(r7);
	r4 = r0->ctx;
	if( r4 == NULL ) hl_null_access();
	r6 = r0->depthMapId;
	r22 = hl_alloc_virtual(&type$2538);
	if( hl_vfields(r22)[0] ) *(h3d__mat__Texture*)(hl_vfields(r22)[0]) = (h3d__mat__Texture)r2; else hl_dyn_setp(r22->value,-18823348/*texture*/,&type$93,r2);
	h3d_scene_RenderContext_setGlobalID(r4,r6,((vdynamic*)r22));
	return r21;
}

void h3d_scene_DepthPass_new(h3d__scene__DepthPass r0) {
	String r3;
	bool r1;
	vdynamic *r4;
	int r5;
	r1 = false;
	r0->enableSky = r1;
	r3 = (String)global$719;
	h3d_pass_Default_new(((h3d__pass__Default)r0),r3);
	r3 = (String)global$720;
	r4 = hxsl_Globals_allocID(r3);
	r5 = r4 ? r4->v.i : 0;
	r0->depthMapId = r5;
	return;
}

