// Generated by HLC 4.0.0 (HL v4)
#include <hl/code.h>

int hl_types_ArrayDyn_get_length(hl__types__ArrayDyn r0) {
	hl__types__ArrayBase r2;
	int r1;
	r2 = r0->array;
	if( r2 == NULL ) hl_null_access();
	r1 = r2->length;
	return r1;
}

vdynamic* hl_types_ArrayDyn_getDyn(hl__types__ArrayDyn r0,int r1) {
	hl__types__ArrayBase r3;
	vdynamic *r2;
	r3 = r0->array;
	if( r3 == NULL ) hl_null_access();
	r2 = ((vdynamic* (*)(hl__types__ArrayBase,int))r3->$type->vobj_proto[0])(r3,r1);
	return r2;
}

void hl_types_ArrayDyn_setDyn(hl__types__ArrayDyn r0,int r1,vdynamic* r2) {
	hl__types__ArrayBase r4;
	r4 = r0->array;
	if( r4 == NULL ) hl_null_access();
	((void (*)(hl__types__ArrayBase,int,vdynamic*))r4->$type->vobj_proto[1])(r4,r1,r2);
	return;
}

void hl_types_ArrayDyn_blit(hl__types__ArrayDyn r0,int r1,hl__types__ArrayAccess r2,int r3,int r4) {
	hl__types__ArrayBase r6;
	r6 = r0->array;
	if( r6 == NULL ) hl_null_access();
	((void (*)(hl__types__ArrayBase,int,hl__types__ArrayAccess,int,int))r6->$type->vobj_proto[2])(r6,r1,r2,r3,r4);
	return;
}

hl__types__ArrayDyn hl_types_ArrayDyn_concat(hl__types__ArrayDyn r0,hl__types__ArrayDyn r1) {
	bool *r16;
	hl__types__ArrayObj r14;
	hl_type *r9;
	bool r15;
	hl__types__ArrayBase r2, r3;
	hl__types__ArrayDyn r4;
	vdynamic *r13;
	varray *r8;
	int r5, r6, r7, r10, r11, r12;
	r2 = r0->array;
	if( r1 == NULL ) hl_null_access();
	r3 = r1->array;
	if( r2 == NULL ) hl_null_access();
	r5 = r2->length;
	if( r3 == NULL ) hl_null_access();
	r7 = r3->length;
	r6 = r5 + r7;
	r9 = &type$9;
	r8 = hl_alloc_array(r9,r6);
	r7 = 0;
	r10 = r5;
	label$236$12:
	if( r7 >= r10 ) goto label$236$20;
	r11 = r7;
	++r7;
	if( r2 == NULL ) hl_null_access();
	r13 = ((vdynamic* (*)(hl__types__ArrayBase,int))r2->$type->vobj_proto[0])(r2,r11);
	((vdynamic**)(r8 + 1))[r11] = r13;
	goto label$236$12;
	label$236$20:
	r7 = 0;
	if( r3 == NULL ) hl_null_access();
	r10 = r3->length;
	label$236$23:
	if( r7 >= r10 ) goto label$236$32;
	r11 = r7;
	++r7;
	if( r3 == NULL ) hl_null_access();
	r13 = ((vdynamic* (*)(hl__types__ArrayBase,int))r3->$type->vobj_proto[0])(r3,r11);
	r12 = r11 + r5;
	((vdynamic**)(r8 + 1))[r12] = r13;
	goto label$236$23;
	label$236$32:
	r14 = hl_types_ArrayObj_alloc(r8);
	r15 = true;
	r16 = &r15;
	r4 = hl_types_ArrayDyn_alloc(((hl__types__ArrayBase)r14),r16);
	return r4;
}

String hl_types_ArrayDyn_join(hl__types__ArrayDyn r0,String r1) {
	String r2;
	hl__types__ArrayBase r3;
	r3 = r0->array;
	if( r3 == NULL ) hl_null_access();
	r2 = ((String (*)(hl__types__ArrayBase,String))r3->$type->vobj_proto[12])(r3,r1);
	return r2;
}

vdynamic* hl_types_ArrayDyn_pop(hl__types__ArrayDyn r0) {
	hl__types__ArrayBase r2;
	vdynamic *r1;
	r2 = r0->array;
	if( r2 == NULL ) hl_null_access();
	r1 = ((vdynamic* (*)(hl__types__ArrayBase))r2->$type->vobj_proto[4])(r2);
	return r1;
}

int hl_types_ArrayDyn_push(hl__types__ArrayDyn r0,vdynamic* r1) {
	hl__types__ArrayBase r3;
	int r2;
	r3 = r0->array;
	if( r3 == NULL ) hl_null_access();
	r2 = ((int (*)(hl__types__ArrayBase,vdynamic*))r3->$type->vobj_proto[3])(r3,r1);
	return r2;
}

void hl_types_ArrayDyn_reverse(hl__types__ArrayDyn r0) {
	hl__types__ArrayBase r2;
	r2 = r0->array;
	if( r2 == NULL ) hl_null_access();
	((void (*)(hl__types__ArrayBase))r2->$type->vobj_proto[13])(r2);
	return;
}

void hl_types_ArrayDyn_resize(hl__types__ArrayDyn r0,int r1) {
	hl__types__ArrayBase r3;
	r3 = r0->array;
	if( r3 == NULL ) hl_null_access();
	((void (*)(hl__types__ArrayBase,int))r3->$type->vobj_proto[14])(r3,r1);
	return;
}

vdynamic* hl_types_ArrayDyn_shift(hl__types__ArrayDyn r0) {
	hl__types__ArrayBase r2;
	vdynamic *r1;
	r2 = r0->array;
	if( r2 == NULL ) hl_null_access();
	r1 = ((vdynamic* (*)(hl__types__ArrayBase))r2->$type->vobj_proto[5])(r2);
	return r1;
}

hl__types__ArrayDyn hl_types_ArrayDyn_slice(hl__types__ArrayDyn r0,int r1,vdynamic* r2) {
	bool *r6;
	bool r5;
	hl__types__ArrayBase r4;
	hl__types__ArrayDyn r3;
	r4 = r0->array;
	if( r4 == NULL ) hl_null_access();
	r4 = ((hl__types__ArrayBase (*)(hl__types__ArrayBase,int,vdynamic*))r4->$type->vobj_proto[10])(r4,r1,r2);
	r5 = true;
	r6 = &r5;
	r3 = hl_types_ArrayDyn_alloc(r4,r6);
	return r3;
}

void hl_types_ArrayDyn_sort(hl__types__ArrayDyn r0,vclosure* r1) {
	hl__types__ArrayBase r3;
	r3 = r0->array;
	if( r3 == NULL ) hl_null_access();
	((void (*)(hl__types__ArrayBase,vclosure*))r3->$type->vobj_proto[9])(r3,r1);
	return;
}

hl__types__ArrayDyn hl_types_ArrayDyn_splice(hl__types__ArrayDyn r0,int r1,int r2) {
	bool *r6;
	bool r5;
	hl__types__ArrayBase r4;
	hl__types__ArrayDyn r3;
	r4 = r0->array;
	if( r4 == NULL ) hl_null_access();
	r4 = ((hl__types__ArrayBase (*)(hl__types__ArrayBase,int,int))r4->$type->vobj_proto[11])(r4,r1,r2);
	r5 = true;
	r6 = &r5;
	r3 = hl_types_ArrayDyn_alloc(r4,r6);
	return r3;
}

String hl_types_ArrayDyn_toString(hl__types__ArrayDyn r0) {
	String r1;
	hl__types__ArrayBase r2;
	r2 = r0->array;
	if( r2 == NULL ) hl_null_access();
	r1 = ((String (*)(hl__types__ArrayBase))r2->$type->vobj_proto[15])(r2);
	return r1;
}

void hl_types_ArrayDyn_unshift(hl__types__ArrayDyn r0,vdynamic* r1) {
	hl__types__ArrayBase r3;
	r3 = r0->array;
	if( r3 == NULL ) hl_null_access();
	((void (*)(hl__types__ArrayBase,vdynamic*))r3->$type->vobj_proto[6])(r3,r1);
	return;
}

void hl_types_ArrayDyn_insert(hl__types__ArrayDyn r0,int r1,vdynamic* r2) {
	hl__types__ArrayBase r4;
	r4 = r0->array;
	if( r4 == NULL ) hl_null_access();
	((void (*)(hl__types__ArrayBase,int,vdynamic*))r4->$type->vobj_proto[7])(r4,r1,r2);
	return;
}

bool hl_types_ArrayDyn_remove(hl__types__ArrayDyn r0,vdynamic* r1) {
	bool r2;
	hl__types__ArrayBase r3;
	r3 = r0->array;
	if( r3 == NULL ) hl_null_access();
	r2 = ((bool (*)(hl__types__ArrayBase,vdynamic*))r3->$type->vobj_proto[8])(r3,r1);
	return r2;
}

int hl_types_ArrayDyn_indexOf(hl__types__ArrayDyn r0,vdynamic* r1,vdynamic* r2) {
	hl__types__ArrayBase r5;
	vdynamic *r7;
	int r3, r4, r6;
	r3 = r2 ? r2->v.i : 0;
	r5 = r0->array;
	if( r5 == NULL ) hl_null_access();
	r4 = r5->length;
	r5 = r0->array;
	label$250$5:
	if( r3 >= r4 ) goto label$250$13;
	if( r5 == NULL ) hl_null_access();
	r7 = ((vdynamic* (*)(hl__types__ArrayBase,int))r5->$type->vobj_proto[0])(r5,r3);
	{ int i = hl_dyn_compare((vdynamic*)r7,(vdynamic*)r1); if( i != 0 ) goto label$250$11; };
	return r3;
	label$250$11:
	++r3;
	goto label$250$5;
	label$250$13:
	r6 = -1;
	return r6;
}

int hl_types_ArrayDyn_lastIndexOf(hl__types__ArrayDyn r0,vdynamic* r1,vdynamic* r2) {
	hl__types__ArrayBase r4;
	vdynamic *r8;
	int r3, r5, r6, r7;
	r4 = r0->array;
	if( r4 == NULL ) hl_null_access();
	r3 = r4->length;
	if( !r2 ) goto label$251$6;
	r5 = r2 ? r2->v.i : 0;
	goto label$251$8;
	label$251$6:
	r6 = 1;
	r5 = r3 - r6;
	label$251$8:
	if( r5 < r3 ) goto label$251$13;
	r7 = 1;
	r6 = r3 - r7;
	r5 = r6;
	goto label$251$17;
	label$251$13:
	r7 = 0;
	if( r5 >= r7 ) goto label$251$17;
	r6 = r5 + r3;
	r5 = r6;
	label$251$17:
	r7 = 0;
	if( r5 < r7 ) goto label$251$27;
	r4 = r0->array;
	if( r4 == NULL ) hl_null_access();
	r8 = ((vdynamic* (*)(hl__types__ArrayBase,int))r4->$type->vobj_proto[0])(r4,r5);
	{ int i = hl_dyn_compare((vdynamic*)r8,(vdynamic*)r1); if( i != 0 ) goto label$251$25; };
	return r5;
	label$251$25:
	--r5;
	goto label$251$17;
	label$251$27:
	r6 = -1;
	return r6;
}

hl__types__ArrayDyn hl_types_ArrayDyn_copy(hl__types__ArrayDyn r0) {
	bool *r12;
	hl__types__ArrayObj r10;
	hl_type *r5;
	bool r11;
	hl__types__ArrayBase r2;
	hl__types__ArrayDyn r9;
	vdynamic *r8;
	varray *r4;
	int r1, r3, r6, r7;
	r2 = r0->array;
	if( r2 == NULL ) hl_null_access();
	r1 = r2->length;
	r5 = &type$9;
	r4 = hl_alloc_array(r5,r1);
	r3 = 0;
	r2 = r0->array;
	if( r2 == NULL ) hl_null_access();
	r6 = r2->length;
	label$252$9:
	if( r3 >= r6 ) goto label$252$18;
	r7 = r3;
	++r3;
	r2 = r0->array;
	if( r2 == NULL ) hl_null_access();
	r8 = ((vdynamic* (*)(hl__types__ArrayBase,int))r2->$type->vobj_proto[0])(r2,r7);
	((vdynamic**)(r4 + 1))[r7] = r8;
	goto label$252$9;
	label$252$18:
	r10 = hl_types_ArrayObj_alloc(r4);
	r11 = true;
	r12 = &r11;
	r9 = hl_types_ArrayDyn_alloc(((hl__types__ArrayBase)r10),r12);
	return r9;
}

vdynamic* hl_types_ArrayDyn_iterator(hl__types__ArrayDyn r0) {
	hl__types__ArrayBase r2;
	hl__types__ArrayDynIterator r1;
	r1 = (hl__types__ArrayDynIterator)hl_alloc_obj(hl__types__ArrayDynIterator__val);
	r2 = r0->array;
	hl_types_ArrayDynIterator_new(r1,r2);
	return ((vdynamic*)r1);
}

hl__types__ArrayDyn hl_types_ArrayDyn_map(hl__types__ArrayDyn r0,vclosure* r1) {
	bool *r13;
	hl__types__ArrayObj r11;
	hl_type *r6;
	bool r12;
	hl__types__ArrayBase r3;
	hl__types__ArrayDyn r10;
	vdynamic *r9;
	varray *r5;
	int r2, r4, r7, r8;
	r3 = r0->array;
	if( r3 == NULL ) hl_null_access();
	r2 = r3->length;
	r6 = &type$9;
	r5 = hl_alloc_array(r6,r2);
	r4 = 0;
	r3 = r0->array;
	if( r3 == NULL ) hl_null_access();
	r7 = r3->length;
	label$254$9:
	if( r4 >= r7 ) goto label$254$20;
	r8 = r4;
	++r4;
	if( r1 == NULL ) hl_null_access();
	r3 = r0->array;
	if( r3 == NULL ) hl_null_access();
	r9 = ((vdynamic* (*)(hl__types__ArrayBase,int))r3->$type->vobj_proto[0])(r3,r8);
	r9 = r1->hasValue ? ((vdynamic* (*)(vdynamic*,vdynamic*))r1->fun)((vdynamic*)r1->value,r9) : ((vdynamic* (*)(vdynamic*))r1->fun)(r9);
	((vdynamic**)(r5 + 1))[r8] = r9;
	goto label$254$9;
	label$254$20:
	r11 = hl_types_ArrayObj_alloc(r5);
	r12 = true;
	r13 = &r12;
	r10 = hl_types_ArrayDyn_alloc(((hl__types__ArrayBase)r11),r13);
	return r10;
}

hl__types__ArrayDyn hl_types_ArrayDyn_filter(hl__types__ArrayDyn r0,vclosure* r1) {
	bool *r11;
	hl__types__ArrayObj r2;
	bool r9;
	hl__types__ArrayBase r6;
	hl__types__ArrayDyn r10;
	vdynamic *r8;
	int r4, r5, r7;
	r2 = (hl__types__ArrayObj)hl_alloc_obj(hl__types__ArrayObj__val);
	hl_types_ArrayObj_new(r2);
	r4 = 0;
	r6 = r0->array;
	if( r6 == NULL ) hl_null_access();
	r5 = r6->length;
	label$255$6:
	if( r4 >= r5 ) goto label$255$19;
	r6 = r0->array;
	if( r6 == NULL ) hl_null_access();
	r7 = r4;
	++r4;
	r8 = ((vdynamic* (*)(hl__types__ArrayBase,int))r6->$type->vobj_proto[0])(r6,r7);
	if( r1 == NULL ) hl_null_access();
	r9 = r1->hasValue ? ((bool (*)(vdynamic*,vdynamic*))r1->fun)((vdynamic*)r1->value,r8) : ((bool (*)(vdynamic*))r1->fun)(r8);
	if( !r9 ) goto label$255$18;
	if( r2 == NULL ) hl_null_access();
	r7 = hl_types_ArrayObj_push(r2,r8);
	label$255$18:
	goto label$255$6;
	label$255$19:
	r9 = true;
	r11 = &r9;
	r10 = hl_types_ArrayDyn_alloc(((hl__types__ArrayBase)r2),r11);
	return r10;
}

vdynamic* hl_types_ArrayDyn___get_field(hl__types__ArrayDyn r0,int r1) {
	hl__types__ArrayBase r4;
	vdynamic *r5;
	int r2, r3;
	r3 = -16280745;
	if( r1 != r3 ) goto label$256$7;
	r4 = r0->array;
	if( r4 == NULL ) hl_null_access();
	r2 = r4->length;
	r5 = hl_alloc_dynamic(&type$3);
	r5->v.i = r2;
	return r5;
	label$256$7:
	r5 = NULL;
	return r5;
}

vdynamic* hl_types_ArrayDyn___cast(hl__types__ArrayDyn r0,hl_type* r1) {
	hl_type *r4;
	bool r6;
	hl__types__ArrayBytes_Int r7, r16;
	hl__types__ArrayBase r2;
	hl__types__ArrayBytes_Float r17, r19;
	double r18;
	vdynamic *r5;
	int r10, r11, r12, r13, r14, r15;
	vbyte *r8, *r9;
	r2 = r0->array;
	r4 = r2 ? ((vdynamic*)r2)->t : &hlt_void;
	if( hl_same_type(r1,r4) != 0 ) {} else goto label$257$5;
	r2 = r0->array;
	return ((vdynamic*)r2);
	label$257$5:
	r6 = r0->allowReinterpret;
	if( r6 ) goto label$257$9;
	r5 = NULL;
	return r5;
	label$257$9:
	r7 = (hl__types__ArrayBytes_Int)hl_alloc_obj(hl__types__ArrayBytes_Int__val);
	hl_types_ArrayBytes_Int_new(r7);
	r4 = &type$33;
	if( hl_same_type(r1,r4) != 0 ) {} else goto label$257$45;
	r8 = NULL;
	r2 = r0->array;
	if( r2 == NULL ) hl_null_access();
	r10 = r2->length;
	r11 = 2;
	r10 = r10 << r11;
	r9 = hl_alloc_bytes(r10);
	r8 = r9;
	r10 = 0;
	r2 = r0->array;
	if( r2 == NULL ) hl_null_access();
	r11 = r2->length;
	label$257$25:
	if( r10 >= r11 ) goto label$257$37;
	r12 = r10;
	++r10;
	r2 = r0->array;
	if( r2 == NULL ) hl_null_access();
	r5 = ((vdynamic* (*)(hl__types__ArrayBase,int))r2->$type->vobj_proto[0])(r2,r12);
	r13 = (int)hl_dyn_casti(&r5,&type$9,&type$3);
	r15 = 2;
	r15 = r12 << r15;
	*(int*)(r8 + r15) = r13;
	goto label$257$25;
	label$257$37:
	r2 = r0->array;
	if( r2 == NULL ) hl_null_access();
	r10 = r2->length;
	r16 = hl_types_ArrayBase_allocI32(r8,r10);
	r0->array = ((hl__types__ArrayBase)r16);
	r6 = false;
	r0->allowReinterpret = r6;
	return ((vdynamic*)r16);
	label$257$45:
	r17 = (hl__types__ArrayBytes_Float)hl_alloc_obj(hl__types__ArrayBytes_Float__val);
	hl_types_ArrayBytes_Float_new(r17);
	r4 = &type$39;
	if( hl_same_type(r1,r4) != 0 ) {} else goto label$257$81;
	r8 = NULL;
	r2 = r0->array;
	if( r2 == NULL ) hl_null_access();
	r10 = r2->length;
	r11 = 3;
	r10 = r10 << r11;
	r9 = hl_alloc_bytes(r10);
	r8 = r9;
	r10 = 0;
	r2 = r0->array;
	if( r2 == NULL ) hl_null_access();
	r11 = r2->length;
	label$257$61:
	if( r10 >= r11 ) goto label$257$73;
	r12 = r10;
	++r10;
	r2 = r0->array;
	if( r2 == NULL ) hl_null_access();
	r5 = ((vdynamic* (*)(hl__types__ArrayBase,int))r2->$type->vobj_proto[0])(r2,r12);
	r18 = (double)hl_dyn_castd(&r5,&type$9);
	r14 = 3;
	r14 = r12 << r14;
	*(double*)(r8 + r14) = r18;
	goto label$257$61;
	label$257$73:
	r2 = r0->array;
	if( r2 == NULL ) hl_null_access();
	r10 = r2->length;
	r19 = hl_types_ArrayBase_allocF64(r8,r10);
	r0->array = ((hl__types__ArrayBase)r19);
	r6 = false;
	r0->allowReinterpret = r6;
	return ((vdynamic*)r19);
	label$257$81:
	r5 = NULL;
	return r5;
}

int hl_types_ArrayDyn___compare(hl__types__ArrayDyn r0,vdynamic* r1) {
	hl__types__ArrayBase r2;
	int r3;
	r2 = r0->array;
	{ int i = hl_dyn_compare((vdynamic*)r1,(vdynamic*)r2); if( i != 0 ) goto label$258$4; };
	r3 = 0;
	return r3;
	label$258$4:
	r3 = hl_ptr_compare(((vdynamic*)r0),r1);
	return r3;
}

vbyte* hl_types_ArrayDyn___string(hl__types__ArrayDyn r0) {
	String r2;
	vbyte *r1;
	r2 = hl_types_ArrayDyn_toString(r0);
	if( r2 == NULL ) hl_null_access();
	r1 = r2->bytes;
	return r1;
}

void hl_types_ArrayDyn_new(hl__types__ArrayDyn r0) {
	hl__types__ArrayObj r1;
	bool r3;
	r1 = (hl__types__ArrayObj)hl_alloc_obj(hl__types__ArrayObj__val);
	hl_types_ArrayObj_new(r1);
	r0->array = ((hl__types__ArrayBase)r1);
	r3 = true;
	r0->allowReinterpret = r3;
	return;
}

hl__types__ArrayDyn hl_types_ArrayDyn_alloc(hl__types__ArrayBase r0,bool* r1) {
	bool r2;
	hl__types__ArrayDyn r3;
	if( r1 ) goto label$2064$3;
	r2 = false;
	goto label$2064$4;
	label$2064$3:
	r2 = *r1;
	label$2064$4:
	r3 = (hl__types__ArrayDyn)hl_alloc_obj(hl__types__ArrayDyn__val);
	r3->array = r0;
	r3->allowReinterpret = r2;
	return r3;
}

