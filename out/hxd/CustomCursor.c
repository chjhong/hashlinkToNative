// Generated by HLC 4.0.0 (HL v4)
#include <hl/code.h>

void hxd_CustomCursor_reset(hxd__CustomCursor r0) {
	double r2;
	int r1;
	r1 = 0;
	r2 = (double)r1;
	r0->frameTime = r2;
	r1 = 0;
	r0->frameIndex = r1;
	return;
}

int hxd_CustomCursor_update(hxd__CustomCursor r0,double r1) {
	hl__types__ArrayObj r8;
	double r2, r3, r5;
	int r4, r6, r7;
	r2 = r0->frameTime;
	r2 = r2 + r1;
	r3 = r0->frameDelay;
	r4 = r0->frameIndex;
	label$1049$4:
	if( !(r2 >= r3) ) goto label$1049$10;
	r5 = r2 - r3;
	r2 = r5;
	++r4;
	goto label$1049$4;
	label$1049$10:
	r0->frameTime = r2;
	r8 = r0->frames;
	if( r8 == NULL ) hl_null_access();
	r7 = r8->length;
	if( r4 < r7 ) goto label$1049$20;
	r8 = r0->frames;
	if( r8 == NULL ) hl_null_access();
	r7 = r8->length;
	r6 = r7 == 0 ? 0 : r4 % r7;
	r4 = r6;
	label$1049$20:
	r7 = r0->frameIndex;
	if( r4 == r7 ) goto label$1049$24;
	r0->frameIndex = r4;
	return r4;
	label$1049$24:
	r6 = -1;
	return r6;
}

void hxd_CustomCursor_dispose(hxd__CustomCursor r0) {
	dx_cursor *r11;
	hl__types__ArrayObj r3;
	hl_type *r10;
	hxd__BitmapData r6;
	hxd__BitmapInnerDataImpl r9;
	vdynamic *r7;
	varray *r8;
	int r1, r4, r5;
	r1 = 0;
	r3 = r0->frames;
	label$1050$2:
	if( r3 == NULL ) hl_null_access();
	r5 = r3->length;
	if( r1 >= r5 ) goto label$1050$19;
	r4 = r1;
	++r1;
	r5 = r3->length;
	if( ((unsigned)r4) < ((unsigned)r5) ) goto label$1050$12;
	r6 = NULL;
	goto label$1050$15;
	label$1050$12:
	r8 = r3->array;
	r7 = ((vdynamic**)(r8 + 1))[r4];
	r6 = (hxd__BitmapData)r7;
	label$1050$15:
	if( r6 == NULL ) hl_null_access();
	r9 = NULL;
	r6->data = r9;
	goto label$1050$2;
	label$1050$19:
	r10 = &type$89;
	r1 = 0;
	r8 = hl_alloc_array(r10,r1);
	r3 = hl_types_ArrayObj_alloc(r8);
	r0->frames = r3;
	r3 = r0->alloc;
	if( !r3 ) goto label$1050$45;
	r1 = 0;
	r3 = r0->alloc;
	label$1050$28:
	if( r3 == NULL ) hl_null_access();
	r5 = r3->length;
	if( r1 >= r5 ) goto label$1050$43;
	r4 = r1;
	++r1;
	r5 = r3->length;
	if( ((unsigned)r4) < ((unsigned)r5) ) goto label$1050$38;
	r11 = NULL;
	goto label$1050$41;
	label$1050$38:
	r8 = r3->array;
	r7 = ((vdynamic**)(r8 + 1))[r4];
	r11 = (dx_cursor*)hl_dyn_castp(&r7,&type$9,&type$884);
	label$1050$41:
	dx__Cursor_Cursor_Impl__destroy(r11);
	goto label$1050$28;
	label$1050$43:
	r3 = NULL;
	r0->alloc = r3;
	label$1050$45:
	return;
}

void hxd_CustomCursor_new(hxd__CustomCursor r0,hl__types__ArrayObj r1,double r2,int r3,int r4) {
	double r5;
	int r6;
	r0->frames = r1;
	r0->speed = r2;
	r0->offsetX = r3;
	r0->offsetY = r4;
	r6 = 1;
	r5 = (double)r6;
	r5 = r5 / r2;
	r0->frameDelay = r5;
	r6 = 0;
	r5 = (double)r6;
	r0->frameTime = r5;
	r6 = 0;
	r0->frameIndex = r6;
	return;
}

