// Generated by HLC 4.0.0 (HL v4)
#include <hl/code.h>

String hxd_File_applicationPath() {
	String r0;
	r0 = (String)global$909;
	hl_throw((vdynamic*)r0);
}

void hxd_File_createDirectory(String r0) {
	sys_FileSystem_createDirectory(r0);
	return;
}

void hxd_File_load(String r0,vclosure* r1,vclosure* r2) {
	String r7, r8;
	haxe__io__Bytes r6;
	vclosure *r4;
	vdynamic *r5;
	hl_trap_ctx trap$0;
	if( r2 ) goto label$3262$3;
	r4 = &cl$3263;
	r2 = r4;
	label$3262$3:
	hl_trap(trap$0,r5,label$3262$7);
	r6 = sys_io_File_getBytes(r0);
	hl_endtrap(trap$0);
	goto label$3262$14;
	label$3262$7:
	if( !r2 ) goto label$3262$13;
	if( r2 == NULL ) hl_null_access();
	r7 = (String)global$8;
	r8 = Std_string(r5);
	r7 = String___add__(r7,r8);
	r2->hasValue ? ((void (*)(vdynamic*,String))r2->fun)((vdynamic*)r2->value,r7) : ((void (*)(String))r2->fun)(r7);
	label$3262$13:
	return;
	label$3262$14:
	if( r1 == NULL ) hl_null_access();
	r1->hasValue ? ((void (*)(vdynamic*,haxe__io__Bytes))r1->fun)((vdynamic*)r1->value,r6) : ((void (*)(haxe__io__Bytes))r1->fun)(r6);
	return;
}

void hxd_File_saveBytes(String r0,haxe__io__Bytes r1) {
	sys_io_File_saveBytes(r0,r1);
	return;
}

haxe__io__Bytes hxd_File_getBytes(String r0) {
	haxe__io__Bytes r1;
	r1 = sys_io_File_getBytes(r0);
	return r1;
}

hl__types__ArrayObj hxd_File_listDirectory(String r0) {
	hl__types__ArrayObj r1;
	r1 = sys_FileSystem_readDirectory(r0);
	return r1;
}

void hxd_File_delete(String r0) {
	vdynamic *r1;
	hl_trap_ctx trap$0;
	hl_trap(trap$0,r1,label$3258$3);
	sys_FileSystem_deleteFile(r0);
	hl_endtrap(trap$0);
	label$3258$3:
	return;
}

bool hxd_File_exists(String r0) {
	bool r1;
	r1 = sys_FileSystem_exists(r0);
	return r1;
}

void hxd_File_saveAs(haxe__io__Bytes r0,vvirtual* r1) {
	String r5, r6, r18, r22, r25;
	vdynobj *r4;
	hl__types__ArrayObj r7, r8, r12, r19;
	vvirtual *r3, *r15, *r17, *r20, *r21;
	hl_type *r10;
	bool r24;
	vclosure *r27;
	vdynamic *r16, *r23, *r26;
	int r11, r13, r14;
	varray *r9;
	if( r1 ) goto label$3255$4;
	r4 = hl_alloc_dynobj();
	r3 = hl_to_virtual(&type$1003,(vdynamic*)r4);
	r1 = r3;
	label$3255$4:
	if( r1 == NULL ) hl_null_access();
	r5 = hl_vfields(r1)[0] ? (*(String*)(hl_vfields(r1)[0])) : (String)hl_dyn_getp(r1->value,470867718/*defaultPath*/,&type$13);
	r6 = hl_vfields(r1)[3] ? (*(String*)(hl_vfields(r1)[3])) : (String)hl_dyn_getp(r1->value,272307608/*title*/,&type$13);
	r7 = hl_vfields(r1)[1] ? (*(hl__types__ArrayObj*)(hl_vfields(r1)[1])) : (hl__types__ArrayObj)hl_dyn_getp(r1->value,485691485/*fileTypes*/,&type$46);
	if( r7 ) goto label$3255$11;
	r8 = NULL;
	goto label$3255$38;
	label$3255$11:
	r10 = &type$3059;
	r11 = 0;
	r9 = hl_alloc_array(r10,r11);
	r8 = hl_types_ArrayObj_alloc(r9);
	r11 = 0;
	r12 = hl_vfields(r1)[1] ? (*(hl__types__ArrayObj*)(hl_vfields(r1)[1])) : (hl__types__ArrayObj)hl_dyn_getp(r1->value,485691485/*fileTypes*/,&type$46);
	label$3255$17:
	if( r12 == NULL ) hl_null_access();
	r14 = r12->length;
	if( r11 >= r14 ) goto label$3255$38;
	r14 = r12->length;
	if( ((unsigned)r11) < ((unsigned)r14) ) goto label$3255$25;
	r15 = NULL;
	goto label$3255$28;
	label$3255$25:
	r9 = r12->array;
	r16 = ((vdynamic**)(r9 + 1))[r11];
	r15 = hl_to_virtual(&type$3278,(vdynamic*)r16);
	label$3255$28:
	++r11;
	if( r8 == NULL ) hl_null_access();
	r17 = hl_alloc_virtual(&type$3059);
	if( r15 == NULL ) hl_null_access();
	r18 = hl_vfields(r15)[1] ? (*(String*)(hl_vfields(r15)[1])) : (String)hl_dyn_getp(r15->value,150958933/*name*/,&type$13);
	if( hl_vfields(r17)[1] ) *(String*)(hl_vfields(r17)[1]) = (String)r18; else hl_dyn_setp(r17->value,150958933/*name*/,&type$13,r18);
	r19 = hl_vfields(r15)[0] ? (*(hl__types__ArrayObj*)(hl_vfields(r15)[0])) : (hl__types__ArrayObj)hl_dyn_getp(r15->value,-378504571/*extensions*/,&type$46);
	if( hl_vfields(r17)[0] ) *(hl__types__ArrayObj*)(hl_vfields(r17)[0]) = (hl__types__ArrayObj)r19; else hl_dyn_setp(r17->value,52298172/*exts*/,&type$46,r19);
	r13 = hl_types_ArrayObj_push(r8,((vdynamic*)r17));
	goto label$3255$17;
	label$3255$38:
	r20 = hl_alloc_virtual(&type$3279);
	if( hl_vfields(r20)[0] ) *(String*)(hl_vfields(r20)[0]) = (String)r5; else hl_dyn_setp(r20->value,37969014/*fileName*/,&type$13,r5);
	if( hl_vfields(r20)[2] ) *(String*)(hl_vfields(r20)[2]) = (String)r6; else hl_dyn_setp(r20->value,272307608/*title*/,&type$13,r6);
	if( hl_vfields(r20)[1] ) *(hl__types__ArrayObj*)(hl_vfields(r20)[1]) = (hl__types__ArrayObj)r8; else hl_dyn_setp(r20->value,155623867/*filters*/,&type$46,r8);
	r21 = hl_to_virtual(&type$991,(vdynamic*)r20);
	r18 = hl_UI_saveFile(r21);
	if( r18 ) goto label$3255$46;
	return;
	label$3255$46:
	if( r1 == NULL ) hl_null_access();
	r23 = hl_vfields(r1)[2] ? (*(vdynamic**)(hl_vfields(r1)[2])) : (vdynamic*)hl_dyn_getp(r1->value,-271834233/*relativePath*/,&type$140);
	r24 = r23 ? r23->v.b : 0;
	if( !r24 ) goto label$3255$59;
	r22 = Sys_getCwd();
	r24 = StringTools_startsWith(r18,r22);
	if( !r24 ) goto label$3255$59;
	if( r18 == NULL ) hl_null_access();
	if( r22 == NULL ) hl_null_access();
	r11 = r22->length;
	r26 = NULL;
	r25 = String_substr(r18,r11,r26);
	r18 = r25;
	label$3255$59:
	r27 = (vclosure*)hl_dyn_getp((vdynamic*)r1,348891347/*saveFileName*/,&type$861);
	if( !r27 ) goto label$3255$64;
	r27 = (vclosure*)hl_dyn_getp((vdynamic*)r1,348891347/*saveFileName*/,&type$861);
	if( r27 == NULL ) hl_null_access();
	r27->hasValue ? ((void (*)(vdynamic*,String))r27->fun)((vdynamic*)r27->value,r18) : ((void (*)(String))r27->fun)(r18);
	label$3255$64:
	sys_io_File_saveBytes(r18,r0);
	return;
}

void hxd_File_browse(vclosure* r0,vvirtual* r1) {
	String r5, r17, r21, r24;
	vdynobj *r4;
	hl__types__ArrayObj r6, r7, r11, r18;
	vvirtual *r3, *r14, *r16, *r19, *r20, *r27;
	hl_type *r9;
	bool r23;
	vclosure *r26;
	vdynamic *r15, *r22, *r25;
	int r10, r12, r13;
	varray *r8;
	if( r1 ) goto label$3251$4;
	r4 = hl_alloc_dynobj();
	r3 = hl_to_virtual(&type$1003,(vdynamic*)r4);
	r1 = r3;
	label$3251$4:
	if( r1 == NULL ) hl_null_access();
	r5 = hl_vfields(r1)[0] ? (*(String*)(hl_vfields(r1)[0])) : (String)hl_dyn_getp(r1->value,470867718/*defaultPath*/,&type$13);
	r6 = hl_vfields(r1)[1] ? (*(hl__types__ArrayObj*)(hl_vfields(r1)[1])) : (hl__types__ArrayObj)hl_dyn_getp(r1->value,485691485/*fileTypes*/,&type$46);
	if( r6 ) goto label$3251$10;
	r7 = NULL;
	goto label$3251$37;
	label$3251$10:
	r9 = &type$3059;
	r10 = 0;
	r8 = hl_alloc_array(r9,r10);
	r7 = hl_types_ArrayObj_alloc(r8);
	r10 = 0;
	r11 = hl_vfields(r1)[1] ? (*(hl__types__ArrayObj*)(hl_vfields(r1)[1])) : (hl__types__ArrayObj)hl_dyn_getp(r1->value,485691485/*fileTypes*/,&type$46);
	label$3251$16:
	if( r11 == NULL ) hl_null_access();
	r13 = r11->length;
	if( r10 >= r13 ) goto label$3251$37;
	r13 = r11->length;
	if( ((unsigned)r10) < ((unsigned)r13) ) goto label$3251$24;
	r14 = NULL;
	goto label$3251$27;
	label$3251$24:
	r8 = r11->array;
	r15 = ((vdynamic**)(r8 + 1))[r10];
	r14 = hl_to_virtual(&type$3278,(vdynamic*)r15);
	label$3251$27:
	++r10;
	if( r7 == NULL ) hl_null_access();
	r16 = hl_alloc_virtual(&type$3059);
	if( r14 == NULL ) hl_null_access();
	r17 = hl_vfields(r14)[1] ? (*(String*)(hl_vfields(r14)[1])) : (String)hl_dyn_getp(r14->value,150958933/*name*/,&type$13);
	if( hl_vfields(r16)[1] ) *(String*)(hl_vfields(r16)[1]) = (String)r17; else hl_dyn_setp(r16->value,150958933/*name*/,&type$13,r17);
	r18 = hl_vfields(r14)[0] ? (*(hl__types__ArrayObj*)(hl_vfields(r14)[0])) : (hl__types__ArrayObj)hl_dyn_getp(r14->value,-378504571/*extensions*/,&type$46);
	if( hl_vfields(r16)[0] ) *(hl__types__ArrayObj*)(hl_vfields(r16)[0]) = (hl__types__ArrayObj)r18; else hl_dyn_setp(r16->value,52298172/*exts*/,&type$46,r18);
	r12 = hl_types_ArrayObj_push(r7,((vdynamic*)r16));
	goto label$3251$16;
	label$3251$37:
	r19 = hl_alloc_virtual(&type$3279);
	if( hl_vfields(r19)[0] ) *(String*)(hl_vfields(r19)[0]) = (String)r5; else hl_dyn_setp(r19->value,37969014/*fileName*/,&type$13,r5);
	if( hl_vfields(r19)[1] ) *(hl__types__ArrayObj*)(hl_vfields(r19)[1]) = (hl__types__ArrayObj)r7; else hl_dyn_setp(r19->value,155623867/*filters*/,&type$46,r7);
	if( r1 == NULL ) hl_null_access();
	r17 = hl_vfields(r1)[3] ? (*(String*)(hl_vfields(r1)[3])) : (String)hl_dyn_getp(r1->value,272307608/*title*/,&type$13);
	if( hl_vfields(r19)[2] ) *(String*)(hl_vfields(r19)[2]) = (String)r17; else hl_dyn_setp(r19->value,272307608/*title*/,&type$13,r17);
	r20 = hl_to_virtual(&type$991,(vdynamic*)r19);
	r17 = hl_UI_loadFile(r20);
	if( r17 ) goto label$3251$47;
	return;
	label$3251$47:
	r22 = hl_vfields(r1)[2] ? (*(vdynamic**)(hl_vfields(r1)[2])) : (vdynamic*)hl_dyn_getp(r1->value,-271834233/*relativePath*/,&type$140);
	r23 = r22 ? r22->v.b : 0;
	if( !r23 ) goto label$3251$59;
	r21 = Sys_getCwd();
	r23 = StringTools_startsWith(r17,r21);
	if( !r23 ) goto label$3251$59;
	if( r17 == NULL ) hl_null_access();
	if( r21 == NULL ) hl_null_access();
	r10 = r21->length;
	r25 = NULL;
	r24 = String_substr(r17,r10,r25);
	r17 = r24;
	label$3251$59:
	if( r0 == NULL ) hl_null_access();
	r4 = hl_alloc_dynobj();
	hl_dyn_setp((vdynamic*)r4,37969014/*fileName*/,&type$13,r17);
	r26 = hl_alloc_closure_ptr(&type$3277,fun$3252,r17);
	hl_dyn_setp((vdynamic*)r4,129473328/*load*/,&type$3280,r26);
	r27 = hl_to_virtual(&type$1002,(vdynamic*)r4);
	r0->hasValue ? ((void (*)(vdynamic*,vvirtual*))r0->fun)((vdynamic*)r0->value,r27) : ((void (*)(vvirtual*))r0->fun)(r27);
	return;
}

