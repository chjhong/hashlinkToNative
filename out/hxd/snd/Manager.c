// Generated by HLC 4.0.0 (HL v4)
#include <hl/code.h>

haxe__io__Bytes hxd_snd_Manager_getTmpBytes(hxd__snd__Manager r0,int r1) {
	haxe__io__Bytes r3;
	int r2;
	r3 = r0->cachedBytes;
	if( r3 == NULL ) hl_null_access();
	r2 = r3->length;
	if( r2 >= r1 ) goto label$3689$6;
	r3 = haxe_io_Bytes_alloc(r1);
	r0->cachedBytes = r3;
	label$3689$6:
	r3 = r0->cachedBytes;
	return r3;
}

haxe__io__Bytes hxd_snd_Manager_getResampleBytes(hxd__snd__Manager r0,int r1) {
	haxe__io__Bytes r3;
	int r2;
	r3 = r0->resampleBytes;
	if( r3 == NULL ) hl_null_access();
	r2 = r3->length;
	if( r2 >= r1 ) goto label$3690$6;
	r3 = haxe_io_Bytes_alloc(r1);
	r0->resampleBytes = r3;
	label$3690$6:
	r3 = r0->resampleBytes;
	return r3;
}

void hxd_snd_Manager_stopAll(hxd__snd__Manager r0) {
	hxd__snd__Channel r1;
	label$3691$0:
	r1 = r0->channels;
	if( !r1 ) goto label$3691$7;
	r1 = r0->channels;
	if( r1 == NULL ) hl_null_access();
	hxd_snd_Channel_stop(r1);
	goto label$3691$0;
	label$3691$7:
	return;
}

void hxd_snd_Manager_cleanCache(hxd__snd__Manager r0) {
	hxd__snd__Buffer r9;
	String r7;
	haxe__ds__StringMap r2;
	bool r4;
	vclosure *r5, *r8;
	vdynamic *r1, *r6;
	int r10, r11;
	r2 = r0->soundBufferMap;
	if( r2 == NULL ) hl_null_access();
	r1 = haxe_ds_StringMap_keys(r2);
	label$3692$3:
	if( r1 == NULL ) hl_null_access();
	r5 = (vclosure*)hl_dyn_getp((vdynamic*)r1,407283053/*hasNext*/,&type$118);
	if( r5 == NULL ) hl_null_access();
	r4 = r5->hasValue ? ((bool (*)(vdynamic*))r5->fun)((vdynamic*)r5->value) : ((bool (*)(void))r5->fun)();
	if( !r4 ) goto label$3692$29;
	r8 = (vclosure*)hl_dyn_getp((vdynamic*)r1,151160317/*next*/,&type$378);
	if( r8 == NULL ) hl_null_access();
	r7 = r8->hasValue ? ((String (*)(vdynamic*))r8->fun)((vdynamic*)r8->value) : ((String (*)(void))r8->fun)();
	r2 = r0->soundBufferMap;
	if( r2 == NULL ) hl_null_access();
	r6 = haxe_ds_StringMap_get(r2,r7);
	r9 = (hxd__snd__Buffer)r6;
	if( r9 == NULL ) hl_null_access();
	r10 = r9->refs;
	r11 = 0;
	if( r11 >= r10 ) goto label$3692$21;
	goto label$3692$3;
	label$3692$21:
	r2 = r0->soundBufferMap;
	if( r2 == NULL ) hl_null_access();
	r4 = haxe_ds_StringMap_remove(r2,r7);
	hxd_snd_Buffer_dispose(r9);
	r10 = r0->soundBufferCount;
	--r10;
	r0->soundBufferCount = r10;
	goto label$3692$3;
	label$3692$29:
	return;
}

void hxd_snd_Manager_dispose(hxd__snd__Manager r0) {
	hxd__snd__Buffer r13;
	haxe__ds__StringMap r10;
	hl__types__ArrayObj r4;
	vvirtual *r2;
	hxd__snd__Manager r18;
	hxd__snd__EffectDriver r15;
	bool r11;
	hxd__snd__Effect r16;
	haxe__MainEvent r17;
	hxd__snd__Source r7;
	hxd__snd__$Manager r19;
	vclosure *r12, *r14;
	vdynamic *r8;
	varray *r9;
	int r3, r5, r6;
	hxd_snd_Manager_stopAll(r0);
	r2 = r0->driver;
	if( !r2 ) goto label$3693$77;
	r3 = 0;
	r4 = r0->sources;
	label$3693$5:
	if( r4 == NULL ) hl_null_access();
	r6 = r4->length;
	if( r3 >= r6 ) goto label$3693$21;
	r5 = r3;
	++r3;
	r6 = r4->length;
	if( ((unsigned)r5) < ((unsigned)r6) ) goto label$3693$15;
	r7 = NULL;
	goto label$3693$18;
	label$3693$15:
	r9 = r4->array;
	r8 = ((vdynamic**)(r9 + 1))[r5];
	r7 = (hxd__snd__Source)r8;
	label$3693$18:
	if( r7 == NULL ) hl_null_access();
	hxd_snd_Source_dispose(r7);
	goto label$3693$5;
	label$3693$21:
	r10 = r0->soundBufferMap;
	if( r10 == NULL ) hl_null_access();
	r8 = haxe_ds_StringMap_iterator(r10);
	label$3693$24:
	if( r8 == NULL ) hl_null_access();
	r12 = (vclosure*)hl_dyn_getp((vdynamic*)r8,407283053/*hasNext*/,&type$118);
	if( r12 == NULL ) hl_null_access();
	r11 = r12->hasValue ? ((bool (*)(vdynamic*))r12->fun)((vdynamic*)r12->value) : ((bool (*)(void))r12->fun)();
	if( !r11 ) goto label$3693$36;
	r14 = (vclosure*)hl_dyn_getp((vdynamic*)r8,151160317/*next*/,&type$3773);
	if( r14 == NULL ) hl_null_access();
	r13 = r14->hasValue ? ((hxd__snd__Buffer (*)(vdynamic*))r14->fun)((vdynamic*)r14->value) : ((hxd__snd__Buffer (*)(void))r14->fun)();
	if( r13 == NULL ) hl_null_access();
	hxd_snd_Buffer_dispose(r13);
	goto label$3693$24;
	label$3693$36:
	r3 = 0;
	r4 = r0->freeStreamBuffers;
	label$3693$38:
	if( r4 == NULL ) hl_null_access();
	r6 = r4->length;
	if( r3 >= r6 ) goto label$3693$54;
	r5 = r3;
	++r3;
	r6 = r4->length;
	if( ((unsigned)r5) < ((unsigned)r6) ) goto label$3693$48;
	r13 = NULL;
	goto label$3693$51;
	label$3693$48:
	r9 = r4->array;
	r8 = ((vdynamic**)(r9 + 1))[r5];
	r13 = (hxd__snd__Buffer)r8;
	label$3693$51:
	if( r13 == NULL ) hl_null_access();
	hxd_snd_Buffer_dispose(r13);
	goto label$3693$38;
	label$3693$54:
	r3 = 0;
	r4 = r0->effectGC;
	label$3693$56:
	if( r4 == NULL ) hl_null_access();
	r6 = r4->length;
	if( r3 >= r6 ) goto label$3693$74;
	r5 = r3;
	++r3;
	r6 = r4->length;
	if( ((unsigned)r5) < ((unsigned)r6) ) goto label$3693$66;
	r16 = NULL;
	goto label$3693$69;
	label$3693$66:
	r9 = r4->array;
	r8 = ((vdynamic**)(r9 + 1))[r5];
	r16 = (hxd__snd__Effect)r8;
	label$3693$69:
	if( r16 == NULL ) hl_null_access();
	r15 = r16->driver;
	if( r15 == NULL ) hl_null_access();
	((void (*)(hxd__snd__EffectDriver))r15->$type->vobj_proto[1])(r15);
	goto label$3693$56;
	label$3693$74:
	r2 = r0->driver;
	if( r2 == NULL ) hl_null_access();
	if( hl_vfields(r2)[12] ) ((void (*)(vdynamic*))hl_vfields(r2)[12])(r2->value); else {
		hl_dyn_call_obj(r2->value,&type$65,-78872683/*dispose*/,NULL,NULL);
	}
	label$3693$77:
	r4 = NULL;
	r0->sources = r4;
	r10 = NULL;
	r0->soundBufferMap = r10;
	r4 = NULL;
	r0->freeStreamBuffers = r4;
	r4 = NULL;
	r0->effectGC = r4;
	r17 = r0->updateEvent;
	if( r17 == NULL ) hl_null_access();
	haxe_MainEvent_stop(r17);
	r18 = NULL;
	r19 = (hxd__snd__$Manager)global$1284;
	r19->instance = r18;
	return;
}

hxd__snd__Channel hxd_snd_Manager_play(hxd__snd__Manager r0,hxd__res__Sound r1,hxd__snd__ChannelGroup r2,hxd__snd__SoundGroup r3) {
	String r10, r11;
	vvirtual *r16, *r17;
	bool r15;
	hxd__snd__Channel r12, r14;
	hxd__snd__Data r7;
	double r13;
	hxd__snd__SoundGroup r5;
	int r8, r9;
	hxd__snd__ChannelGroup r6;
	if( r3 ) goto label$3694$3;
	r5 = r0->masterSoundGroup;
	r3 = r5;
	label$3694$3:
	if( r2 ) goto label$3694$6;
	r6 = r0->masterChannelGroup;
	r2 = r6;
	label$3694$6:
	if( r1 == NULL ) hl_null_access();
	r7 = hxd_res_Sound_getData(r1);
	if( r7 == NULL ) hl_null_access();
	r8 = r7->samples;
	r9 = 0;
	if( r8 != r9 ) goto label$3694$16;
	r10 = Std_string(((vdynamic*)r1));
	r11 = (String)global$1312;
	r10 = String___add__(r10,r11);
	hl_throw((vdynamic*)r10);
	label$3694$16:
	r12 = (hxd__snd__Channel)hl_alloc_obj(hxd__snd__Channel__val);
	hxd_snd_Channel_new(r12);
	r12->sound = r1;
	r13 = hxd_snd_Data_get_duration(r7);
	r12->duration = r13;
	r12->manager = r0;
	r12->soundGroup = r3;
	r12->channelGroup = r2;
	r14 = r0->channels;
	r12->next = r14;
	r15 = hxd_snd_Data_isLoading(r7);
	r12->isLoading = r15;
	r16 = r0->driver;
	r17 = NULL;
	if( r16 == r17 || (r16 && r17 && r16->value && r17->value && r16->value == r17->value) ) goto label$3694$33;
	r15 = false;
	goto label$3694$34;
	label$3694$33:
	r15 = true;
	label$3694$34:
	r12->isVirtual = r15;
	r0->channels = r12;
	return r12;
}

void hxd_snd_Manager_updateVirtualChannels(hxd__snd__Manager r0,double r1) {
	hl__types__ArrayObj r14;
	hxd__snd__Manager r12;
	bool r5;
	hxd__res__Sound r17;
	hxd__snd__Channel r2, r4, r8;
	hxd__snd__Data r18;
	vclosure *r11;
	double r6, r7, r9, r10;
	vdynamic *r16;
	int r13, r15;
	r2 = r0->channels;
	label$3695$1:
	if( !r2 ) goto label$3695$67;
	if( r2 == NULL ) hl_null_access();
	r5 = r2->pause;
	if( r5 ) goto label$3695$10;
	r5 = r2->isVirtual;
	if( !r5 ) goto label$3695$10;
	r5 = r2->isLoading;
	if( !r5 ) goto label$3695$13;
	label$3695$10:
	r4 = r2->next;
	r2 = r4;
	goto label$3695$1;
	label$3695$13:
	r7 = r2->lastStamp;
	r6 = r1 - r7;
	r7 = r2->position;
	r10 = 0.;
	if( !(r6 < r10) ) goto label$3695$20;
	r9 = 0.;
	goto label$3695$21;
	label$3695$20:
	r9 = r6;
	label$3695$21:
	r7 = r7 + r9;
	r7 = hxd_snd_Channel_set_position(r2,r7);
	r2->lastStamp = r1;
	r4 = r2->next;
	label$3695$25:
	if( r2 == NULL ) hl_null_access();
	r6 = r2->position;
	r7 = r2->duration;
	if( !(r6 >= r7) ) goto label$3695$65;
	r6 = r2->position;
	r7 = r2->duration;
	r6 = r6 - r7;
	r6 = hxd_snd_Channel_set_position(r2,r6);
	r11 = r2->onEnd;
	if( r11 == NULL ) hl_null_access();
	r11->hasValue ? ((void (*)(vdynamic*))r11->fun)((vdynamic*)r11->value) : ((void (*)(void))r11->fun)();
	if( !r4 ) goto label$3695$43;
	if( r4 == NULL ) hl_null_access();
	r12 = r4->manager;
	if( r12 ) goto label$3695$43;
	r8 = NULL;
	r4 = r8;
	label$3695$43:
	r14 = r2->queue;
	if( r14 == NULL ) hl_null_access();
	r13 = r14->length;
	r15 = 0;
	if( r15 >= r13 ) goto label$3695$60;
	r14 = r2->queue;
	if( r14 == NULL ) hl_null_access();
	r16 = hl_types_ArrayObj_shift(r14);
	r17 = (hxd__res__Sound)r16;
	r2->sound = r17;
	r17 = r2->sound;
	if( r17 == NULL ) hl_null_access();
	r18 = hxd_res_Sound_getData(r17);
	if( r18 == NULL ) hl_null_access();
	r6 = hxd_snd_Data_get_duration(r18);
	r2->duration = r6;
	goto label$3695$64;
	label$3695$60:
	r5 = r2->loop;
	if( r5 ) goto label$3695$64;
	hxd_snd_Manager_releaseChannel(r0,r2);
	goto label$3695$65;
	label$3695$64:
	goto label$3695$25;
	label$3695$65:
	r2 = r4;
	goto label$3695$1;
	label$3695$67:
	return;
}

void hxd_snd_Manager_update(hxd__snd__Manager r0) {
	bool *r43;
	String r42, r49;
	hxd__snd__Buffer r16, r20;
	haxe__ds__ObjectMap r38;
	hxd__snd__openal__SourceHandle r17;
	haxe__ds__StringMap r64;
	hl__types__ArrayObj r6, r9, r27;
	vvirtual *r3;
	hxd__snd__EffectDriver r58;
	bool r15, r44;
	hxd__snd__Listener r60;
	hxd__snd__Effect r45, r50, r51, r53, r54, r55, r56, r57;
	hxd__res__Sound r21;
	hxd__snd__Source r10, r13;
	hxd__snd__Channel r12, r14, r23, r30, r31, r32, r33, r36, r37;
	h3d__Vector r59, r61, r62, r63;
	hxd__snd__$Manager r26;
	hxd__snd__Data r22;
	hxd__snd__SoundGroup r39;
	vclosure *r24, *r29, *r52, *r65, *r67;
	double r1, r25, r46;
	int *r47;
	vdynamic *r4, *r40, *r41, *r66;
	vbyte *r48;
	hxd__snd__ChannelGroup r28;
	varray *r11;
	int r5, r7, r8, r18, r19, r34, r35;
	r1 = hl_sys_time();
	r0->now = r1;
	r3 = r0->driver;
	if( r3 ) goto label$3696$7;
	r1 = r0->now;
	hxd_snd_Manager_updateVirtualChannels(r0,r1);
	return;
	label$3696$7:
	r5 = 0;
	r6 = r0->sources;
	label$3696$9:
	if( r6 == NULL ) hl_null_access();
	r8 = r6->length;
	if( r5 >= r8 ) goto label$3696$227;
	r8 = r6->length;
	if( ((unsigned)r5) < ((unsigned)r8) ) goto label$3696$17;
	r10 = NULL;
	goto label$3696$20;
	label$3696$17:
	r11 = r6->array;
	r4 = ((vdynamic**)(r11 + 1))[r5];
	r10 = (hxd__snd__Source)r4;
	label$3696$20:
	++r5;
	if( r10 == NULL ) hl_null_access();
	r12 = r10->channel;
	if( r12 ) goto label$3696$25;
	goto label$3696$9;
	label$3696$25:
	if( r12 == NULL ) hl_null_access();
	r15 = r12->positionChanged;
	if( !r15 ) goto label$3696$30;
	hxd_snd_Manager_releaseSource(r0,r10);
	goto label$3696$9;
	label$3696$30:
	r16 = NULL;
	r3 = r0->driver;
	if( r3 == NULL ) hl_null_access();
	r17 = r10->handle;
	if( hl_vfields(r3)[9] ) r7 = ((int (*)(vdynamic*,hxd__snd__openal__SourceHandle))hl_vfields(r3)[9])(r3->value,r17); else {
		void *args[] = {r17};
		vdynamic ret;
		hl_dyn_call_obj(r3->value,&type$760,-6927178/*getProcessedBuffers*/,args,&ret);
		r7 = (int)ret.v.i;
	}
	r8 = 0;
	label$3696$36:
	if( r8 >= r7 ) goto label$3696$64;
	++r8;
	r20 = hxd_snd_Manager_unqueueBuffer(r0,r10);
	r16 = r20;
	if( r20 == NULL ) hl_null_access();
	r15 = r20->isEnd;
	if( !r15 ) goto label$3696$63;
	if( r12 == NULL ) hl_null_access();
	r21 = r20->sound;
	r12->sound = r21;
	r21 = r20->sound;
	if( r21 == NULL ) hl_null_access();
	r22 = hxd_res_Sound_getData(r21);
	if( r22 == NULL ) hl_null_access();
	r1 = hxd_snd_Data_get_duration(r22);
	r12->duration = r1;
	r1 = r12->duration;
	r1 = hxd_snd_Channel_set_position(r12,r1);
	r15 = false;
	r12->positionChanged = r15;
	r24 = r12->onEnd;
	if( r24 == NULL ) hl_null_access();
	r24->hasValue ? ((void (*)(vdynamic*))r24->fun)((vdynamic*)r24->value) : ((void (*)(void))r24->fun)();
	if( r10 == NULL ) hl_null_access();
	r18 = 0;
	r10->start = r18;
	label$3696$63:
	goto label$3696$36;
	label$3696$64:
	if( r10 == NULL ) hl_null_access();
	r9 = r10->buffers;
	if( r9 == NULL ) hl_null_access();
	r8 = r9->length;
	r18 = 0;
	if( r8 != r18 ) goto label$3696$121;
	if( r16 == NULL ) hl_null_access();
	r15 = r16->isEnd;
	if( r15 ) goto label$3696$84;
	if( r12 == NULL ) hl_null_access();
	r8 = r16->start;
	r18 = r16->samples;
	r8 = r8 + r18;
	r1 = (double)r8;
	r8 = r16->sampleRate;
	r25 = (double)r8;
	r1 = r1 / r25;
	r1 = hxd_snd_Channel_set_position(r12,r1);
	hxd_snd_Manager_releaseSource(r0,r10);
	goto label$3696$120;
	label$3696$84:
	if( r12 == NULL ) hl_null_access();
	r9 = r12->queue;
	if( r9 == NULL ) hl_null_access();
	r8 = r9->length;
	r18 = 0;
	if( r18 >= r8 ) goto label$3696$112;
	r9 = r12->queue;
	if( r9 == NULL ) hl_null_access();
	r8 = 0;
	r18 = r9->length;
	if( ((unsigned)r8) < ((unsigned)r18) ) goto label$3696$97;
	r21 = NULL;
	goto label$3696$100;
	label$3696$97:
	r11 = r9->array;
	r4 = ((vdynamic**)(r11 + 1))[r8];
	r21 = (hxd__res__Sound)r4;
	label$3696$100:
	r12->sound = r21;
	r21 = r12->sound;
	if( r21 == NULL ) hl_null_access();
	r22 = hxd_res_Sound_getData(r21);
	if( r22 == NULL ) hl_null_access();
	r1 = hxd_snd_Data_get_duration(r22);
	r12->duration = r1;
	r8 = 0;
	r1 = (double)r8;
	r1 = hxd_snd_Channel_set_position(r12,r1);
	hxd_snd_Manager_releaseSource(r0,r10);
	goto label$3696$120;
	label$3696$112:
	r15 = r12->loop;
	if( !r15 ) goto label$3696$119;
	r8 = 0;
	r1 = (double)r8;
	r1 = hxd_snd_Channel_set_position(r12,r1);
	hxd_snd_Manager_releaseSource(r0,r10);
	goto label$3696$120;
	label$3696$119:
	hxd_snd_Manager_releaseChannel(r0,r12);
	label$3696$120:
	goto label$3696$9;
	label$3696$121:
	if( r12 == NULL ) hl_null_access();
	r9 = r10->buffers;
	if( r9 == NULL ) hl_null_access();
	r8 = 0;
	r18 = r9->length;
	if( ((unsigned)r8) < ((unsigned)r18) ) goto label$3696$129;
	r20 = NULL;
	goto label$3696$132;
	label$3696$129:
	r11 = r9->array;
	r4 = ((vdynamic**)(r11 + 1))[r8];
	r20 = (hxd__snd__Buffer)r4;
	label$3696$132:
	if( r20 == NULL ) hl_null_access();
	r21 = r20->sound;
	r12->sound = r21;
	r21 = r12->sound;
	if( r21 == NULL ) hl_null_access();
	r22 = hxd_res_Sound_getData(r21);
	if( r22 == NULL ) hl_null_access();
	r1 = hxd_snd_Data_get_duration(r22);
	r12->duration = r1;
	r3 = r0->driver;
	if( r3 == NULL ) hl_null_access();
	r17 = r10->handle;
	if( hl_vfields(r3)[10] ) r8 = ((int (*)(vdynamic*,hxd__snd__openal__SourceHandle))hl_vfields(r3)[10])(r3->value,r17); else {
		void *args[] = {r17};
		vdynamic ret;
		hl_dyn_call_obj(r3->value,&type$760,189320139/*getPlayedSampleCount*/,args,&ret);
		r8 = (int)ret.v.i;
	}
	r19 = 0;
	if( r8 >= r19 ) goto label$3696$149;
	r18 = 0;
	r8 = r18;
	label$3696$149:
	r18 = r10->start;
	r18 = r18 + r8;
	r1 = (double)r18;
	r9 = r10->buffers;
	if( r9 == NULL ) hl_null_access();
	r18 = 0;
	r19 = r9->length;
	if( ((unsigned)r18) < ((unsigned)r19) ) goto label$3696$159;
	r20 = NULL;
	goto label$3696$162;
	label$3696$159:
	r11 = r9->array;
	r4 = ((vdynamic**)(r11 + 1))[r18];
	r20 = (hxd__snd__Buffer)r4;
	label$3696$162:
	if( r20 == NULL ) hl_null_access();
	r18 = r20->sampleRate;
	r25 = (double)r18;
	r1 = r1 / r25;
	r1 = hxd_snd_Channel_set_position(r12,r1);
	r15 = false;
	r12->positionChanged = r15;
	r9 = r10->buffers;
	if( r9 == NULL ) hl_null_access();
	r18 = r9->length;
	r26 = (hxd__snd__$Manager)global$1284;
	r19 = r26->BUFFER_QUEUE_LENGTH;
	if( r18 >= r19 ) goto label$3696$226;
	r9 = r10->buffers;
	if( r9 == NULL ) hl_null_access();
	r27 = r10->buffers;
	if( r27 == NULL ) hl_null_access();
	r18 = r27->length;
	r19 = 1;
	r18 = r18 - r19;
	r19 = r9->length;
	if( ((unsigned)r18) < ((unsigned)r19) ) goto label$3696$186;
	r20 = NULL;
	goto label$3696$189;
	label$3696$186:
	r11 = r9->array;
	r4 = ((vdynamic**)(r11 + 1))[r18];
	r20 = (hxd__snd__Buffer)r4;
	label$3696$189:
	if( r20 == NULL ) hl_null_access();
	r15 = r20->isEnd;
	if( r15 ) goto label$3696$198;
	r21 = r20->sound;
	r18 = r20->start;
	r19 = r20->samples;
	r18 = r18 + r19;
	r15 = hxd_snd_Manager_queueBuffer(r0,r10,r21,r18);
	goto label$3696$226;
	label$3696$198:
	r9 = r12->queue;
	if( r9 == NULL ) hl_null_access();
	r18 = r9->length;
	r19 = 0;
	if( r19 >= r18 ) goto label$3696$221;
	r9 = r12->queue;
	if( r9 == NULL ) hl_null_access();
	r18 = 0;
	r19 = r9->length;
	if( ((unsigned)r18) < ((unsigned)r19) ) goto label$3696$210;
	r21 = NULL;
	goto label$3696$213;
	label$3696$210:
	r11 = r9->array;
	r4 = ((vdynamic**)(r11 + 1))[r18];
	r21 = (hxd__res__Sound)r4;
	label$3696$213:
	r18 = 0;
	r15 = hxd_snd_Manager_queueBuffer(r0,r10,r21,r18);
	if( !r15 ) goto label$3696$220;
	r9 = r12->queue;
	if( r9 == NULL ) hl_null_access();
	r4 = hl_types_ArrayObj_shift(r9);
	r21 = (hxd__res__Sound)r4;
	label$3696$220:
	goto label$3696$226;
	label$3696$221:
	r15 = r12->loop;
	if( !r15 ) goto label$3696$226;
	r21 = r20->sound;
	r18 = 0;
	r15 = hxd_snd_Manager_queueBuffer(r0,r10,r21,r18);
	label$3696$226:
	goto label$3696$9;
	label$3696$227:
	r12 = r0->channels;
	label$3696$228:
	if( !r12 ) goto label$3696$263;
	if( r12 == NULL ) hl_null_access();
	r1 = r0->now;
	hxd_snd_Channel_calcAudibleGain(r12,r1);
	r15 = r12->isLoading;
	if( !r15 ) goto label$3696$243;
	r21 = r12->sound;
	if( r21 == NULL ) hl_null_access();
	r22 = hxd_res_Sound_getData(r21);
	if( r22 == NULL ) hl_null_access();
	r15 = hxd_snd_Data_isLoading(r22);
	if( r15 ) goto label$3696$243;
	r15 = false;
	r12->isLoading = r15;
	label$3696$243:
	r15 = r12->pause;
	if( r15 ) goto label$3696$258;
	r15 = r12->mute;
	if( r15 ) goto label$3696$258;
	r28 = r12->channelGroup;
	if( r28 == NULL ) hl_null_access();
	r15 = r28->mute;
	if( r15 ) goto label$3696$258;
	r1 = r12->audibleGain;
	r25 = 1.0000000000000001e-005;
	if( r1 < r25 ) goto label$3696$258;
	r15 = r12->isLoading;
	if( r15 ) goto label$3696$258;
	r15 = false;
	goto label$3696$259;
	label$3696$258:
	r15 = true;
	label$3696$259:
	r12->isVirtual = r15;
	r14 = r12->next;
	r12 = r14;
	goto label$3696$228;
	label$3696$263:
	r14 = r0->channels;
	r29 = hl_alloc_closure_ptr(&type$3788,hxd_snd_Manager_sortChannel,r0);
	if( r14 ) goto label$3696$269;
	r30 = NULL;
	r23 = r30;
	goto label$3696$353;
	label$3696$269:
	r5 = 1;
	r7 = 0;
	r8 = 0;
	label$3696$272:
	r15 = true;
	if( !r15 ) goto label$3696$352;
	r30 = r14;
	r31 = NULL;
	r14 = r31;
	r32 = NULL;
	r31 = r32;
	r19 = 0;
	r18 = r19;
	label$3696$282:
	if( !r30 ) goto label$3696$342;
	++r18;
	r32 = r30;
	r19 = 0;
	r7 = r19;
	r19 = 0;
	r34 = r5;
	label$3696$290:
	if( r19 >= r34 ) goto label$3696$300;
	++r19;
	++r7;
	if( r32 == NULL ) hl_null_access();
	r33 = r32->next;
	r32 = r33;
	if( r33 ) goto label$3696$299;
	goto label$3696$300;
	label$3696$299:
	goto label$3696$290;
	label$3696$300:
	r8 = r5;
	label$3696$301:
	r34 = 0;
	if( r34 < r7 ) goto label$3696$307;
	r34 = 0;
	if( r34 >= r8 ) goto label$3696$340;
	if( !r32 ) goto label$3696$340;
	label$3696$307:
	r34 = 0;
	if( r7 != r34 ) goto label$3696$315;
	r33 = r32;
	if( r32 == NULL ) hl_null_access();
	r36 = r32->next;
	r32 = r36;
	--r8;
	goto label$3696$333;
	label$3696$315:
	r34 = 0;
	if( r8 == r34 ) goto label$3696$322;
	if( !r32 ) goto label$3696$322;
	if( r29 == NULL ) hl_null_access();
	r19 = r29->hasValue ? ((int (*)(vdynamic*,hxd__snd__Channel,hxd__snd__Channel))r29->fun)((vdynamic*)r29->value,r30,r32) : ((int (*)(hxd__snd__Channel,hxd__snd__Channel))r29->fun)(r30,r32);
	r34 = 0;
	if( r34 < r19 ) goto label$3696$328;
	label$3696$322:
	r33 = r30;
	if( r30 == NULL ) hl_null_access();
	r36 = r30->next;
	r30 = r36;
	--r7;
	goto label$3696$333;
	label$3696$328:
	r33 = r32;
	if( r32 == NULL ) hl_null_access();
	r36 = r32->next;
	r32 = r36;
	--r8;
	label$3696$333:
	if( !r31 ) goto label$3696$337;
	if( r31 == NULL ) hl_null_access();
	r31->next = r33;
	goto label$3696$338;
	label$3696$337:
	r14 = r33;
	label$3696$338:
	r31 = r33;
	goto label$3696$301;
	label$3696$340:
	r30 = r32;
	goto label$3696$282;
	label$3696$342:
	if( r31 == NULL ) hl_null_access();
	r37 = NULL;
	r31->next = r37;
	r34 = 1;
	if( r34 < r18 ) goto label$3696$348;
	goto label$3696$352;
	label$3696$348:
	r34 = 2;
	r19 = r5 * r34;
	r5 = r19;
	goto label$3696$272;
	label$3696$352:
	r23 = r14;
	label$3696$353:
	r0->channels = r23;
	r38 = (haxe__ds__ObjectMap)hl_alloc_obj(haxe__ds__ObjectMap__val);
	haxe_ds_ObjectMap_new(r38);
	r5 = 0;
	r30 = r0->channels;
	label$3696$358:
	if( !r30 ) goto label$3696$400;
	if( r30 == NULL ) hl_null_access();
	r15 = r30->isVirtual;
	if( r15 ) goto label$3696$400;
	++r5;
	r6 = r0->sources;
	if( r6 == NULL ) hl_null_access();
	r7 = r6->length;
	if( r7 >= r5 ) goto label$3696$371;
	r15 = true;
	r30->isVirtual = r15;
	goto label$3696$397;
	label$3696$371:
	r39 = r30->soundGroup;
	if( r39 == NULL ) hl_null_access();
	r7 = r39->maxAudible;
	r8 = 0;
	if( r7 < r8 ) goto label$3696$397;
	if( r38 == NULL ) hl_null_access();
	r39 = r30->soundGroup;
	r4 = haxe_ds_ObjectMap_get(r38,((vdynamic*)r39));
	r40 = (vdynamic*)r4;
	if( r40 ) goto label$3696$384;
	r7 = 0;
	r41 = hl_alloc_dynamic(&type$3);
	r41->v.i = r7;
	r40 = r41;
	label$3696$384:
	r7 = r40 ? r40->v.i : 0;
	++r7;
	r40 = hl_alloc_dynamic(&type$3);
	r40->v.i = r7;
	r7 = r40 ? r40->v.i : 0;
	r39 = r30->soundGroup;
	if( r39 == NULL ) hl_null_access();
	r8 = r39->maxAudible;
	if( r8 >= r7 ) goto label$3696$395;
	r15 = true;
	r30->isVirtual = r15;
	--r5;
	label$3696$395:
	r39 = r30->soundGroup;
	haxe_ds_ObjectMap_set(r38,((vdynamic*)r39),((vdynamic*)r40));
	label$3696$397:
	r31 = r30->next;
	r30 = r31;
	goto label$3696$358;
	label$3696$400:
	r7 = 0;
	r6 = r0->sources;
	label$3696$402:
	if( r6 == NULL ) hl_null_access();
	r18 = r6->length;
	if( r7 >= r18 ) goto label$3696$424;
	r18 = r6->length;
	if( ((unsigned)r7) < ((unsigned)r18) ) goto label$3696$410;
	r10 = NULL;
	goto label$3696$413;
	label$3696$410:
	r11 = r6->array;
	r4 = ((vdynamic**)(r11 + 1))[r7];
	r10 = (hxd__snd__Source)r4;
	label$3696$413:
	++r7;
	if( r10 == NULL ) hl_null_access();
	r31 = r10->channel;
	if( !r31 ) goto label$3696$421;
	r31 = r10->channel;
	if( r31 == NULL ) hl_null_access();
	r15 = r31->isVirtual;
	if( r15 ) goto label$3696$422;
	label$3696$421:
	goto label$3696$402;
	label$3696$422:
	hxd_snd_Manager_releaseSource(r0,r10);
	goto label$3696$402;
	label$3696$424:
	r31 = r0->channels;
	label$3696$425:
	if( !r31 ) goto label$3696$490;
	if( r31 == NULL ) hl_null_access();
	r10 = r31->source;
	if( r10 ) goto label$3696$432;
	r15 = r31->isVirtual;
	if( !r15 ) goto label$3696$435;
	label$3696$432:
	r32 = r31->next;
	r31 = r32;
	goto label$3696$425;
	label$3696$435:
	r10 = NULL;
	r7 = 0;
	r6 = r0->sources;
	label$3696$438:
	if( r6 == NULL ) hl_null_access();
	r18 = r6->length;
	if( r7 >= r18 ) goto label$3696$456;
	r18 = r6->length;
	if( ((unsigned)r7) < ((unsigned)r18) ) goto label$3696$446;
	r13 = NULL;
	goto label$3696$449;
	label$3696$446:
	r11 = r6->array;
	r4 = ((vdynamic**)(r11 + 1))[r7];
	r13 = (hxd__snd__Source)r4;
	label$3696$449:
	++r7;
	if( r13 == NULL ) hl_null_access();
	r32 = r13->channel;
	if( r32 ) goto label$3696$455;
	r10 = r13;
	goto label$3696$456;
	label$3696$455:
	goto label$3696$438;
	label$3696$456:
	if( r10 ) goto label$3696$459;
	r42 = (String)global$1313;
	hl_throw((vdynamic*)r42);
	label$3696$459:
	if( r10 == NULL ) hl_null_access();
	r10->channel = r31;
	if( r31 == NULL ) hl_null_access();
	r31->source = r10;
	r21 = r31->sound;
	if( r21 == NULL ) hl_null_access();
	r22 = hxd_res_Sound_getData(r21);
	r39 = r31->soundGroup;
	if( r39 == NULL ) hl_null_access();
	r15 = r39->mono;
	r43 = &r15;
	r15 = hxd_snd_Manager_checkTargetFormat(r0,r22,r43);
	r1 = r31->position;
	r7 = r0->targetRate;
	r25 = (double)r7;
	r1 = r1 * r25;
	r7 = hl_math_floor(r1);
	r10->start = r7;
	r7 = r10->start;
	r8 = 0;
	if( r7 >= r8 ) goto label$3696$482;
	r7 = 0;
	r10->start = r7;
	label$3696$482:
	r21 = r31->sound;
	r7 = r10->start;
	r44 = hxd_snd_Manager_queueBuffer(r0,r10,r21,r7);
	r44 = false;
	r31->positionChanged = r44;
	r32 = r31->next;
	r31 = r32;
	goto label$3696$425;
	label$3696$490:
	r45 = NULL;
	r7 = 0;
	r6 = r0->sources;
	label$3696$493:
	if( r6 == NULL ) hl_null_access();
	r18 = r6->length;
	if( r7 >= r18 ) goto label$3696$643;
	r18 = r6->length;
	if( ((unsigned)r7) < ((unsigned)r18) ) goto label$3696$501;
	r10 = NULL;
	goto label$3696$504;
	label$3696$501:
	r11 = r6->array;
	r4 = ((vdynamic**)(r11 + 1))[r7];
	r10 = (hxd__snd__Source)r4;
	label$3696$504:
	++r7;
	if( r10 == NULL ) hl_null_access();
	r32 = r10->channel;
	if( r32 ) goto label$3696$509;
	goto label$3696$493;
	label$3696$509:
	if( r32 == NULL ) hl_null_access();
	r1 = r32->currentVolume;
	r25 = r10->volume;
	if( r25 == r1 ) goto label$3696$532;
	r10->volume = r1;
	r3 = r0->driver;
	if( r3 == NULL ) hl_null_access();
	r17 = r10->handle;
	if( hl_vfields(r3)[3] ) ((void (*)(vdynamic*,hxd__snd__openal__SourceHandle,double))hl_vfields(r3)[3])(r3->value,r17,r1); else {
		void *args[] = {r17,&r1};
		hl_dyn_call_obj(r3->value,&type$754,336574822/*setSourceVolume*/,args,NULL);
	}
	r8 = 1;
	r46 = (double)r8;
	if( !(r46 < r1) ) goto label$3696$532;
	r42 = (String)global$1314;
	r47 = &r8;
	r48 = hl_ftos(r1,r47);
	r49 = String___alloc__(r48,r8);
	r42 = String___add__(r42,r49);
	r49 = (String)global$1315;
	r42 = String___add__(r42,r49);
	r21 = r32->sound;
	r49 = Std_string(((vdynamic*)r21));
	r42 = String___add__(r42,r49);
	Sys_println(((vdynamic*)r42));
	label$3696$532:
	r44 = r10->playing;
	if( r44 ) goto label$3696$540;
	r3 = r0->driver;
	if( r3 == NULL ) hl_null_access();
	r17 = r10->handle;
	if( hl_vfields(r3)[8] ) ((void (*)(vdynamic*,hxd__snd__openal__SourceHandle))hl_vfields(r3)[8])(r3->value,r17); else {
		void *args[] = {r17};
		hl_dyn_call_obj(r3->value,&type$753,-118144662/*playSource*/,args,NULL);
	}
	r44 = true;
	r10->playing = r44;
	label$3696$540:
	r9 = r32->bindedEffects;
	if( r9 == NULL ) hl_null_access();
	r8 = r9->length;
	label$3696$543:
	--r8;
	r18 = 0;
	if( r8 < r18 ) goto label$3696$573;
	if( r32 == NULL ) hl_null_access();
	r9 = r32->bindedEffects;
	if( r9 == NULL ) hl_null_access();
	r19 = r9->length;
	if( ((unsigned)r8) < ((unsigned)r19) ) goto label$3696$554;
	r50 = NULL;
	goto label$3696$557;
	label$3696$554:
	r11 = r9->array;
	r4 = ((vdynamic**)(r11 + 1))[r8];
	r50 = (hxd__snd__Effect)r4;
	label$3696$557:
	r9 = r32->effects;
	if( r9 == NULL ) hl_null_access();
	r40 = NULL;
	r18 = hl_types_ArrayObj_indexOf(r9,((vdynamic*)r50),r40);
	r19 = 0;
	if( r18 >= r19 ) goto label$3696$572;
	r28 = r32->channelGroup;
	if( r28 == NULL ) hl_null_access();
	r9 = r28->effects;
	if( r9 == NULL ) hl_null_access();
	r40 = NULL;
	r18 = hl_types_ArrayObj_indexOf(r9,((vdynamic*)r50),r40);
	r19 = 0;
	if( r18 >= r19 ) goto label$3696$572;
	hxd_snd_Manager_unbindEffect(r0,r32,r10,r50);
	label$3696$572:
	goto label$3696$543;
	label$3696$573:
	r18 = 0;
	if( r32 == NULL ) hl_null_access();
	r28 = r32->channelGroup;
	if( r28 == NULL ) hl_null_access();
	r9 = r28->effects;
	label$3696$578:
	if( r9 == NULL ) hl_null_access();
	r34 = r9->length;
	if( r18 >= r34 ) goto label$3696$599;
	r34 = r9->length;
	if( ((unsigned)r18) < ((unsigned)r34) ) goto label$3696$586;
	r50 = NULL;
	goto label$3696$589;
	label$3696$586:
	r11 = r9->array;
	r4 = ((vdynamic**)(r11 + 1))[r18];
	r50 = (hxd__snd__Effect)r4;
	label$3696$589:
	++r18;
	if( r32 == NULL ) hl_null_access();
	r27 = r32->bindedEffects;
	if( r27 == NULL ) hl_null_access();
	r40 = NULL;
	r19 = hl_types_ArrayObj_indexOf(r27,((vdynamic*)r50),r40);
	r34 = 0;
	if( r19 >= r34 ) goto label$3696$598;
	hxd_snd_Manager_bindEffect(r0,r32,r10,r50);
	label$3696$598:
	goto label$3696$578;
	label$3696$599:
	r18 = 0;
	if( r32 == NULL ) hl_null_access();
	r9 = r32->effects;
	label$3696$602:
	if( r9 == NULL ) hl_null_access();
	r34 = r9->length;
	if( r18 >= r34 ) goto label$3696$623;
	r34 = r9->length;
	if( ((unsigned)r18) < ((unsigned)r34) ) goto label$3696$610;
	r50 = NULL;
	goto label$3696$613;
	label$3696$610:
	r11 = r9->array;
	r4 = ((vdynamic**)(r11 + 1))[r18];
	r50 = (hxd__snd__Effect)r4;
	label$3696$613:
	++r18;
	if( r32 == NULL ) hl_null_access();
	r27 = r32->bindedEffects;
	if( r27 == NULL ) hl_null_access();
	r40 = NULL;
	r19 = hl_types_ArrayObj_indexOf(r27,((vdynamic*)r50),r40);
	r34 = 0;
	if( r19 >= r34 ) goto label$3696$622;
	hxd_snd_Manager_bindEffect(r0,r32,r10,r50);
	label$3696$622:
	goto label$3696$602;
	label$3696$623:
	r18 = 0;
	if( r32 == NULL ) hl_null_access();
	r9 = r32->bindedEffects;
	label$3696$626:
	if( r9 == NULL ) hl_null_access();
	r34 = r9->length;
	if( r18 >= r34 ) goto label$3696$642;
	r19 = r18;
	++r18;
	r34 = r9->length;
	if( ((unsigned)r19) < ((unsigned)r34) ) goto label$3696$636;
	r51 = NULL;
	goto label$3696$639;
	label$3696$636:
	r11 = r9->array;
	r4 = ((vdynamic**)(r11 + 1))[r19];
	r51 = (hxd__snd__Effect)r4;
	label$3696$639:
	r50 = hxd_snd_Manager_regEffect(r45,r51);
	r45 = r50;
	goto label$3696$626;
	label$3696$642:
	goto label$3696$493;
	label$3696$643:
	r50 = r45;
	r52 = hl_alloc_closure_ptr(&type$3789,hxd_snd_Manager_sortEffect,r0);
	if( r45 ) goto label$3696$649;
	r51 = NULL;
	r45 = r51;
	goto label$3696$733;
	label$3696$649:
	r7 = 1;
	r8 = 0;
	r18 = 0;
	label$3696$652:
	r44 = true;
	if( !r44 ) goto label$3696$732;
	r51 = r50;
	r53 = NULL;
	r50 = r53;
	r54 = NULL;
	r53 = r54;
	r34 = 0;
	r19 = r34;
	label$3696$662:
	if( !r51 ) goto label$3696$722;
	++r19;
	r54 = r51;
	r34 = 0;
	r8 = r34;
	r34 = 0;
	r35 = r7;
	label$3696$670:
	if( r34 >= r35 ) goto label$3696$680;
	++r34;
	++r8;
	if( r54 == NULL ) hl_null_access();
	r55 = r54->next;
	r54 = r55;
	if( r55 ) goto label$3696$679;
	goto label$3696$680;
	label$3696$679:
	goto label$3696$670;
	label$3696$680:
	r18 = r7;
	label$3696$681:
	r35 = 0;
	if( r35 < r8 ) goto label$3696$687;
	r35 = 0;
	if( r35 >= r18 ) goto label$3696$720;
	if( !r54 ) goto label$3696$720;
	label$3696$687:
	r35 = 0;
	if( r8 != r35 ) goto label$3696$695;
	r55 = r54;
	if( r54 == NULL ) hl_null_access();
	r56 = r54->next;
	r54 = r56;
	--r18;
	goto label$3696$713;
	label$3696$695:
	r35 = 0;
	if( r18 == r35 ) goto label$3696$702;
	if( !r54 ) goto label$3696$702;
	if( r52 == NULL ) hl_null_access();
	r34 = r52->hasValue ? ((int (*)(vdynamic*,hxd__snd__Effect,hxd__snd__Effect))r52->fun)((vdynamic*)r52->value,r51,r54) : ((int (*)(hxd__snd__Effect,hxd__snd__Effect))r52->fun)(r51,r54);
	r35 = 0;
	if( r35 < r34 ) goto label$3696$708;
	label$3696$702:
	r55 = r51;
	if( r51 == NULL ) hl_null_access();
	r56 = r51->next;
	r51 = r56;
	--r8;
	goto label$3696$713;
	label$3696$708:
	r55 = r54;
	if( r54 == NULL ) hl_null_access();
	r56 = r54->next;
	r54 = r56;
	--r18;
	label$3696$713:
	if( !r53 ) goto label$3696$717;
	if( r53 == NULL ) hl_null_access();
	r53->next = r55;
	goto label$3696$718;
	label$3696$717:
	r50 = r55;
	label$3696$718:
	r53 = r55;
	goto label$3696$681;
	label$3696$720:
	r51 = r54;
	goto label$3696$662;
	label$3696$722:
	if( r53 == NULL ) hl_null_access();
	r57 = NULL;
	r53->next = r57;
	r35 = 1;
	if( r35 < r19 ) goto label$3696$728;
	goto label$3696$732;
	label$3696$728:
	r35 = 2;
	r34 = r7 * r35;
	r7 = r34;
	goto label$3696$652;
	label$3696$732:
	r45 = r50;
	label$3696$733:
	r51 = r45;
	label$3696$734:
	if( !r51 ) goto label$3696$743;
	if( r51 == NULL ) hl_null_access();
	r58 = r51->driver;
	if( r58 == NULL ) hl_null_access();
	((void (*)(hxd__snd__EffectDriver,hxd__snd__Effect))r58->$type->vobj_proto[2])(r58,r51);
	r53 = r51->next;
	r51 = r53;
	goto label$3696$734;
	label$3696$743:
	r7 = 0;
	r6 = r0->sources;
	label$3696$745:
	if( r6 == NULL ) hl_null_access();
	r18 = r6->length;
	if( r7 >= r18 ) goto label$3696$784;
	r18 = r6->length;
	if( ((unsigned)r7) < ((unsigned)r18) ) goto label$3696$753;
	r10 = NULL;
	goto label$3696$756;
	label$3696$753:
	r11 = r6->array;
	r4 = ((vdynamic**)(r11 + 1))[r7];
	r10 = (hxd__snd__Source)r4;
	label$3696$756:
	++r7;
	if( r10 == NULL ) hl_null_access();
	r32 = r10->channel;
	if( r32 ) goto label$3696$761;
	goto label$3696$745;
	label$3696$761:
	r8 = 0;
	if( r32 == NULL ) hl_null_access();
	r9 = r32->bindedEffects;
	label$3696$764:
	if( r9 == NULL ) hl_null_access();
	r19 = r9->length;
	if( r8 >= r19 ) goto label$3696$783;
	r19 = r9->length;
	if( ((unsigned)r8) < ((unsigned)r19) ) goto label$3696$772;
	r53 = NULL;
	goto label$3696$775;
	label$3696$772:
	r11 = r9->array;
	r4 = ((vdynamic**)(r11 + 1))[r8];
	r53 = (hxd__snd__Effect)r4;
	label$3696$775:
	++r8;
	if( r53 == NULL ) hl_null_access();
	r58 = r53->driver;
	if( r58 == NULL ) hl_null_access();
	if( r10 == NULL ) hl_null_access();
	r17 = r10->handle;
	((void (*)(hxd__snd__EffectDriver,hxd__snd__Effect,hxd__snd__openal__SourceHandle))r58->$type->vobj_proto[4])(r58,r53,r17);
	goto label$3696$764;
	label$3696$783:
	goto label$3696$745;
	label$3696$784:
	r7 = 0;
	r6 = r0->effectGC;
	label$3696$786:
	if( r6 == NULL ) hl_null_access();
	r18 = r6->length;
	if( r7 >= r18 ) goto label$3696$812;
	r18 = r6->length;
	if( ((unsigned)r7) < ((unsigned)r18) ) goto label$3696$794;
	r53 = NULL;
	goto label$3696$797;
	label$3696$794:
	r11 = r6->array;
	r4 = ((vdynamic**)(r11 + 1))[r7];
	r53 = (hxd__snd__Effect)r4;
	label$3696$797:
	++r7;
	r1 = r0->now;
	if( r53 == NULL ) hl_null_access();
	r25 = r53->lastStamp;
	r1 = r1 - r25;
	r25 = r53->retainTime;
	if( !(r25 < r1) ) goto label$3696$811;
	r58 = r53->driver;
	if( r58 == NULL ) hl_null_access();
	((void (*)(hxd__snd__EffectDriver))r58->$type->vobj_proto[1])(r58);
	r9 = r0->effectGC;
	if( r9 == NULL ) hl_null_access();
	r44 = hl_types_ArrayObj_remove(r9,((vdynamic*)r53));
	goto label$3696$812;
	label$3696$811:
	goto label$3696$786;
	label$3696$812:
	r1 = r0->now;
	hxd_snd_Manager_updateVirtualChannels(r0,r1);
	r60 = r0->listener;
	if( r60 == NULL ) hl_null_access();
	r59 = r60->direction;
	if( r59 == NULL ) hl_null_access();
	h3d_Vector_normalize(r59);
	r60 = r0->listener;
	if( r60 == NULL ) hl_null_access();
	r59 = r60->up;
	if( r59 == NULL ) hl_null_access();
	h3d_Vector_normalize(r59);
	r3 = r0->driver;
	if( r3 == NULL ) hl_null_access();
	r1 = r0->masterVolume;
	if( hl_vfields(r3)[4] ) ((void (*)(vdynamic*,double))hl_vfields(r3)[4])(r3->value,r1); else {
		void *args[] = {&r1};
		hl_dyn_call_obj(r3->value,&type$755,-239921841/*setMasterVolume*/,args,NULL);
	}
	r3 = r0->driver;
	if( r3 == NULL ) hl_null_access();
	r60 = r0->listener;
	if( r60 == NULL ) hl_null_access();
	r59 = r60->position;
	r60 = r0->listener;
	if( r60 == NULL ) hl_null_access();
	r61 = r60->direction;
	r60 = r0->listener;
	if( r60 == NULL ) hl_null_access();
	r62 = r60->up;
	r60 = r0->listener;
	if( r60 == NULL ) hl_null_access();
	r63 = r60->velocity;
	if( hl_vfields(r3)[5] ) ((void (*)(vdynamic*,h3d__Vector,h3d__Vector,h3d__Vector,h3d__Vector))hl_vfields(r3)[5])(r3->value,r59,r61,r62,r63); else {
		void *args[] = {r59,r61,r62,r63};
		hl_dyn_call_obj(r3->value,&type$756,-111360484/*setListenerParams*/,args,NULL);
	}
	r3 = r0->driver;
	if( r3 == NULL ) hl_null_access();
	if( hl_vfields(r3)[0] ) ((void (*)(vdynamic*))hl_vfields(r3)[0])(r3->value); else {
		hl_dyn_call_obj(r3->value,&type$65,-419068806/*update*/,NULL,NULL);
	}
	r7 = r0->soundBufferCount;
	r26 = (hxd__snd__$Manager)global$1284;
	r8 = r26->SOUND_BUFFER_CACHE_SIZE;
	if( r7 < r8 ) goto label$3696$884;
	r1 = hl_sys_time();
	r64 = r0->soundBufferMap;
	if( r64 == NULL ) hl_null_access();
	r4 = haxe_ds_StringMap_keys(r64);
	label$3696$854:
	if( r4 == NULL ) hl_null_access();
	r65 = (vclosure*)hl_dyn_getp((vdynamic*)r4,407283053/*hasNext*/,&type$118);
	if( r65 == NULL ) hl_null_access();
	r44 = r65->hasValue ? ((bool (*)(vdynamic*))r65->fun)((vdynamic*)r65->value) : ((bool (*)(void))r65->fun)();
	if( !r44 ) goto label$3696$884;
	r67 = (vclosure*)hl_dyn_getp((vdynamic*)r4,151160317/*next*/,&type$378);
	if( r67 == NULL ) hl_null_access();
	r42 = r67->hasValue ? ((String (*)(vdynamic*))r67->fun)((vdynamic*)r67->value) : ((String (*)(void))r67->fun)();
	r64 = r0->soundBufferMap;
	if( r64 == NULL ) hl_null_access();
	r66 = haxe_ds_StringMap_get(r64,r42);
	r16 = (hxd__snd__Buffer)r66;
	if( r16 == NULL ) hl_null_access();
	r7 = r16->refs;
	r8 = 0;
	if( r8 < r7 ) goto label$3696$875;
	r25 = r16->lastStop;
	r46 = 60.;
	r25 = r25 + r46;
	if( !(r1 < r25) ) goto label$3696$876;
	label$3696$875:
	goto label$3696$854;
	label$3696$876:
	r64 = r0->soundBufferMap;
	if( r64 == NULL ) hl_null_access();
	r44 = haxe_ds_StringMap_remove(r64,r42);
	hxd_snd_Buffer_dispose(r16);
	r7 = r0->soundBufferCount;
	--r7;
	r0->soundBufferCount = r7;
	goto label$3696$854;
	label$3696$884:
	return;
}

bool hxd_snd_Manager_progressiveDecodeBuffer(hxd__snd__Manager r0,hxd__snd__Source r1,hxd__res__Sound r2,int r3) {
	haxe__io__Bytes r16;
	bool r14;
	hxd__res__Sound r5;
	hxd__snd__$Manager r9;
	hxd__snd__Data r4;
	double r8, r10;
	int r7, r11, r12, r13, r15, r17, r18;
	if( r2 == NULL ) hl_null_access();
	r4 = hxd_res_Sound_getData(r2);
	r9 = (hxd__snd__$Manager)global$1284;
	r7 = r9->STREAM_BUFFER_SAMPLE_COUNT;
	r8 = (double)r7;
	r9 = (hxd__snd__$Manager)global$1284;
	r7 = r9->BUFFER_STREAM_SPLIT;
	r10 = (double)r7;
	r8 = r8 / r10;
	r7 = hl_math_ceil(r8);
	if( r1 == NULL ) hl_null_access();
	r11 = r1->streamStart;
	if( r11 != r3 ) goto label$3697$15;
	r5 = r1->streamSound;
	if( r5 == r2 ) goto label$3697$18;
	label$3697$15:
	r1->streamSound = r2;
	r1->streamStart = r3;
	r1->streamPos = r3;
	label$3697$18:
	r9 = (hxd__snd__$Manager)global$1284;
	r12 = r9->STREAM_BUFFER_SAMPLE_COUNT;
	r11 = r3 + r12;
	r12 = r1->streamPos;
	if( r12 != r11 ) goto label$3697$25;
	r14 = true;
	return r14;
	label$3697$25:
	if( r4 == NULL ) hl_null_access();
	r12 = hxd_snd_Data_getBytesPerSample(r4);
	r9 = (hxd__snd__$Manager)global$1284;
	r13 = r9->STREAM_BUFFER_SAMPLE_COUNT;
	r13 = r13 * r12;
	r16 = r1->streamBuffer;
	if( !r16 ) goto label$3697$36;
	r16 = r1->streamBuffer;
	if( r16 == NULL ) hl_null_access();
	r15 = r16->length;
	if( r15 >= r13 ) goto label$3697$39;
	label$3697$36:
	r16 = haxe_io_Bytes_alloc(r13);
	r1->streamBuffer = r16;
	r1->streamPos = r3;
	label$3697$39:
	r17 = r1->streamPos;
	r15 = r11 - r17;
	if( r7 >= r15 ) goto label$3697$43;
	r15 = r7;
	label$3697$43:
	r16 = r1->streamBuffer;
	r17 = r1->streamPos;
	r17 = r17 - r3;
	r17 = r17 * r12;
	r18 = r1->streamPos;
	hxd_snd_Data_decode(r4,r16,r17,r18,r15);
	r17 = r1->streamPos;
	r17 = r17 + r15;
	r1->streamPos = r17;
	r17 = r1->streamPos;
	if( r17 == r11 ) goto label$3697$56;
	r14 = false;
	goto label$3697$57;
	label$3697$56:
	r14 = true;
	label$3697$57:
	return r14;
}

bool hxd_snd_Manager_queueBuffer(hxd__snd__Manager r0,hxd__snd__Source r1,hxd__res__Sound r2,int r3) {
	hxd__snd__Buffer r8, r12;
	hxd__snd__openal__SourceHandle r14;
	hl__types__ArrayObj r18;
	hxd__snd__openal__BufferHandle r15;
	vvirtual *r13;
	bool r17;
	hxd__snd__Channel r7;
	hxd__snd__$Manager r11;
	hxd__snd__Data r4;
	double r9, r10;
	hxd__snd__SoundGroup r6;
	int r16, r19;
	if( r2 == NULL ) hl_null_access();
	r4 = hxd_res_Sound_getData(r2);
	if( r1 == NULL ) hl_null_access();
	r7 = r1->channel;
	if( r7 == NULL ) hl_null_access();
	r6 = r7->soundGroup;
	r8 = NULL;
	if( r4 == NULL ) hl_null_access();
	r9 = hxd_snd_Data_get_duration(r4);
	r11 = (hxd__snd__$Manager)global$1284;
	r10 = r11->STREAM_DURATION;
	if( !(r10 >= r9) ) goto label$3698$21;
	r12 = hxd_snd_Manager_getSoundBuffer(r0,r2,r6);
	r13 = r0->driver;
	if( r13 == NULL ) hl_null_access();
	r14 = r1->handle;
	if( r12 == NULL ) hl_null_access();
	r15 = r12->handle;
	r17 = true;
	if( hl_vfields(r13)[7] ) ((void (*)(vdynamic*,hxd__snd__openal__SourceHandle,hxd__snd__openal__BufferHandle,int,bool))hl_vfields(r13)[7])(r13->value,r14,r15,r3,r17); else {
		void *args[] = {r14,r15,&r3,&r17};
		hl_dyn_call_obj(r13->value,&type$759,-291258398/*queueBuffer*/,args,NULL);
	}
	goto label$3698$43;
	label$3698$21:
	r18 = r1->buffers;
	if( r18 == NULL ) hl_null_access();
	r16 = r18->length;
	r19 = 0;
	if( r19 >= r16 ) goto label$3698$34;
	r11 = (hxd__snd__$Manager)global$1284;
	r16 = r11->BUFFER_STREAM_SPLIT;
	r19 = 1;
	if( r19 >= r16 ) goto label$3698$34;
	r17 = hxd_snd_Manager_progressiveDecodeBuffer(r0,r1,r2,r3);
	if( r17 ) goto label$3698$34;
	r17 = false;
	return r17;
	label$3698$34:
	r12 = hxd_snd_Manager_getStreamBuffer(r0,r1,r2,r6,r3);
	r13 = r0->driver;
	if( r13 == NULL ) hl_null_access();
	r14 = r1->handle;
	if( r12 == NULL ) hl_null_access();
	r15 = r12->handle;
	r16 = 0;
	r17 = r12->isEnd;
	if( hl_vfields(r13)[7] ) ((void (*)(vdynamic*,hxd__snd__openal__SourceHandle,hxd__snd__openal__BufferHandle,int,bool))hl_vfields(r13)[7])(r13->value,r14,r15,r16,r17); else {
		void *args[] = {r14,r15,&r16,&r17};
		hl_dyn_call_obj(r13->value,&type$759,-291258398/*queueBuffer*/,args,NULL);
	}
	label$3698$43:
	r18 = r1->buffers;
	if( r18 == NULL ) hl_null_access();
	r16 = hl_types_ArrayObj_push(r18,((vdynamic*)r12));
	r17 = true;
	return r17;
}

hxd__snd__Buffer hxd_snd_Manager_unqueueBuffer(hxd__snd__Manager r0,hxd__snd__Source r1) {
	hxd__snd__Buffer r4;
	hxd__snd__openal__SourceHandle r7;
	hxd__snd__openal__BufferHandle r8;
	vvirtual *r6;
	hl__types__ArrayObj r3;
	bool r9;
	double r12;
	vdynamic *r2;
	int r10, r11;
	if( r1 == NULL ) hl_null_access();
	r3 = r1->buffers;
	if( r3 == NULL ) hl_null_access();
	r2 = hl_types_ArrayObj_shift(r3);
	r4 = (hxd__snd__Buffer)r2;
	r6 = r0->driver;
	if( r6 == NULL ) hl_null_access();
	r7 = r1->handle;
	if( r4 == NULL ) hl_null_access();
	r8 = r4->handle;
	if( hl_vfields(r6)[1] ) ((void (*)(vdynamic*,hxd__snd__openal__SourceHandle,hxd__snd__openal__BufferHandle))hl_vfields(r6)[1])(r6->value,r7,r8); else {
		void *args[] = {r7,r8};
		hl_dyn_call_obj(r6->value,&type$750,-270649682/*unqueueBuffer*/,args,NULL);
	}
	r9 = r4->isStream;
	if( !r9 ) goto label$3699$17;
	r3 = r0->freeStreamBuffers;
	if( r3 == NULL ) hl_null_access();
	hl_types_ArrayObj_unshift(r3,((vdynamic*)r4));
	goto label$3699$24;
	label$3699$17:
	r10 = r4->refs;
	--r10;
	r4->refs = r10;
	r11 = 0;
	if( r10 != r11 ) goto label$3699$24;
	r12 = hl_sys_time();
	r4->lastStop = r12;
	label$3699$24:
	return r4;
}

void hxd_snd_Manager_bindEffect(hxd__snd__Manager r0,hxd__snd__Channel r1,hxd__snd__Source r2,hxd__snd__Effect r3) {
	hxd__snd__openal__SourceHandle r10;
	hl__types__ArrayObj r8;
	hxd__snd__EffectDriver r9;
	bool r7;
	int r5, r6;
	if( r3 == NULL ) hl_null_access();
	r5 = r3->refs;
	r6 = 0;
	if( r5 != r6 ) goto label$3700$11;
	r8 = r0->effectGC;
	if( r8 == NULL ) hl_null_access();
	r7 = hl_types_ArrayObj_remove(r8,((vdynamic*)r3));
	if( r7 ) goto label$3700$11;
	r9 = r3->driver;
	if( r9 == NULL ) hl_null_access();
	((void (*)(hxd__snd__EffectDriver))r9->$type->vobj_proto[0])(r9);
	label$3700$11:
	r5 = r3->refs;
	++r5;
	r3->refs = r5;
	r9 = r3->driver;
	if( r9 == NULL ) hl_null_access();
	if( r2 == NULL ) hl_null_access();
	r10 = r2->handle;
	((void (*)(hxd__snd__EffectDriver,hxd__snd__Effect,hxd__snd__openal__SourceHandle))r9->$type->vobj_proto[3])(r9,r3,r10);
	if( r1 == NULL ) hl_null_access();
	r8 = r1->bindedEffects;
	if( r8 == NULL ) hl_null_access();
	r5 = hl_types_ArrayObj_push(r8,((vdynamic*)r3));
	return;
}

void hxd_snd_Manager_unbindEffect(hxd__snd__Manager r0,hxd__snd__Channel r1,hxd__snd__Source r2,hxd__snd__Effect r3) {
	hxd__snd__openal__SourceHandle r6;
	hl__types__ArrayObj r8;
	bool r7;
	hxd__snd__EffectDriver r5;
	double r11;
	int r9, r10;
	if( r3 == NULL ) hl_null_access();
	r5 = r3->driver;
	if( r5 == NULL ) hl_null_access();
	if( r2 == NULL ) hl_null_access();
	r6 = r2->handle;
	((void (*)(hxd__snd__EffectDriver,hxd__snd__Effect,hxd__snd__openal__SourceHandle))r5->$type->vobj_proto[5])(r5,r3,r6);
	if( r1 == NULL ) hl_null_access();
	r8 = r1->bindedEffects;
	if( r8 == NULL ) hl_null_access();
	r7 = hl_types_ArrayObj_remove(r8,((vdynamic*)r3));
	r9 = r3->refs;
	--r9;
	r3->refs = r9;
	r10 = 0;
	if( r9 != r10 ) goto label$3701$20;
	r11 = r0->now;
	r3->lastStamp = r11;
	r8 = r0->effectGC;
	if( r8 == NULL ) hl_null_access();
	r9 = hl_types_ArrayObj_push(r8,((vdynamic*)r3));
	label$3701$20:
	return;
}

void hxd_snd_Manager_releaseSource(hxd__snd__Manager r0,hxd__snd__Source r1) {
	hxd__snd__Buffer r17;
	hxd__snd__openal__SourceHandle r15;
	vvirtual *r14;
	hl__types__ArrayObj r6;
	hl_type *r12;
	bool r13;
	hxd__snd__Effect r9;
	hxd__snd__Source r4;
	hxd__snd__Channel r3;
	double r16;
	vdynamic *r10;
	varray *r11;
	int r5, r7, r8;
	if( r1 == NULL ) hl_null_access();
	r3 = r1->channel;
	if( !r3 ) goto label$3702$40;
	r5 = 0;
	r3 = r1->channel;
	if( r3 == NULL ) hl_null_access();
	r6 = r3->bindedEffects;
	if( r6 == NULL ) hl_null_access();
	r6 = hl_types_ArrayObj_copy(r6);
	label$3702$9:
	if( r6 == NULL ) hl_null_access();
	r8 = r6->length;
	if( r5 >= r8 ) goto label$3702$26;
	if( r1 == NULL ) hl_null_access();
	r3 = r1->channel;
	r7 = r5;
	++r5;
	r8 = r6->length;
	if( ((unsigned)r7) < ((unsigned)r8) ) goto label$3702$21;
	r9 = NULL;
	goto label$3702$24;
	label$3702$21:
	r11 = r6->array;
	r10 = ((vdynamic**)(r11 + 1))[r7];
	r9 = (hxd__snd__Effect)r10;
	label$3702$24:
	hxd_snd_Manager_unbindEffect(r0,r3,r1,r9);
	goto label$3702$9;
	label$3702$26:
	if( r1 == NULL ) hl_null_access();
	r3 = r1->channel;
	if( r3 == NULL ) hl_null_access();
	r12 = &type$772;
	r5 = 0;
	r11 = hl_alloc_array(r12,r5);
	r6 = hl_types_ArrayObj_alloc(r11);
	r3->bindedEffects = r6;
	r3 = r1->channel;
	if( r3 == NULL ) hl_null_access();
	r4 = NULL;
	r3->source = r4;
	r3 = NULL;
	r1->channel = r3;
	label$3702$40:
	r13 = r1->playing;
	if( !r13 ) goto label$3702$50;
	r13 = false;
	r1->playing = r13;
	r14 = r0->driver;
	if( r14 == NULL ) hl_null_access();
	r15 = r1->handle;
	if( hl_vfields(r14)[2] ) ((void (*)(vdynamic*,hxd__snd__openal__SourceHandle))hl_vfields(r14)[2])(r14->value,r15); else {
		void *args[] = {r15};
		hl_dyn_call_obj(r14->value,&type$753,467731335/*stopSource*/,args,NULL);
	}
	r16 = -1.;
	r1->volume = r16;
	label$3702$50:
	if( r1 == NULL ) hl_null_access();
	r6 = r1->buffers;
	if( r6 == NULL ) hl_null_access();
	r5 = r6->length;
	r7 = 0;
	if( r7 >= r5 ) goto label$3702$59;
	r17 = hxd_snd_Manager_unqueueBuffer(r0,r1);
	goto label$3702$50;
	label$3702$59:
	return;
}

bool hxd_snd_Manager_checkTargetFormat(hxd__snd__Manager r0,hxd__snd__Data r1,bool* r2) {
	venum *r7, *r8, *r9;
	bool r3, r5;
	int r4, r6;
	if( r2 ) goto label$3703$3;
	r3 = false;
	goto label$3703$4;
	label$3703$3:
	r3 = *r2;
	label$3703$4:
	if( r1 == NULL ) hl_null_access();
	r4 = r1->samplingRate;
	r0->targetRate = r4;
	if( r3 ) goto label$3703$11;
	r4 = r1->channels;
	r6 = 1;
	if( r4 != r6 ) goto label$3703$13;
	label$3703$11:
	r4 = 1;
	goto label$3703$14;
	label$3703$13:
	r4 = 2;
	label$3703$14:
	r0->targetChannels = r4;
	r7 = r1->sampleFormat;
	if( r7 == NULL ) hl_null_access();
	r4 = HL__ENUM_INDEX__(r7);
	switch(r4) {
		default:
			goto label$3703$28;
		case 0:
			r8 = (venum*)global$1316;
			r7 = r8;
			goto label$3703$28;
		case 1:
			r8 = (venum*)global$1309;
			r7 = r8;
			goto label$3703$28;
		case 2:
			r8 = (venum*)global$1309;
			r7 = r8;
	}
	label$3703$28:
	r0->targetFormat = r7;
	r4 = r0->targetChannels;
	r6 = r1->channels;
	if( r4 != r6 ) goto label$3703$42;
	r8 = r0->targetFormat;
	r9 = r1->sampleFormat;
	if( r8 != r9 ) goto label$3703$42;
	r4 = r0->targetRate;
	r6 = r1->samplingRate;
	if( r4 == r6 ) goto label$3703$40;
	r5 = false;
	goto label$3703$41;
	label$3703$40:
	r5 = true;
	label$3703$41:
	return r5;
	label$3703$42:
	r5 = false;
	return r5;
}

hxd__snd__Buffer hxd_snd_Manager_getSoundBuffer(hxd__snd__Manager r0,hxd__res__Sound r1,hxd__snd__SoundGroup r2) {
	hxd__snd__Buffer r15, r16;
	hxd__fs__FileEntry r7;
	String r6, r11, r12;
	vvirtual *r17;
	haxe__ds__StringMap r14;
	venum *r19;
	bool r5, r8;
	hxd__snd__Data r4;
	vclosure *r18;
	vdynamic *r13;
	int r9, r10;
	if( r1 == NULL ) hl_null_access();
	r4 = hxd_res_Sound_getData(r1);
	if( r2 == NULL ) hl_null_access();
	r5 = r2->mono;
	r7 = r1->entry;
	if( r7 == NULL ) hl_null_access();
	r6 = ((String (*)(hxd__fs__FileEntry))r7->$type->vobj_proto[15])(r7);
	if( !r5 ) goto label$3704$15;
	if( r4 == NULL ) hl_null_access();
	r9 = r4->channels;
	r10 = 1;
	if( r9 == r10 ) goto label$3704$15;
	r12 = (String)global$1317;
	r11 = String___add__(r6,r12);
	r6 = r11;
	label$3704$15:
	r14 = r0->soundBufferMap;
	if( r14 == NULL ) hl_null_access();
	r13 = haxe_ds_StringMap_get(r14,r6);
	r15 = (hxd__snd__Buffer)r13;
	if( r15 ) goto label$3704$43;
	r16 = (hxd__snd__Buffer)hl_alloc_obj(hxd__snd__Buffer__val);
	r17 = r0->driver;
	hxd_snd_Buffer_new(r16,r17);
	r15 = r16;
	r8 = false;
	r16->isStream = r8;
	r8 = true;
	r16->isEnd = r8;
	r16->sound = r1;
	r14 = r0->soundBufferMap;
	if( r14 == NULL ) hl_null_access();
	haxe_ds_StringMap_set(r14,r6,((vdynamic*)r16));
	if( r4 == NULL ) hl_null_access();
	r19 = hl_alloc_enum(&type$3784,0);
	((Enum$3784*)r19)->p0 = (hxd__snd__Data)r4;
	((Enum$3784*)r19)->p1 = (bool)r5;
	((Enum$3784*)r19)->p2 = (hxd__snd__Buffer)r16;
	((Enum$3784*)r19)->p3 = (hxd__snd__Manager)r0;
	r18 = hl_alloc_closure_ptr(&type$3783,fun$3775,r19);
	hxd_snd_Data_load(r4,r18);
	r9 = r0->soundBufferCount;
	++r9;
	r0->soundBufferCount = r9;
	label$3704$43:
	if( r15 == NULL ) hl_null_access();
	r9 = r15->refs;
	++r9;
	r15->refs = r9;
	return r15;
}

void hxd_snd_Manager_fillSoundBuffer(hxd__snd__Manager r0,hxd__snd__Buffer r1,hxd__snd__Data r2,bool* r3) {
	hxd__snd__openal__BufferHandle r15;
	vvirtual *r14;
	venum *r9;
	haxe__io__Bytes r11;
	bool r4, r6;
	hxd__snd__Data r7;
	int r8, r10, r12, r13;
	if( r3 ) goto label$3705$3;
	r4 = false;
	goto label$3705$4;
	label$3705$3:
	r4 = *r3;
	label$3705$4:
	r6 = r4;
	r3 = &r6;
	r6 = hxd_snd_Manager_checkTargetFormat(r0,r2,r3);
	if( r6 ) goto label$3705$14;
	if( r2 == NULL ) hl_null_access();
	r8 = r0->targetRate;
	r9 = r0->targetFormat;
	r10 = r0->targetChannels;
	r7 = ((hxd__snd__Data (*)(hxd__snd__Data,int,venum*,int))r2->$type->vobj_proto[0])(r2,r8,r9,r10);
	r2 = r7;
	label$3705$14:
	if( r2 == NULL ) hl_null_access();
	r8 = r2->samples;
	r10 = hxd_snd_Data_getBytesPerSample(r2);
	r8 = r8 * r10;
	r11 = hxd_snd_Manager_getTmpBytes(r0,r8);
	r10 = 0;
	r12 = 0;
	r13 = r2->samples;
	hxd_snd_Data_decode(r2,r11,r10,r12,r13);
	r14 = r0->driver;
	if( r14 == NULL ) hl_null_access();
	if( r1 == NULL ) hl_null_access();
	r15 = r1->handle;
	r9 = r0->targetFormat;
	r12 = r0->targetChannels;
	r13 = r0->targetRate;
	if( hl_vfields(r14)[6] ) ((void (*)(vdynamic*,hxd__snd__openal__BufferHandle,haxe__io__Bytes,int,venum*,int,int))hl_vfields(r14)[6])(r14->value,r15,r11,r8,r9,r12,r13); else {
		void *args[] = {r15,r11,&r8,r9,&r12,&r13};
		hl_dyn_call_obj(r14->value,&type$757,351010321/*setBufferData*/,args,NULL);
	}
	r10 = r0->targetRate;
	r1->sampleRate = r10;
	r10 = r2->samples;
	r1->samples = r10;
	return;
}

hxd__snd__Buffer hxd_snd_Manager_getStreamBuffer(hxd__snd__Manager r0,hxd__snd__Source r1,hxd__res__Sound r2,hxd__snd__SoundGroup r3,int r4) {
	bool *r22;
	hxd__snd__Buffer r10, r11;
	hxd__snd__openal__BufferHandle r27;
	vvirtual *r12;
	hl__types__ArrayObj r9;
	venum *r23;
	haxe__io__Bytes r19, r20;
	bool r13;
	hxd__res__Sound r6;
	hxd__snd__$Manager r15;
	hxd__snd__Data r5;
	vdynamic *r8;
	int r14, r16, r17, r18, r21, r24, r25, r26;
	if( r2 == NULL ) hl_null_access();
	r5 = hxd_res_Sound_getData(r2);
	r9 = r0->freeStreamBuffers;
	if( r9 == NULL ) hl_null_access();
	r8 = hl_types_ArrayObj_shift(r9);
	r10 = (hxd__snd__Buffer)r8;
	if( r10 ) goto label$3706$13;
	r11 = (hxd__snd__Buffer)hl_alloc_obj(hxd__snd__Buffer__val);
	r12 = r0->driver;
	hxd_snd_Buffer_new(r11,r12);
	r10 = r11;
	r13 = true;
	r11->isStream = r13;
	label$3706$13:
	r15 = (hxd__snd__$Manager)global$1284;
	r14 = r15->STREAM_BUFFER_SAMPLE_COUNT;
	r16 = r4 + r14;
	if( r5 == NULL ) hl_null_access();
	r17 = r5->samples;
	if( r16 < r17 ) goto label$3706$26;
	r16 = r5->samples;
	r16 = r16 - r4;
	r14 = r16;
	if( r10 == NULL ) hl_null_access();
	r13 = true;
	r10->isEnd = r13;
	goto label$3706$29;
	label$3706$26:
	if( r10 == NULL ) hl_null_access();
	r13 = false;
	r10->isEnd = r13;
	label$3706$29:
	r10->sound = r2;
	r10->samples = r14;
	r10->start = r4;
	r17 = hxd_snd_Data_getBytesPerSample(r5);
	r16 = r14 * r17;
	if( r1 == NULL ) hl_null_access();
	r6 = r1->streamSound;
	if( r6 != r2 ) goto label$3706$47;
	r17 = r1->streamStart;
	if( r17 != r4 ) goto label$3706$47;
	label$3706$39:
	r13 = hxd_snd_Manager_progressiveDecodeBuffer(r0,r1,r2,r4);
	if( r13 ) goto label$3706$43;
	goto label$3706$39;
	label$3706$43:
	if( r1 == NULL ) hl_null_access();
	r20 = r1->streamBuffer;
	r19 = r20;
	goto label$3706$51;
	label$3706$47:
	r20 = hxd_snd_Manager_getTmpBytes(r0,r16);
	r19 = r20;
	r17 = 0;
	hxd_snd_Data_decode(r5,r20,r17,r4,r14);
	label$3706$51:
	if( r3 == NULL ) hl_null_access();
	r13 = r3->mono;
	r22 = &r13;
	r13 = hxd_snd_Manager_checkTargetFormat(r0,r5,r22);
	if( r13 ) goto label$3706$81;
	r18 = r0->targetChannels;
	r17 = r14 * r18;
	r23 = r0->targetFormat;
	if( r23 == NULL ) hl_null_access();
	r18 = HL__ENUM_INDEX__(r23);
	switch(r18) {
		default:
			goto label$3706$71;
		case 0:
			r21 = 1;
			r18 = r21;
			goto label$3706$71;
		case 1:
			r21 = 2;
			r18 = r21;
			goto label$3706$71;
		case 2:
			r21 = 4;
			r18 = r21;
	}
	label$3706$71:
	r21 = r17 * r18;
	r16 = r21;
	r20 = hxd_snd_Manager_getResampleBytes(r0,r21);
	if( r5 == NULL ) hl_null_access();
	r21 = 0;
	r24 = 0;
	r25 = r0->targetRate;
	r23 = r0->targetFormat;
	r26 = r0->targetChannels;
	hxd_snd_Data_resampleBuffer(r5,r20,r21,r19,r24,r25,r23,r26,r14);
	label$3706$81:
	r12 = r0->driver;
	if( r12 == NULL ) hl_null_access();
	if( r10 == NULL ) hl_null_access();
	r27 = r10->handle;
	r23 = r0->targetFormat;
	r18 = r0->targetChannels;
	r21 = r0->targetRate;
	if( hl_vfields(r12)[6] ) ((void (*)(vdynamic*,hxd__snd__openal__BufferHandle,haxe__io__Bytes,int,venum*,int,int))hl_vfields(r12)[6])(r12->value,r27,r20,r16,r23,r18,r21); else {
		void *args[] = {r27,r20,&r16,r23,&r18,&r21};
		hl_dyn_call_obj(r12->value,&type$757,351010321/*setBufferData*/,args,NULL);
	}
	r17 = r0->targetRate;
	r10->sampleRate = r17;
	return r10;
}

int hxd_snd_Manager_sortChannel(hxd__snd__Manager r0,hxd__snd__Channel r1,hxd__snd__Channel r2) {
	bool r3, r4;
	double r6, r8;
	hxd__snd__ChannelGroup r7;
	int r5, r9;
	if( r1 == NULL ) hl_null_access();
	r3 = r1->isVirtual;
	if( r2 == NULL ) hl_null_access();
	r4 = r2->isVirtual;
	if( r3 == r4 ) goto label$3707$11;
	r3 = r1->isVirtual;
	if( !r3 ) goto label$3707$9;
	r5 = 1;
	return r5;
	label$3707$9:
	r5 = -1;
	return r5;
	label$3707$11:
	r7 = r1->channelGroup;
	if( r7 == NULL ) hl_null_access();
	r6 = r7->priority;
	r7 = r2->channelGroup;
	if( r7 == NULL ) hl_null_access();
	r8 = r7->priority;
	if( r6 == r8 ) goto label$3707$29;
	r7 = r1->channelGroup;
	if( r7 == NULL ) hl_null_access();
	r6 = r7->priority;
	r7 = r2->channelGroup;
	if( r7 == NULL ) hl_null_access();
	r8 = r7->priority;
	if( !(r6 < r8) ) goto label$3707$27;
	r5 = 1;
	return r5;
	label$3707$27:
	r5 = -1;
	return r5;
	label$3707$29:
	r6 = r1->priority;
	r8 = r2->priority;
	if( r6 == r8 ) goto label$3707$39;
	r6 = r1->priority;
	r8 = r2->priority;
	if( !(r6 < r8) ) goto label$3707$37;
	r5 = 1;
	return r5;
	label$3707$37:
	r5 = -1;
	return r5;
	label$3707$39:
	r6 = r1->audibleGain;
	r8 = r2->audibleGain;
	if( r6 == r8 ) goto label$3707$49;
	r6 = r1->audibleGain;
	r8 = r2->audibleGain;
	if( !(r6 < r8) ) goto label$3707$47;
	r5 = 1;
	return r5;
	label$3707$47:
	r5 = -1;
	return r5;
	label$3707$49:
	r5 = r1->id;
	r9 = r2->id;
	if( r5 >= r9 ) goto label$3707$54;
	r5 = 1;
	return r5;
	label$3707$54:
	r5 = -1;
	return r5;
}

int hxd_snd_Manager_sortEffect(hxd__snd__Manager r0,hxd__snd__Effect r1,hxd__snd__Effect r2) {
	int r3, r4;
	if( r2 == NULL ) hl_null_access();
	r3 = r2->priority;
	if( r1 == NULL ) hl_null_access();
	r4 = r1->priority;
	r3 = r3 - r4;
	return r3;
}

void hxd_snd_Manager_releaseChannel(hxd__snd__Manager r0,hxd__snd__Channel r1) {
	vvirtual *r15;
	hl__types__ArrayObj r9;
	hxd__snd__Manager r3;
	hxd__snd__Effect r12;
	hxd__res__Sound r16;
	hxd__snd__Source r14;
	hxd__snd__Channel r4, r6, r7;
	vdynamic *r5;
	varray *r13;
	int r8, r10, r11;
	if( r1 == NULL ) hl_null_access();
	r3 = r1->manager;
	if( r3 ) goto label$3709$4;
	return;
	label$3709$4:
	r4 = r0->channels;
	if( r4 != r1 ) goto label$3709$9;
	r4 = r1->next;
	r0->channels = r4;
	goto label$3709$20;
	label$3709$9:
	r4 = r0->channels;
	label$3709$10:
	if( r4 == NULL ) hl_null_access();
	r6 = r4->next;
	if( r6 == r1 ) goto label$3709$17;
	r6 = r4->next;
	r4 = r6;
	goto label$3709$10;
	label$3709$17:
	if( r1 == NULL ) hl_null_access();
	r7 = r1->next;
	r4->next = r7;
	label$3709$20:
	r8 = 0;
	r9 = r1->effects;
	label$3709$22:
	if( r9 == NULL ) hl_null_access();
	r11 = r9->length;
	if( r8 >= r11 ) goto label$3709$38;
	if( r1 == NULL ) hl_null_access();
	r10 = r8;
	++r8;
	r11 = r9->length;
	if( ((unsigned)r10) < ((unsigned)r11) ) goto label$3709$33;
	r12 = NULL;
	goto label$3709$36;
	label$3709$33:
	r13 = r9->array;
	r5 = ((vdynamic**)(r13 + 1))[r10];
	r12 = (hxd__snd__Effect)r5;
	label$3709$36:
	hxd_snd_ChannelBase_removeEffect(((hxd__snd__ChannelBase)r1),r12);
	goto label$3709$22;
	label$3709$38:
	if( r1 == NULL ) hl_null_access();
	r14 = r1->source;
	if( !r14 ) goto label$3709$43;
	r14 = r1->source;
	hxd_snd_Manager_releaseSource(r0,r14);
	label$3709$43:
	r6 = NULL;
	r1->next = r6;
	r3 = NULL;
	r1->manager = r3;
	r9 = NULL;
	r1->effects = r9;
	r9 = NULL;
	r1->bindedEffects = r9;
	r15 = NULL;
	r1->currentFade = r15;
	r16 = r1->sound;
	if( !r16 ) goto label$3709$60;
	if( r16 == NULL ) hl_null_access();
	r4 = r16->channel;
	if( r4 != r1 ) goto label$3709$60;
	r4 = NULL;
	r16->channel = r4;
	label$3709$60:
	return;
}

void hxd_snd_Manager_new(hxd__snd__Manager r0) {
	String r7;
	$String r5;
	hl__types__ArrayObj r13;
	haxe__ds__StringMap r12;
	vvirtual *r4;
	hl_type *r15;
	haxe__io__Bytes r21;
	bool r6;
	hxd__snd__Listener r11;
	hxd__snd__Source r20;
	hxd__snd__$Manager r18;
	hxd__snd__SoundGroup r9;
	double r8;
	hxd__snd__openal__Driver r3;
	vdynamic *r1;
	int r16, r17, r19;
	varray *r14;
	hxd__snd__ChannelGroup r10;
	hl_trap_ctx trap$0;
	hl_trap(trap$0,r1,label$3724$13);
	r3 = (hxd__snd__openal__Driver)hl_alloc_obj(hxd__snd__openal__Driver__val);
	hxd_snd_openal_Driver_new(r3);
	if( r3 ) goto label$3724$6;
	r4 = NULL;
	goto label$3724$10;
	label$3724$6:
	r4 = r3->$_f4;
	if( r4 ) goto label$3724$10;
	r4 = hl_to_virtual(&type$749,(vdynamic*)r3);
	r3->$_f4 = r4;
	label$3724$10:
	r0->driver = r4;
	hl_endtrap(trap$0);
	goto label$3724$21;
	label$3724$13:
	r5 = ($String)global$1;
	r6 = hl_BaseType_check(((hl__BaseType)r5),r1);
	if( !r6 ) goto label$3724$20;
	r7 = (String)r1;
	r4 = NULL;
	r0->driver = r4;
	goto label$3724$21;
	label$3724$20:
	hl_rethrow((vdynamic*)r1);
	label$3724$21:
	r8 = 1.;
	r0->masterVolume = r8;
	r9 = (hxd__snd__SoundGroup)hl_alloc_obj(hxd__snd__SoundGroup__val);
	r7 = (String)global$1311;
	hxd_snd_SoundGroup_new(r9,r7);
	r0->masterSoundGroup = r9;
	r10 = (hxd__snd__ChannelGroup)hl_alloc_obj(hxd__snd__ChannelGroup__val);
	r7 = (String)global$1311;
	hxd_snd_ChannelGroup_new(r10,r7);
	r0->masterChannelGroup = r10;
	r11 = (hxd__snd__Listener)hl_alloc_obj(hxd__snd__Listener__val);
	hxd_snd_Listener_new(r11);
	r0->listener = r11;
	r12 = (haxe__ds__StringMap)hl_alloc_obj(haxe__ds__StringMap__val);
	haxe_ds_StringMap_new(r12);
	r0->soundBufferMap = r12;
	r15 = &type$3766;
	r16 = 0;
	r14 = hl_alloc_array(r15,r16);
	r13 = hl_types_ArrayObj_alloc(r14);
	r0->freeStreamBuffers = r13;
	r15 = &type$772;
	r16 = 0;
	r14 = hl_alloc_array(r15,r16);
	r13 = hl_types_ArrayObj_alloc(r14);
	r0->effectGC = r13;
	r16 = 0;
	r0->soundBufferCount = r16;
	r4 = r0->driver;
	if( !r4 ) goto label$3724$69;
	r15 = &type$767;
	r16 = 0;
	r14 = hl_alloc_array(r15,r16);
	r13 = hl_types_ArrayObj_alloc(r14);
	r0->sources = r13;
	r16 = 0;
	r18 = (hxd__snd__$Manager)global$1284;
	r17 = r18->MAX_SOURCES;
	label$3724$59:
	if( r16 >= r17 ) goto label$3724$69;
	++r16;
	r13 = r0->sources;
	if( r13 == NULL ) hl_null_access();
	r20 = (hxd__snd__Source)hl_alloc_obj(hxd__snd__Source__val);
	r4 = r0->driver;
	hxd_snd_Source_new(r20,r4);
	r19 = hl_types_ArrayObj_push(r13,((vdynamic*)r20));
	goto label$3724$59;
	label$3724$69:
	r16 = 24;
	r21 = haxe_io_Bytes_alloc(r16);
	r0->cachedBytes = r21;
	r18 = (hxd__snd__$Manager)global$1284;
	r16 = r18->STREAM_BUFFER_SAMPLE_COUNT;
	r17 = 2;
	r16 = r16 * r17;
	r21 = haxe_io_Bytes_alloc(r16);
	r0->resampleBytes = r21;
	return;
}

hxd__snd__Effect hxd_snd_Manager_regEffect(hxd__snd__Effect r0,hxd__snd__Effect r1) {
	hxd__snd__Effect r2, r3;
	r2 = r0;
	label$3723$1:
	if( !r2 ) goto label$3723$9;
	if( r2 != r1 ) goto label$3723$5;
	return r0;
	label$3723$5:
	if( r2 == NULL ) hl_null_access();
	r3 = r2->next;
	r2 = r3;
	goto label$3723$1;
	label$3723$9:
	if( r1 == NULL ) hl_null_access();
	r1->next = r0;
	return r1;
}

hxd__snd__Manager hxd_snd_Manager_get() {
	bool r7;
	hxd__snd__Manager r1, r5;
	haxe__MainEvent r3;
	hxd__snd__$Manager r2;
	vclosure *r4;
	int *r6;
	r2 = (hxd__snd__$Manager)global$1284;
	r1 = r2->instance;
	if( r1 ) goto label$3722$24;
	r1 = (hxd__snd__Manager)hl_alloc_obj(hxd__snd__Manager__val);
	hxd_snd_Manager_new(r1);
	r2 = (hxd__snd__$Manager)global$1284;
	r2->instance = r1;
	r2 = (hxd__snd__$Manager)global$1284;
	r1 = r2->instance;
	if( r1 == NULL ) hl_null_access();
	r2 = (hxd__snd__$Manager)global$1284;
	r5 = r2->instance;
	if( r5 == NULL ) hl_null_access();
	r4 = hl_alloc_closure_ptr(&type$3770,hxd_snd_Manager_update,r5);
	r6 = NULL;
	r3 = haxe_MainLoop_add(r4,r6);
	r1->updateEvent = r3;
	r2 = (hxd__snd__$Manager)global$1284;
	r1 = r2->instance;
	if( r1 == NULL ) hl_null_access();
	r3 = r1->updateEvent;
	if( r3 == NULL ) hl_null_access();
	r7 = false;
	r3->isBlocking = r7;
	label$3722$24:
	r2 = (hxd__snd__$Manager)global$1284;
	r1 = r2->instance;
	return r1;
}

