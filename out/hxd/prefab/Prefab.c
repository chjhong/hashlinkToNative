// Generated by HLC 4.0.0 (HL v4)
#include <hl/code.h>

String hxd_prefab_Prefab_set_name(hxd__prefab__Prefab r0,String r1) {
	r0->name = r1;
	return r1;
}

String hxd_prefab_Prefab_set_source(hxd__prefab__Prefab r0,String r1) {
	r0->source = r1;
	return r1;
}

hxd__prefab__Prefab hxd_prefab_Prefab_set_parent(hxd__prefab__Prefab r0,hxd__prefab__Prefab r1) {
	hl__types__ArrayObj r4;
	bool r3;
	int r5;
	hxd__prefab__Prefab r2;
	r2 = r0->parent;
	if( !r2 ) goto label$1467$7;
	r2 = r0->parent;
	if( r2 == NULL ) hl_null_access();
	r4 = r2->children;
	if( r4 == NULL ) hl_null_access();
	r3 = hl_types_ArrayObj_remove(r4,((vdynamic*)r0));
	label$1467$7:
	r0->parent = r1;
	r2 = r0->parent;
	if( !r2 ) goto label$1467$15;
	r2 = r0->parent;
	if( r2 == NULL ) hl_null_access();
	r4 = r2->children;
	if( r4 == NULL ) hl_null_access();
	r5 = hl_types_ArrayObj_push(r4,((vdynamic*)r0));
	label$1467$15:
	return r1;
}

vdynamic* hxd_prefab_Prefab_iterator(hxd__prefab__Prefab r0) {
	hl__types__ArrayObj r2;
	vdynamic *r1;
	r2 = r0->children;
	if( r2 == NULL ) hl_null_access();
	r1 = hl_types_ArrayObj_iterator(r2);
	return r1;
}

void hxd_prefab_Prefab_load(hxd__prefab__Prefab r0,vdynamic* r1) {
	String r2;
	r2 = (String)global$484;
	hl_throw((vdynamic*)r2);
}

vdynamic* hxd_prefab_Prefab_save(hxd__prefab__Prefab r0) {
	String r1;
	r1 = (String)global$484;
	hl_throw((vdynamic*)r1);
}

hxd__prefab__Context hxd_prefab_Prefab_makeInstance(hxd__prefab__Prefab r0,hxd__prefab__Context r1) {
	return r1;
}

void hxd_prefab_Prefab_updateInstance(hxd__prefab__Prefab r0,hxd__prefab__Context r1,String r2) {
	return;
}

vdynamic* hxd_prefab_Prefab_saveRec(hxd__prefab__Prefab r0) {
	bool *r11;
	String r3;
	hl__types__ArrayObj r6;
	hl_type *r10;
	bool r4;
	hl__types__ArrayDyn r8;
	vdynamic *r1, *r2, *r14;
	hxd__prefab__Prefab r13;
	varray *r9;
	int r5, r7, r12;
	r1 = ((vdynamic* (*)(hxd__prefab__Prefab))r0->$type->vobj_proto[1])(r0);
	if( r1 == NULL ) hl_null_access();
	r3 = r0->type;
	hl_dyn_setp((vdynamic*)r1,218690500/*type*/,&type$13,r3);
	r4 = r0->enabled;
	if( r4 ) goto label$1473$8;
	r4 = false;
	hl_dyn_seti((vdynamic*)r1,506529296/*enabled*/,&type$7,r4);
	label$1473$8:
	r3 = r0->name;
	if( !r3 ) goto label$1473$12;
	r3 = r0->name;
	hl_dyn_setp((vdynamic*)r1,150958933/*name*/,&type$13,r3);
	label$1473$12:
	r3 = r0->source;
	if( !r3 ) goto label$1473$16;
	r3 = r0->source;
	hl_dyn_setp((vdynamic*)r1,305246560/*source*/,&type$13,r3);
	label$1473$16:
	r6 = r0->children;
	if( r6 == NULL ) hl_null_access();
	r5 = r6->length;
	r7 = 0;
	if( r7 >= r5 ) goto label$1473$50;
	r10 = &type$9;
	r5 = 0;
	r9 = hl_alloc_array(r10,r5);
	r6 = hl_types_ArrayObj_alloc(r9);
	r4 = true;
	r11 = &r4;
	r8 = hl_types_ArrayDyn_alloc(((hl__types__ArrayBase)r6),r11);
	r5 = 0;
	r6 = r0->children;
	label$1473$30:
	if( r6 == NULL ) hl_null_access();
	r12 = r6->length;
	if( r5 >= r12 ) goto label$1473$48;
	if( r8 == NULL ) hl_null_access();
	r7 = r5;
	++r5;
	r12 = r6->length;
	if( ((unsigned)r7) < ((unsigned)r12) ) goto label$1473$41;
	r13 = NULL;
	goto label$1473$44;
	label$1473$41:
	r9 = r6->array;
	r2 = ((vdynamic**)(r9 + 1))[r7];
	r13 = (hxd__prefab__Prefab)r2;
	label$1473$44:
	if( r13 == NULL ) hl_null_access();
	r2 = hxd_prefab_Prefab_saveRec(r13);
	r7 = hl_types_ArrayDyn_push(r8,r2);
	goto label$1473$30;
	label$1473$48:
	if( r1 == NULL ) hl_null_access();
	hl_dyn_setp((vdynamic*)r1,275389134/*children*/,&type$321,r8);
	label$1473$50:
	r2 = r0->props;
	if( !r2 ) goto label$1473$56;
	r2 = (vdynamic*)hl_dyn_getp((vdynamic*)r1,-393222421/*props*/,&type$9);
	if( r2 ) goto label$1473$56;
	r14 = r0->props;
	hl_dyn_setp((vdynamic*)r1,-393222421/*props*/,&type$9,r14);
	label$1473$56:
	return r1;
}

void hxd_prefab_Prefab_reload(hxd__prefab__Prefab r0,vdynamic* r1) {
	String r13, r16;
	haxe__ds__StringMap r10;
	hl__types__ArrayObj r6;
	hl_type *r9;
	bool r17;
	hl__types__ArrayDyn r4;
	vdynamic *r3, *r15;
	hxd__prefab__Prefab r12, r14;
	varray *r8;
	int r5, r7, r11;
	((void (*)(hxd__prefab__Prefab,vdynamic*))r0->$type->vobj_proto[0])(r0,r1);
	if( r1 == NULL ) hl_null_access();
	r3 = (vdynamic*)hl_dyn_getp((vdynamic*)r1,275389134/*children*/,&type$9);
	r4 = (hl__types__ArrayDyn)hl_dyn_castp(&r3,&type$9,&type$321);
	if( r4 ) goto label$1474$16;
	r6 = r0->children;
	if( r6 == NULL ) hl_null_access();
	r5 = r6->length;
	r7 = 0;
	if( r7 >= r5 ) goto label$1474$15;
	r9 = &type$265;
	r5 = 0;
	r8 = hl_alloc_array(r9,r5);
	r6 = hl_types_ArrayObj_alloc(r8);
	r0->children = r6;
	label$1474$15:
	return;
	label$1474$16:
	r10 = (haxe__ds__StringMap)hl_alloc_obj(haxe__ds__StringMap__val);
	haxe_ds_StringMap_new(r10);
	r5 = 0;
	r6 = r0->children;
	label$1474$20:
	if( r6 == NULL ) hl_null_access();
	r11 = r6->length;
	if( r5 >= r11 ) goto label$1474$37;
	r11 = r6->length;
	if( ((unsigned)r5) < ((unsigned)r11) ) goto label$1474$28;
	r12 = NULL;
	goto label$1474$31;
	label$1474$28:
	r8 = r6->array;
	r3 = ((vdynamic**)(r8 + 1))[r5];
	r12 = (hxd__prefab__Prefab)r3;
	label$1474$31:
	++r5;
	if( r10 == NULL ) hl_null_access();
	if( r12 == NULL ) hl_null_access();
	r13 = r12->name;
	haxe_ds_StringMap_set(r10,r13,((vdynamic*)r12));
	goto label$1474$20;
	label$1474$37:
	r9 = &type$265;
	r5 = 0;
	r8 = hl_alloc_array(r9,r5);
	r6 = hl_types_ArrayObj_alloc(r8);
	r5 = 0;
	label$1474$42:
	if( r4 == NULL ) hl_null_access();
	r11 = hl_types_ArrayDyn_get_length(r4);
	if( r5 >= r11 ) goto label$1474$71;
	r3 = ((vdynamic* (*)(hl__types__ArrayDyn,int))r4->$type->vobj_proto[0])(r4,r5);
	++r5;
	if( r3 == NULL ) hl_null_access();
	r15 = (vdynamic*)hl_dyn_getp((vdynamic*)r3,150958933/*name*/,&type$9);
	if( r15 ) goto label$1474$53;
	r13 = NULL;
	goto label$1474$54;
	label$1474$53:
	r13 = Std_string(r15);
	label$1474$54:
	if( r10 == NULL ) hl_null_access();
	r15 = haxe_ds_StringMap_get(r10,r13);
	r12 = (hxd__prefab__Prefab)r15;
	if( !r12 ) goto label$1474$67;
	if( r12 == NULL ) hl_null_access();
	r16 = r12->type;
	r15 = (vdynamic*)hl_dyn_getp((vdynamic*)r3,218690500/*type*/,&type$9);
	{ int i = hl_dyn_compare((vdynamic*)r16,(vdynamic*)r15); if( i != 0 ) goto label$1474$67; };
	r17 = haxe_ds_StringMap_remove(r10,r13);
	((void (*)(hxd__prefab__Prefab,vdynamic*))r12->$type->vobj_proto[3])(r12,r3);
	if( r6 == NULL ) hl_null_access();
	r7 = hl_types_ArrayObj_push(r6,((vdynamic*)r12));
	goto label$1474$70;
	label$1474$67:
	if( r6 == NULL ) hl_null_access();
	r14 = hxd_prefab_Prefab_loadRec(r3,r0);
	r7 = hl_types_ArrayObj_push(r6,((vdynamic*)r14));
	label$1474$70:
	goto label$1474$42;
	label$1474$71:
	r0->children = r6;
	return;
}

hxd__prefab__Context hxd_prefab_Prefab_makeInstanceRec(hxd__prefab__Prefab r0,hxd__prefab__Context r1) {
	hl__types__ArrayObj r7;
	bool r3;
	vdynamic *r5;
	varray *r11;
	hxd__prefab__Prefab r10;
	int r6, r8, r9;
	hxd__prefab__Context r4;
	r3 = r0->enabled;
	if( r3 ) goto label$1475$3;
	return r1;
	label$1475$3:
	if( r1 ) goto label$1475$8;
	r4 = (hxd__prefab__Context)hl_alloc_obj(hxd__prefab__Context__val);
	hxd_prefab_Context_new(r4);
	r1 = r4;
	hxd_prefab_Context_init(r4);
	label$1475$8:
	r4 = ((hxd__prefab__Context (*)(hxd__prefab__Prefab,hxd__prefab__Context))r0->$type->vobj_proto[2])(r0,r1);
	r1 = r4;
	r6 = 0;
	r7 = r0->children;
	label$1475$12:
	if( r7 == NULL ) hl_null_access();
	r9 = r7->length;
	if( r6 >= r9 ) goto label$1475$28;
	r8 = r6;
	++r6;
	r9 = r7->length;
	if( ((unsigned)r8) < ((unsigned)r9) ) goto label$1475$22;
	r10 = NULL;
	goto label$1475$25;
	label$1475$22:
	r11 = r7->array;
	r5 = ((vdynamic**)(r11 + 1))[r8];
	r10 = (hxd__prefab__Prefab)r5;
	label$1475$25:
	if( r10 == NULL ) hl_null_access();
	r4 = hxd_prefab_Prefab_makeInstanceRec(r10,r1);
	goto label$1475$12;
	label$1475$28:
	return r1;
}

hxd__prefab__Prefab hxd_prefab_Prefab_getPrefabByName(hxd__prefab__Prefab r0,String r1) {
	String r2;
	hl__types__ArrayObj r5;
	vdynamic *r3;
	varray *r9;
	hxd__prefab__Prefab r8;
	int r4, r6, r7;
	r2 = r0->name;
	if( r2 != r1 && (!r2 || !r1 || String___compare(r2,(vdynamic*)r1) != 0) ) goto label$1476$3;
	return r0;
	label$1476$3:
	r4 = 0;
	r5 = r0->children;
	label$1476$5:
	if( r5 == NULL ) hl_null_access();
	r7 = r5->length;
	if( r4 >= r7 ) goto label$1476$23;
	r6 = r4;
	++r4;
	r7 = r5->length;
	if( ((unsigned)r6) < ((unsigned)r7) ) goto label$1476$15;
	r8 = NULL;
	goto label$1476$18;
	label$1476$15:
	r9 = r5->array;
	r3 = ((vdynamic**)(r9 + 1))[r6];
	r8 = (hxd__prefab__Prefab)r3;
	label$1476$18:
	if( r8 == NULL ) hl_null_access();
	r8 = hxd_prefab_Prefab_getPrefabByName(r8,r1);
	if( !r8 ) goto label$1476$22;
	return r8;
	label$1476$22:
	goto label$1476$5;
	label$1476$23:
	r8 = NULL;
	return r8;
}

hxd__prefab__Prefab hxd_prefab_Prefab_getOpt(hxd__prefab__Prefab r0,hl__Class r1,String r2) {
	String r4, r5;
	hl__types__ArrayObj r3, r7;
	vdynamic *r11;
	varray *r12;
	hxd__prefab__Prefab r10, r13;
	int r6, r8, r9;
	if( r2 ) goto label$1477$3;
	r3 = NULL;
	goto label$1477$6;
	label$1477$3:
	if( r2 == NULL ) hl_null_access();
	r5 = (String)global$210;
	r3 = String_split(r2,r5);
	label$1477$6:
	r6 = 0;
	r7 = r0->children;
	label$1477$8:
	if( r7 == NULL ) hl_null_access();
	r9 = r7->length;
	if( r6 >= r9 ) goto label$1477$53;
	r9 = r7->length;
	if( ((unsigned)r6) < ((unsigned)r9) ) goto label$1477$16;
	r10 = NULL;
	goto label$1477$19;
	label$1477$16:
	r12 = r7->array;
	r11 = ((vdynamic**)(r12 + 1))[r6];
	r10 = (hxd__prefab__Prefab)r11;
	label$1477$19:
	++r6;
	if( !r2 ) goto label$1477$24;
	if( r10 == NULL ) hl_null_access();
	r4 = r10->name;
	if( r4 != r2 && (!r4 || !r2 || String___compare(r4,(vdynamic*)r2) != 0) ) goto label$1477$28;
	label$1477$24:
	if( r10 == NULL ) hl_null_access();
	r13 = hxd_prefab_Prefab_to(r10,r1);
	if( !r13 ) goto label$1477$28;
	return r13;
	label$1477$28:
	if( !r3 ) goto label$1477$49;
	if( r3 == NULL ) hl_null_access();
	r8 = r3->length;
	r9 = 1;
	if( r9 >= r8 ) goto label$1477$49;
	r4 = r10->name;
	r8 = 0;
	r9 = r3->length;
	if( ((unsigned)r8) < ((unsigned)r9) ) goto label$1477$39;
	r5 = NULL;
	goto label$1477$42;
	label$1477$39:
	r12 = r3->array;
	r11 = ((vdynamic**)(r12 + 1))[r8];
	r5 = (String)r11;
	label$1477$42:
	if( r4 != r5 && (!r4 || !r5 || String___compare(r4,(vdynamic*)r5) != 0) ) goto label$1477$49;
	r11 = hl_types_ArrayObj_shift(r3);
	r4 = (String)r11;
	r4 = (String)global$210;
	r4 = hl_types_ArrayObj_join(r3,r4);
	r13 = hxd_prefab_Prefab_getOpt(r10,r1,r4);
	return r13;
	label$1477$49:
	r13 = hxd_prefab_Prefab_getOpt(r10,r1,r2);
	if( !r13 ) goto label$1477$52;
	return r13;
	label$1477$52:
	goto label$1477$8;
	label$1477$53:
	r10 = NULL;
	return r10;
}

hxd__prefab__Prefab hxd_prefab_Prefab_get(hxd__prefab__Prefab r0,hl__Class r1,String r2) {
	String r4, r5, r6;
	hxd__prefab__Prefab r3;
	r3 = hxd_prefab_Prefab_getOpt(r0,r1,r2);
	if( r3 ) goto label$1478$17;
	r4 = (String)global$1268;
	if( r2 ) goto label$1478$6;
	r5 = Type_getClassName(r1);
	goto label$1478$15;
	label$1478$6:
	if( r1 ) goto label$1478$9;
	r5 = r2;
	goto label$1478$15;
	label$1478$9:
	r6 = (String)global$175;
	r5 = String___add__(r2,r6);
	r6 = Type_getClassName(r1);
	r5 = String___add__(r5,r6);
	r6 = (String)global$177;
	r5 = String___add__(r5,r6);
	label$1478$15:
	r4 = String___add__(r4,r5);
	hl_throw((vdynamic*)r4);
	label$1478$17:
	return r3;
}

hl__types__ArrayObj hxd_prefab_Prefab_getAll(hxd__prefab__Prefab r0,hl__Class r1,hl__types__ArrayObj r2) {
	hl__types__ArrayObj r5;
	vclosure *r4;
	hl__types__ArrayDyn r3;
	r4 = hl_alloc_closure_ptr(&type$3664,fun$3651,r1);
	r5 = NULL;
	r3 = (hl__types__ArrayDyn)hl_dyn_castp(&r5,&type$46,&type$321);
	r3 = hxd_prefab_Prefab_findAll(r0,((vclosure*)r4),r3);
	r5 = (hl__types__ArrayObj)hl_dyn_castp(&r3,&type$321,&type$46);
	return r5;
}

hl__types__ArrayDyn hxd_prefab_Prefab_findAll(hxd__prefab__Prefab r0,vclosure* r1,hl__types__ArrayDyn r2) {
	bool *r9;
	hl__types__ArrayObj r7;
	hl_type *r5;
	bool r8;
	hl__types__ArrayDyn r3;
	vdynamic *r13;
	hxd__prefab__Prefab r12;
	int r6, r10, r11;
	varray *r4;
	if( r2 ) goto label$1480$9;
	r5 = &type$9;
	r6 = 0;
	r4 = hl_alloc_array(r5,r6);
	r7 = hl_types_ArrayObj_alloc(r4);
	r8 = true;
	r9 = &r8;
	r3 = hl_types_ArrayDyn_alloc(((hl__types__ArrayBase)r7),r9);
	r2 = r3;
	label$1480$9:
	r6 = 0;
	r7 = r0->children;
	label$1480$11:
	if( r7 == NULL ) hl_null_access();
	r11 = r7->length;
	if( r6 >= r11 ) goto label$1480$31;
	r11 = r7->length;
	if( ((unsigned)r6) < ((unsigned)r11) ) goto label$1480$19;
	r12 = NULL;
	goto label$1480$22;
	label$1480$19:
	r4 = r7->array;
	r13 = ((vdynamic**)(r4 + 1))[r6];
	r12 = (hxd__prefab__Prefab)r13;
	label$1480$22:
	++r6;
	if( r1 == NULL ) hl_null_access();
	r13 = r1->hasValue ? ((vdynamic* (*)(vdynamic*,hxd__prefab__Prefab))r1->fun)((vdynamic*)r1->value,r12) : ((vdynamic* (*)(hxd__prefab__Prefab))r1->fun)(r12);
	if( !r13 ) goto label$1480$28;
	if( r2 == NULL ) hl_null_access();
	r10 = hl_types_ArrayDyn_push(r2,r13);
	label$1480$28:
	if( r12 == NULL ) hl_null_access();
	r3 = hxd_prefab_Prefab_findAll(r12,r1,r2);
	goto label$1480$11;
	label$1480$31:
	return r2;
}

hl__types__ArrayObj hxd_prefab_Prefab_flatten(hxd__prefab__Prefab r0,hl__Class r1,hl__types__ArrayObj r2) {
	hl__types__ArrayObj r3, r10;
	hl_type *r5;
	vdynamic *r11;
	hxd__prefab__Prefab r7;
	int r6, r8, r9;
	varray *r4;
	if( r2 ) goto label$1481$6;
	r5 = &type$265;
	r6 = 0;
	r4 = hl_alloc_array(r5,r6);
	r3 = hl_types_ArrayObj_alloc(r4);
	r2 = r3;
	label$1481$6:
	if( r1 ) goto label$1481$10;
	if( r2 == NULL ) hl_null_access();
	r6 = hl_types_ArrayObj_push(r2,((vdynamic*)r0));
	goto label$1481$14;
	label$1481$10:
	r7 = hxd_prefab_Prefab_to(r0,r1);
	if( !r7 ) goto label$1481$14;
	if( r2 == NULL ) hl_null_access();
	r6 = hl_types_ArrayObj_push(r2,((vdynamic*)r7));
	label$1481$14:
	r6 = 0;
	r3 = r0->children;
	label$1481$16:
	if( r3 == NULL ) hl_null_access();
	r9 = r3->length;
	if( r6 >= r9 ) goto label$1481$32;
	r8 = r6;
	++r6;
	r9 = r3->length;
	if( ((unsigned)r8) < ((unsigned)r9) ) goto label$1481$26;
	r7 = NULL;
	goto label$1481$29;
	label$1481$26:
	r4 = r3->array;
	r11 = ((vdynamic**)(r4 + 1))[r8];
	r7 = (hxd__prefab__Prefab)r11;
	label$1481$29:
	if( r7 == NULL ) hl_null_access();
	r10 = hxd_prefab_Prefab_flatten(r7,r1,r2);
	goto label$1481$16;
	label$1481$32:
	return r2;
}

void hxd_prefab_Prefab_visitChildren(hxd__prefab__Prefab r0,vclosure* r1) {
	hl__types__ArrayObj r4;
	bool r9;
	vdynamic *r7;
	varray *r8;
	hxd__prefab__Prefab r6;
	int r2, r5;
	r2 = 0;
	r4 = r0->children;
	label$1482$2:
	if( r4 == NULL ) hl_null_access();
	r5 = r4->length;
	if( r2 >= r5 ) goto label$1482$20;
	r5 = r4->length;
	if( ((unsigned)r2) < ((unsigned)r5) ) goto label$1482$10;
	r6 = NULL;
	goto label$1482$13;
	label$1482$10:
	r8 = r4->array;
	r7 = ((vdynamic**)(r8 + 1))[r2];
	r6 = (hxd__prefab__Prefab)r7;
	label$1482$13:
	++r2;
	if( r1 == NULL ) hl_null_access();
	r9 = r1->hasValue ? ((bool (*)(vdynamic*,hxd__prefab__Prefab))r1->fun)((vdynamic*)r1->value,r6) : ((bool (*)(hxd__prefab__Prefab))r1->fun)(r6);
	if( !r9 ) goto label$1482$19;
	if( r6 == NULL ) hl_null_access();
	hxd_prefab_Prefab_visitChildren(r6,r1);
	label$1482$19:
	goto label$1482$2;
	label$1482$20:
	return;
}

hxd__prefab__Prefab hxd_prefab_Prefab_getParent(hxd__prefab__Prefab r0,hl__Class r1) {
	hxd__prefab__Prefab r2, r3, r4;
	r2 = r0->parent;
	label$1483$1:
	if( !r2 ) goto label$1483$10;
	if( r2 == NULL ) hl_null_access();
	r3 = hxd_prefab_Prefab_to(r2,r1);
	if( !r3 ) goto label$1483$7;
	return r3;
	label$1483$7:
	r4 = r2->parent;
	r2 = r4;
	goto label$1483$1;
	label$1483$10:
	r3 = NULL;
	return r3;
}

hxd__prefab__Prefab hxd_prefab_Prefab_to(hxd__prefab__Prefab r0,hl__Class r1) {
	bool r3;
	hxd__prefab__Prefab r2;
	r3 = hl_BaseType_check(((hl__BaseType)r1),((vdynamic*)r0));
	if( !r3 ) goto label$1484$4;
	r2 = r0;
	goto label$1484$5;
	label$1484$4:
	r2 = NULL;
	label$1484$5:
	return r2;
}

String hxd_prefab_Prefab_getAbsPath(hxd__prefab__Prefab r0) {
	String r8;
	hl__types__ArrayObj r3;
	hl_type *r5;
	int r6;
	varray *r4;
	hxd__prefab__Prefab r1, r7;
	r1 = r0;
	r5 = &type$13;
	r6 = 0;
	r4 = hl_alloc_array(r5,r6);
	r3 = hl_types_ArrayObj_alloc(r4);
	label$1485$5:
	if( r1 == NULL ) hl_null_access();
	r7 = r1->parent;
	if( !r7 ) goto label$1485$15;
	if( r3 == NULL ) hl_null_access();
	r8 = r1->name;
	hl_types_ArrayObj_unshift(r3,((vdynamic*)r8));
	r7 = r1->parent;
	r1 = r7;
	goto label$1485$5;
	label$1485$15:
	if( r3 == NULL ) hl_null_access();
	r8 = (String)global$210;
	r8 = hl_types_ArrayObj_join(r3,r8);
	return r8;
}

String hxd_prefab_Prefab_getDefaultName(hxd__prefab__Prefab r0) {
	String r2, r5, r6;
	hl__types__ArrayObj r4;
	haxe__io__Path r3;
	vdynamic *r9;
	varray *r10;
	int r7, r8;
	r2 = r0->source;
	if( !r2 ) goto label$1486$31;
	r3 = (haxe__io__Path)hl_alloc_obj(haxe__io__Path__val);
	r2 = r0->source;
	haxe_io_Path_new(r3,r2);
	r2 = r3->file;
	if( r2 == NULL ) hl_null_access();
	r6 = (String)global$192;
	r4 = String_split(r2,r6);
	if( r4 == NULL ) hl_null_access();
	r7 = 0;
	r8 = r4->length;
	if( ((unsigned)r7) < ((unsigned)r8) ) goto label$1486$15;
	r5 = NULL;
	goto label$1486$18;
	label$1486$15:
	r10 = r4->array;
	r9 = ((vdynamic**)(r10 + 1))[r7];
	r5 = (String)r9;
	label$1486$18:
	if( r5 == NULL ) hl_null_access();
	r6 = (String)global$1269;
	r4 = String_split(r5,r6);
	if( r4 == NULL ) hl_null_access();
	r7 = 0;
	r8 = r4->length;
	if( ((unsigned)r7) < ((unsigned)r8) ) goto label$1486$27;
	r5 = NULL;
	goto label$1486$30;
	label$1486$27:
	r10 = r4->array;
	r9 = ((vdynamic**)(r10 + 1))[r7];
	r5 = (String)r9;
	label$1486$30:
	return r5;
	label$1486$31:
	r2 = r0->type;
	if( r2 == NULL ) hl_null_access();
	r5 = (String)global$210;
	r4 = String_split(r2,r5);
	if( r4 == NULL ) hl_null_access();
	r9 = hl_types_ArrayObj_pop(r4);
	r2 = (String)r9;
	return r2;
}

hxd__prefab__Prefab hxd_prefab_Prefab_clone(hxd__prefab__Prefab r0) {
	String r4;
	haxe__format__JsonParser r3;
	vclosure *r5;
	vdynamic *r2;
	hxd__prefab__Prefab r1;
	r3 = (haxe__format__JsonParser)hl_alloc_obj(haxe__format__JsonParser__val);
	r2 = hxd_prefab_Prefab_saveRec(r0);
	r5 = NULL;
	r4 = NULL;
	r4 = haxe_format_JsonPrinter_print(r2,r5,r4);
	haxe_format_JsonParser_new(r3,r4);
	r2 = haxe_format_JsonParser_doParse(r3);
	r1 = NULL;
	r1 = hxd_prefab_Prefab_loadRec(r2,r1);
	return r1;
}

void hxd_prefab_Prefab_new(hxd__prefab__Prefab r0,hxd__prefab__Prefab r1) {
	hl__types__ArrayObj r4;
	hl_type *r6;
	bool r2;
	int r7;
	varray *r5;
	hxd__prefab__Prefab r3;
	r2 = true;
	r0->enabled = r2;
	r3 = hxd_prefab_Prefab_set_parent(r0,r1);
	r6 = &type$265;
	r7 = 0;
	r5 = hl_alloc_array(r6,r7);
	r4 = hl_types_ArrayObj_alloc(r5);
	r0->children = r4;
	return;
}

hxd__prefab__Prefab hxd_prefab_Prefab_loadRec(vdynamic* r0,hxd__prefab__Prefab r1) {
	bool *r17;
	String r5;
	hl__Class r8;
	hl__types__ArrayObj r15;
	vvirtual *r6;
	haxe__ds__StringMap r3;
	hl_type *r12;
	hxd__prefab__$Unknown r9;
	bool r16;
	hxd__prefab__$Library r4;
	hl__types__ArrayDyn r10;
	vdynamic *r2;
	hxd__prefab__Prefab r14, r18;
	int r13, r19, r20;
	varray *r11;
	r4 = (hxd__prefab__$Library)global$1266;
	r3 = r4->registeredElements;
	if( r3 == NULL ) hl_null_access();
	if( r0 == NULL ) hl_null_access();
	r2 = (vdynamic*)hl_dyn_getp((vdynamic*)r0,218690500/*type*/,&type$9);
	if( r2 ) goto label$1488$8;
	r5 = NULL;
	goto label$1488$9;
	label$1488$8:
	r5 = Std_string(r2);
	label$1488$9:
	r2 = haxe_ds_StringMap_get(r3,r5);
	r6 = hl_to_virtual(&type$3654,(vdynamic*)r2);
	if( r6 ) goto label$1488$14;
	r8 = NULL;
	goto label$1488$16;
	label$1488$14:
	if( r6 == NULL ) hl_null_access();
	r8 = hl_vfields(r6)[0] ? (*(hl__Class*)(hl_vfields(r6)[0])) : (hl__Class)hl_dyn_getp(r6->value,22185/*cl*/,&type$12);
	label$1488$16:
	if( r8 ) goto label$1488$19;
	r9 = (hxd__prefab__$Unknown)global$1267;
	r8 = ((hl__Class)r9);
	label$1488$19:
	r12 = &type$9;
	r13 = 1;
	r11 = hl_alloc_array(r12,r13);
	r13 = 0;
	((hxd__prefab__Prefab*)(r11 + 1))[r13] = r1;
	r15 = hl_types_ArrayObj_alloc(r11);
	r16 = true;
	r17 = &r16;
	r10 = hl_types_ArrayDyn_alloc(((hl__types__ArrayBase)r15),r17);
	r2 = Type_createInstance(r8,r10);
	r14 = (hxd__prefab__Prefab)hl_dyn_castp(&r2,&type$9,&type$265);
	if( r14 == NULL ) hl_null_access();
	r2 = (vdynamic*)hl_dyn_getp((vdynamic*)r0,218690500/*type*/,&type$9);
	if( r2 ) goto label$1488$35;
	r5 = NULL;
	goto label$1488$36;
	label$1488$35:
	r5 = Std_string(r2);
	label$1488$36:
	r14->type = r5;
	r2 = (vdynamic*)hl_dyn_getp((vdynamic*)r0,150958933/*name*/,&type$9);
	if( r2 ) goto label$1488$41;
	r5 = NULL;
	goto label$1488$42;
	label$1488$41:
	r5 = Std_string(r2);
	label$1488$42:
	r5 = hxd_prefab_Prefab_set_name(r14,r5);
	r2 = (vdynamic*)hl_dyn_getp((vdynamic*)r0,506529296/*enabled*/,&type$9);
	if( !r2 ) goto label$1488$48;
	r2 = (vdynamic*)hl_dyn_getp((vdynamic*)r0,506529296/*enabled*/,&type$9);
	r16 = (bool)hl_dyn_casti(&r2,&type$9,&type$7);
	r14->enabled = r16;
	label$1488$48:
	r2 = (vdynamic*)hl_dyn_getp((vdynamic*)r0,-393222421/*props*/,&type$9);
	r14->props = r2;
	r2 = (vdynamic*)hl_dyn_getp((vdynamic*)r0,305246560/*source*/,&type$9);
	if( !r2 ) goto label$1488$58;
	r2 = (vdynamic*)hl_dyn_getp((vdynamic*)r0,305246560/*source*/,&type$9);
	if( r2 ) goto label$1488$56;
	r5 = NULL;
	goto label$1488$57;
	label$1488$56:
	r5 = Std_string(r2);
	label$1488$57:
	r5 = hxd_prefab_Prefab_set_source(r14,r5);
	label$1488$58:
	((void (*)(hxd__prefab__Prefab,vdynamic*))r14->$type->vobj_proto[0])(r14,r0);
	r2 = (vdynamic*)hl_dyn_getp((vdynamic*)r0,275389134/*children*/,&type$9);
	r10 = (hl__types__ArrayDyn)hl_dyn_castp(&r2,&type$9,&type$321);
	if( !r10 ) goto label$1488$72;
	r13 = 0;
	label$1488$63:
	if( r10 == NULL ) hl_null_access();
	r20 = hl_types_ArrayDyn_get_length(r10);
	if( r13 >= r20 ) goto label$1488$72;
	r19 = r13;
	++r13;
	r2 = ((vdynamic* (*)(hl__types__ArrayDyn,int))r10->$type->vobj_proto[0])(r10,r19);
	r18 = hxd_prefab_Prefab_loadRec(r2,r14);
	goto label$1488$63;
	label$1488$72:
	return r14;
}

