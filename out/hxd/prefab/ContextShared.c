// Generated by HLC 4.0.0 (HL v4)
#include <hl/code.h>

void hxd_prefab_ContextShared_onError(hxd__prefab__ContextShared r0,vdynamic* r1) {
	hl_throw((vdynamic*)r1);
}

hl__types__ArrayObj hxd_prefab_ContextShared_elements(hxd__prefab__ContextShared r0) {
	haxe__ds__ObjectMap r6;
	hl__types__ArrayObj r1;
	hl_type *r3;
	bool r7;
	vclosure *r8, *r10;
	vdynamic *r5;
	hxd__prefab__Prefab r9;
	int r4;
	varray *r2;
	r3 = &type$265;
	r4 = 0;
	r2 = hl_alloc_array(r3,r4);
	r1 = hl_types_ArrayObj_alloc(r2);
	r6 = r0->contexts;
	if( r6 == NULL ) hl_null_access();
	r5 = haxe_ds_ObjectMap_keys(r6);
	label$3620$7:
	if( r5 == NULL ) hl_null_access();
	r8 = (vclosure*)hl_dyn_getp((vdynamic*)r5,407283053/*hasNext*/,&type$118);
	if( r8 == NULL ) hl_null_access();
	r7 = r8->hasValue ? ((bool (*)(vdynamic*))r8->fun)((vdynamic*)r8->value) : ((bool (*)(void))r8->fun)();
	if( !r7 ) goto label$3620$19;
	if( r1 == NULL ) hl_null_access();
	r10 = (vclosure*)hl_dyn_getp((vdynamic*)r5,151160317/*next*/,&type$3632);
	if( r10 == NULL ) hl_null_access();
	r9 = r10->hasValue ? ((hxd__prefab__Prefab (*)(vdynamic*))r10->fun)((vdynamic*)r10->value) : ((hxd__prefab__Prefab (*)(void))r10->fun)();
	r4 = hl_types_ArrayObj_push(r1,((vdynamic*)r9));
	goto label$3620$7;
	label$3620$19:
	return r1;
}

hl__types__ArrayObj hxd_prefab_ContextShared_getContexts(hxd__prefab__ContextShared r0,hxd__prefab__Prefab r1) {
	haxe__ds__ObjectMap r7;
	hl__types__ArrayObj r2, r9, r10;
	hl_type *r4;
	vdynamic *r6;
	hxd__prefab__Context r8;
	int r5;
	varray *r3;
	r4 = &type$3621;
	r5 = 0;
	r3 = hl_alloc_array(r4,r5);
	r2 = hl_types_ArrayObj_alloc(r3);
	r7 = r0->contexts;
	if( r7 == NULL ) hl_null_access();
	r6 = haxe_ds_ObjectMap_get(r7,((vdynamic*)r1));
	r8 = (hxd__prefab__Context)r6;
	if( !r8 ) goto label$3621$11;
	if( r2 == NULL ) hl_null_access();
	r5 = hl_types_ArrayObj_push(r2,((vdynamic*)r8));
	label$3621$11:
	r7 = r0->references;
	if( r7 == NULL ) hl_null_access();
	r6 = haxe_ds_ObjectMap_get(r7,((vdynamic*)r1));
	r9 = (hl__types__ArrayObj)hl_dyn_castp(&r6,&type$9,&type$46);
	if( !r9 ) goto label$3621$19;
	if( r2 == NULL ) hl_null_access();
	r10 = hl_types_ArrayObj_concat(r2,r9);
	return r10;
	label$3621$19:
	return r2;
}

hl__types__ArrayObj hxd_prefab_ContextShared_loadDir(hxd__prefab__ContextShared r0,String r1,String r2) {
	String r4, r6, r7;
	hxd__fs__NotFound r14;
	hl__types__ArrayObj r9;
	bool r13;
	haxe__io__Path r3;
	hxd__res__$Loader r11;
	hxd__res__Loader r10;
	hxd__fs__$NotFound r12;
	vdynamic *r8;
	hl_trap_ctx trap$0;
	r3 = (haxe__io__Path)hl_alloc_obj(haxe__io__Path__val);
	r4 = r0->currentPath;
	haxe_io_Path_new(r3,r4);
	r4 = (String)global$1258;
	r3->ext = r4;
	r4 = haxe_io_Path_toString(r3);
	r6 = (String)global$207;
	r4 = String___add__(r4,r6);
	r4 = String___add__(r4,r1);
	if( !r2 ) goto label$3622$14;
	r7 = (String)global$207;
	r7 = String___add__(r7,r2);
	r6 = String___add__(r4,r7);
	r4 = r6;
	label$3622$14:
	hl_trap(trap$0,r8,label$3622$22);
	r11 = (hxd__res__$Loader)global$152;
	r10 = r11->currentInstance;
	if( r10 == NULL ) hl_null_access();
	r9 = hxd_res_Loader_dir(r10,r4);
	hl_endtrap(trap$0);
	return r9;
	hl_endtrap(trap$0);
	label$3622$22:
	r12 = (hxd__fs__$NotFound)global$572;
	r13 = hl_BaseType_check(((hl__BaseType)r12),r8);
	if( !r13 ) goto label$3622$28;
	r14 = (hxd__fs__NotFound)r8;
	r9 = NULL;
	return r9;
	label$3622$28:
	hl_rethrow((vdynamic*)r8);
}

hxd__res__Any hxd_prefab_ContextShared_loadPrefabDat(hxd__prefab__ContextShared r0,String r1,String r2,String r3) {
	String r5, r8;
	hxd__fs__NotFound r15;
	bool r14;
	haxe__io__Path r4, r7;
	hxd__res__$Loader r12;
	hxd__res__Loader r11;
	hxd__fs__$NotFound r13;
	vdynamic *r9;
	hxd__res__Any r10;
	hl_trap_ctx trap$0;
	r4 = (haxe__io__Path)hl_alloc_obj(haxe__io__Path__val);
	r5 = r0->currentPath;
	haxe_io_Path_new(r4,r5);
	r5 = (String)global$1258;
	r4->ext = r5;
	r7 = (haxe__io__Path)hl_alloc_obj(haxe__io__Path__val);
	r5 = haxe_io_Path_toString(r4);
	r8 = (String)global$207;
	r5 = String___add__(r5,r8);
	r5 = String___add__(r5,r3);
	r8 = (String)global$207;
	r5 = String___add__(r5,r8);
	r5 = String___add__(r5,r1);
	haxe_io_Path_new(r7,r5);
	r7->ext = r2;
	hl_trap(trap$0,r9,label$3623$24);
	r12 = (hxd__res__$Loader)global$152;
	r11 = r12->currentInstance;
	if( r11 == NULL ) hl_null_access();
	r5 = haxe_io_Path_toString(r7);
	r10 = hxd_res_Loader_load(r11,r5);
	hl_endtrap(trap$0);
	return r10;
	hl_endtrap(trap$0);
	label$3623$24:
	r13 = (hxd__fs__$NotFound)global$572;
	r14 = hl_BaseType_check(((hl__BaseType)r13),r9);
	if( !r14 ) goto label$3623$30;
	r15 = (hxd__fs__NotFound)r9;
	r10 = NULL;
	return r10;
	label$3623$30:
	hl_rethrow((vdynamic*)r9);
}

void hxd_prefab_ContextShared_savePrefabDat(hxd__prefab__ContextShared r0,String r1,String r2,String r3,haxe__io__Bytes r4) {
	String r5;
	r5 = (String)global$484;
	hl_throw((vdynamic*)r5);
}

hxd__prefab__Prefab hxd_prefab_ContextShared_loadPrefab(hxd__prefab__ContextShared r0,String r1) {
	String r2;
	r2 = (String)global$484;
	hl_throw((vdynamic*)r2);
}

vvirtual* hxd_prefab_ContextShared_loadShader(hxd__prefab__ContextShared r0,String r1) {
	String r4, r11;
	hl__Class r9;
	hl__types__ArrayObj r10;
	vvirtual *r5, *r7;
	haxe__ds__StringMap r3;
	hl_type *r13;
	hxsl__SharedShader r8;
	vdynamic *r2;
	int r14;
	varray *r12;
	r3 = r0->shaderCache;
	if( r3 == NULL ) hl_null_access();
	r2 = haxe_ds_StringMap_get(r3,r1);
	r5 = hl_to_virtual(&type$3628,(vdynamic*)r2);
	if( !r5 ) goto label$3626$6;
	return r5;
	label$3626$6:
	r7 = hl_alloc_virtual(&type$3628);
	r8 = (hxsl__SharedShader)hl_alloc_obj(hxsl__SharedShader__val);
	if( r1 == NULL ) hl_null_access();
	r11 = (String)global$207;
	r10 = String_split(r1,r11);
	if( r10 == NULL ) hl_null_access();
	r4 = (String)global$210;
	r4 = hl_types_ArrayObj_join(r10,r4);
	r9 = Type_resolveClass(r4);
	r4 = (String)global$1259;
	r2 = Reflect_field(((vdynamic*)r9),r4);
	if( r2 ) goto label$3626$20;
	r4 = NULL;
	goto label$3626$21;
	label$3626$20:
	r4 = Std_string(r2);
	label$3626$21:
	hxsl_SharedShader_new(r8,r4);
	if( hl_vfields(r7)[1] ) *(hxsl__SharedShader*)(hl_vfields(r7)[1]) = (hxsl__SharedShader)r8; else hl_dyn_setp(r7->value,488685349/*shader*/,&type$143,r8);
	r13 = &type$3639;
	r14 = 0;
	r12 = hl_alloc_array(r13,r14);
	r10 = hl_types_ArrayObj_alloc(r12);
	if( hl_vfields(r7)[0] ) *(hl__types__ArrayObj*)(hl_vfields(r7)[0]) = (hl__types__ArrayObj)r10; else hl_dyn_setp(r7->value,-31952295/*inits*/,&type$46,r10);
	r3 = r0->shaderCache;
	if( r3 == NULL ) hl_null_access();
	haxe_ds_StringMap_set(r3,r1,((vdynamic*)r7));
	return r7;
}

h3d__scene__Object hxd_prefab_ContextShared_loadModel(hxd__prefab__ContextShared r0,String r1) {
	h3d__prim__ModelCache r3;
	hxd__res__$Loader r7;
	hxd__res__Model r4;
	hxd__res__Loader r6;
	hxd__res__Any r5;
	h3d__scene__Object r2;
	r3 = r0->cache;
	if( r3 == NULL ) hl_null_access();
	r7 = (hxd__res__$Loader)global$152;
	r6 = r7->currentInstance;
	if( r6 == NULL ) hl_null_access();
	r5 = hxd_res_Loader_load(r6,r1);
	if( r5 == NULL ) hl_null_access();
	r4 = hxd_res_Any_toModel(r5);
	r2 = h3d_prim_ModelCache_loadModel(r3,r4);
	return r2;
}

h3d__anim__Animation hxd_prefab_ContextShared_loadAnimation(hxd__prefab__ContextShared r0,String r1) {
	String r8;
	h3d__prim__ModelCache r3;
	hxd__res__$Loader r7;
	hxd__res__Model r4;
	hxd__res__Loader r6;
	h3d__anim__Animation r2;
	hxd__res__Any r5;
	r3 = r0->cache;
	if( r3 == NULL ) hl_null_access();
	r7 = (hxd__res__$Loader)global$152;
	r6 = r7->currentInstance;
	if( r6 == NULL ) hl_null_access();
	r5 = hxd_res_Loader_load(r6,r1);
	if( r5 == NULL ) hl_null_access();
	r4 = hxd_res_Any_toModel(r5);
	r8 = NULL;
	r2 = h3d_prim_ModelCache_loadAnimation(r3,r4,r8);
	return r2;
}

h3d__mat__Texture hxd_prefab_ContextShared_loadTexture(hxd__prefab__ContextShared r0,String r1) {
	h3d__prim__ModelCache r3;
	hxd__res__Model r4;
	h3d__mat__Texture r2;
	r3 = r0->cache;
	if( r3 == NULL ) hl_null_access();
	r4 = NULL;
	r2 = h3d_prim_ModelCache_loadTexture(r3,r4,r1);
	return r2;
}

haxe__io__Bytes hxd_prefab_ContextShared_loadBytes(hxd__prefab__ContextShared r0,String r1) {
	hxd__fs__FileEntry r4;
	hxd__fs__NotFound r10;
	bool r9;
	haxe__io__Bytes r3;
	hxd__res__$Loader r7;
	hxd__res__Loader r6;
	hxd__fs__$NotFound r8;
	vdynamic *r2;
	hxd__res__Any r5;
	hl_trap_ctx trap$0;
	hl_trap(trap$0,r2,label$3630$12);
	r7 = (hxd__res__$Loader)global$152;
	r6 = r7->currentInstance;
	if( r6 == NULL ) hl_null_access();
	r5 = hxd_res_Loader_load(r6,r1);
	if( r5 == NULL ) hl_null_access();
	r4 = r5->entry;
	if( r4 == NULL ) hl_null_access();
	r3 = ((haxe__io__Bytes (*)(hxd__fs__FileEntry))r4->$type->vobj_proto[1])(r4);
	hl_endtrap(trap$0);
	return r3;
	hl_endtrap(trap$0);
	label$3630$12:
	r8 = (hxd__fs__$NotFound)global$572;
	r9 = hl_BaseType_check(((hl__BaseType)r8),r2);
	if( !r9 ) goto label$3630$18;
	r10 = (hxd__fs__NotFound)r2;
	r3 = NULL;
	return r3;
	label$3630$18:
	hl_rethrow((vdynamic*)r2);
}

haxe__io__Bytes hxd_prefab_ContextShared_loadBakedBytes(hxd__prefab__ContextShared r0,String r1) {
	haxe__ds__StringMap r3;
	haxe__io__Bytes r5;
	vdynamic *r4;
	r3 = r0->bakedData;
	if( r3 ) goto label$3631$3;
	hxd_prefab_ContextShared_loadBakedData(r0);
	label$3631$3:
	r3 = r0->bakedData;
	if( r3 == NULL ) hl_null_access();
	r4 = haxe_ds_StringMap_get(r3,r1);
	r5 = (haxe__io__Bytes)r4;
	return r5;
}

void hxd_prefab_ContextShared_saveBakedBytes(hxd__prefab__ContextShared r0,String r1,haxe__io__Bytes r2) {
	vdynobj *r10;
	String r7;
	hl__types__ArrayObj r12;
	haxe__ds__StringMap r4, r22;
	venum *r16;
	bool r6;
	haxe__io__Bytes r5;
	haxe__io__BytesOutput r15;
	vclosure *r11;
	hl__types__ArrayDyn r9;
	vdynamic *r8;
	varray *r21;
	int r13, r14, r17, r18, r19, r20;
	r4 = r0->bakedData;
	if( r4 ) goto label$3632$3;
	hxd_prefab_ContextShared_loadBakedData(r0);
	label$3632$3:
	if( r2 ) goto label$3632$10;
	r4 = r0->bakedData;
	if( r4 == NULL ) hl_null_access();
	r6 = haxe_ds_StringMap_remove(r4,r1);
	if( r6 ) goto label$3632$9;
	return;
	label$3632$9:
	goto label$3632$13;
	label$3632$10:
	r4 = r0->bakedData;
	if( r4 == NULL ) hl_null_access();
	haxe_ds_StringMap_set(r4,r1,((vdynamic*)r2));
	label$3632$13:
	r4 = r0->bakedData;
	r10 = hl_alloc_dynobj();
	r11 = hl_alloc_closure_ptr(&type$2969,fun$3641,r4);
	hl_dyn_setp((vdynamic*)r10,-207992737/*iterator*/,&type$608,r11);
	r9 = Lambda_array(((vdynamic*)r10));
	r12 = (hl__types__ArrayObj)hl_dyn_castp(&r9,&type$321,&type$46);
	if( r12 == NULL ) hl_null_access();
	r13 = r12->length;
	r14 = 0;
	if( r13 != r14 ) goto label$3632$26;
	r5 = NULL;
	hxd_prefab_ContextShared_saveBakedFile(r0,r5);
	return;
	label$3632$26:
	r15 = (haxe__io__BytesOutput)hl_alloc_obj(haxe__io__BytesOutput__val);
	haxe_io_BytesOutput_new(r15);
	r7 = (String)global$1260;
	r16 = NULL;
	haxe_io_Output_writeString(((haxe__io__Output)r15),r7,r16);
	r13 = r12->length;
	haxe_io_Output_writeInt32(((haxe__io__Output)r15),r13);
	r13 = 8;
	r14 = 0;
	label$3632$35:
	if( r12 == NULL ) hl_null_access();
	r18 = r12->length;
	if( r14 >= r18 ) goto label$3632$57;
	r18 = 2;
	r19 = r14;
	++r14;
	r20 = r12->length;
	if( ((unsigned)r19) < ((unsigned)r20) ) goto label$3632$46;
	r7 = NULL;
	goto label$3632$49;
	label$3632$46:
	r21 = r12->array;
	r8 = ((vdynamic**)(r21 + 1))[r19];
	r7 = (String)r8;
	label$3632$49:
	if( r7 == NULL ) hl_null_access();
	r19 = r7->length;
	r18 = r18 + r19;
	r19 = 8;
	r18 = r18 + r19;
	r17 = r13 + r18;
	r13 = r17;
	goto label$3632$35;
	label$3632$57:
	r14 = 0;
	label$3632$58:
	if( r12 == NULL ) hl_null_access();
	r18 = r12->length;
	if( r14 >= r18 ) goto label$3632$89;
	r18 = r12->length;
	if( ((unsigned)r14) < ((unsigned)r18) ) goto label$3632$66;
	r7 = NULL;
	goto label$3632$69;
	label$3632$66:
	r21 = r12->array;
	r8 = ((vdynamic**)(r21 + 1))[r14];
	r7 = (String)r8;
	label$3632$69:
	++r14;
	if( r15 == NULL ) hl_null_access();
	if( r7 == NULL ) hl_null_access();
	r17 = r7->length;
	haxe_io_Output_writeUInt16(((haxe__io__Output)r15),r17);
	r16 = NULL;
	haxe_io_Output_writeString(((haxe__io__Output)r15),r7,r16);
	haxe_io_Output_writeInt32(((haxe__io__Output)r15),r13);
	r22 = r0->bakedData;
	if( r22 == NULL ) hl_null_access();
	r8 = haxe_ds_StringMap_get(r22,r7);
	r5 = (haxe__io__Bytes)r8;
	if( r5 == NULL ) hl_null_access();
	r17 = r5->length;
	haxe_io_Output_writeInt32(((haxe__io__Output)r15),r17);
	r20 = 1;
	r19 = r17 + r20;
	r18 = r13 + r19;
	r13 = r18;
	goto label$3632$58;
	label$3632$89:
	r14 = 0;
	label$3632$90:
	if( r12 == NULL ) hl_null_access();
	r18 = r12->length;
	if( r14 >= r18 ) goto label$3632$112;
	if( r15 == NULL ) hl_null_access();
	r22 = r0->bakedData;
	if( r22 == NULL ) hl_null_access();
	r17 = r14;
	++r14;
	r18 = r12->length;
	if( ((unsigned)r17) < ((unsigned)r18) ) goto label$3632$103;
	r7 = NULL;
	goto label$3632$106;
	label$3632$103:
	r21 = r12->array;
	r8 = ((vdynamic**)(r21 + 1))[r17];
	r7 = (String)r8;
	label$3632$106:
	r8 = haxe_ds_StringMap_get(r22,r7);
	r5 = (haxe__io__Bytes)r8;
	haxe_io_Output_write(((haxe__io__Output)r15),r5);
	r17 = 254;
	haxe_io_BytesOutput_writeByte(r15,r17);
	goto label$3632$90;
	label$3632$112:
	if( r15 == NULL ) hl_null_access();
	r5 = haxe_io_BytesOutput_getBytes(r15);
	hxd_prefab_ContextShared_saveBakedFile(r0,r5);
	return;
}

void hxd_prefab_ContextShared_saveTexture(hxd__prefab__ContextShared r0,String r1,haxe__io__Bytes r2,String r3,String r4) {
	String r5;
	r5 = (String)global$1261;
	hl_throw((vdynamic*)r5);
}

void hxd_prefab_ContextShared_saveBakedFile(hxd__prefab__ContextShared r0,haxe__io__Bytes r1) {
	String r2;
	r2 = (String)global$1262;
	hl_throw((vdynamic*)r2);
}

haxe__io__Bytes hxd_prefab_ContextShared_loadBakedFile(hxd__prefab__ContextShared r0) {
	hxd__fs__FileEntry r6;
	String r2;
	hxd__fs__NotFound r12;
	bool r11;
	haxe__io__Bytes r5;
	haxe__io__Path r1;
	hxd__res__$Loader r9;
	hxd__res__Loader r8;
	hxd__fs__$NotFound r10;
	vdynamic *r4;
	hxd__res__Any r7;
	hl_trap_ctx trap$0;
	r1 = (haxe__io__Path)hl_alloc_obj(haxe__io__Path__val);
	r2 = r0->currentPath;
	haxe_io_Path_new(r1,r2);
	r2 = (String)global$1263;
	r1->ext = r2;
	hl_trap(trap$0,r4,label$3635$18);
	r9 = (hxd__res__$Loader)global$152;
	r8 = r9->currentInstance;
	if( r8 == NULL ) hl_null_access();
	r2 = haxe_io_Path_toString(r1);
	r7 = hxd_res_Loader_load(r8,r2);
	if( r7 == NULL ) hl_null_access();
	r6 = r7->entry;
	if( r6 == NULL ) hl_null_access();
	r5 = ((haxe__io__Bytes (*)(hxd__fs__FileEntry))r6->$type->vobj_proto[1])(r6);
	hl_endtrap(trap$0);
	return r5;
	hl_endtrap(trap$0);
	label$3635$18:
	r10 = (hxd__fs__$NotFound)global$572;
	r11 = hl_BaseType_check(((hl__BaseType)r10),r4);
	if( !r11 ) goto label$3635$24;
	r12 = (hxd__fs__NotFound)r4;
	r5 = NULL;
	return r5;
	label$3635$24:
	hl_rethrow((vdynamic*)r4);
}

void hxd_prefab_ContextShared_loadBakedData(hxd__prefab__ContextShared r0) {
	String r5, r9;
	haxe__ds__StringMap r1;
	venum *r8;
	bool r13;
	haxe__io__Bytes r3, r4;
	vbyte *r14;
	int r6, r7, r10, r11, r12, r15, r16, r17;
	r1 = (haxe__ds__StringMap)hl_alloc_obj(haxe__ds__StringMap__val);
	haxe_ds_StringMap_new(r1);
	r0->bakedData = r1;
	r3 = hxd_prefab_ContextShared_loadBakedFile(r0);
	if( r3 ) goto label$3636$6;
	return;
	label$3636$6:
	if( r3 == NULL ) hl_null_access();
	r6 = 0;
	r7 = 4;
	r8 = NULL;
	r5 = haxe_io_Bytes_getString(r3,r6,r7,r8);
	r9 = (String)global$1260;
	if( r5 == r9 || (r5 && r9 && String___compare(r5,(vdynamic*)r9) == 0) ) goto label$3636$15;
	r5 = (String)global$1264;
	hl_throw((vdynamic*)r5);
	label$3636$15:
	r6 = 8;
	r7 = 0;
	r10 = 4;
	r10 = haxe_io_Bytes_getInt32(r3,r10);
	label$3636$19:
	if( r7 >= r10 ) goto label$3636$62;
	++r7;
	r12 = 1;
	r11 = r6 + r12;
	if( r3 == NULL ) hl_null_access();
	r12 = r3->length;
	if( ((unsigned)r11) >= ((unsigned)r12) ) goto label$3636$29;
	r13 = false;
	goto label$3636$30;
	label$3636$29:
	r13 = true;
	label$3636$30:
	if( !r13 ) goto label$3636$34;
	r12 = 0;
	r11 = r12;
	goto label$3636$37;
	label$3636$34:
	r14 = r3->b;
	r12 = *(unsigned short*)(r14 + r6);
	r11 = r12;
	label$3636$37:
	r15 = 2;
	r12 = r6 + r15;
	r8 = NULL;
	r5 = haxe_io_Bytes_getString(r3,r12,r11,r8);
	r12 = r12 + r11;
	r6 = r12;
	r12 = haxe_io_Bytes_getInt32(r3,r12);
	r16 = 4;
	r15 = r6 + r16;
	r6 = r15;
	r15 = haxe_io_Bytes_getInt32(r3,r15);
	r17 = 4;
	r16 = r6 + r17;
	r6 = r16;
	r1 = r0->bakedData;
	if( r1 == NULL ) hl_null_access();
	r4 = haxe_io_Bytes_sub(r3,r12,r15);
	haxe_ds_StringMap_set(r1,r5,((vdynamic*)r4));
	r16 = r12 + r15;
	r16 = haxe_io_Bytes_get(r3,r16);
	r17 = 254;
	if( r16 == r17 ) goto label$3636$61;
	r9 = (String)global$1265;
	hl_throw((vdynamic*)r9);
	label$3636$61:
	goto label$3636$19;
	label$3636$62:
	return;
}

hl__types__ArrayObj hxd_prefab_ContextShared_getChildrenRoots(hxd__prefab__ContextShared r0,h3d__scene__Object r1,hxd__prefab__Prefab r2,hl__types__ArrayObj r3) {
	haxe__ds__ObjectMap r12;
	hl__types__ArrayObj r5, r9;
	vdynamic *r10;
	h3d__scene__Object r14;
	hxd__prefab__Context r13;
	varray *r11;
	hxd__prefab__Prefab r6;
	int r4, r7, r8;
	r4 = 0;
	if( r2 == NULL ) hl_null_access();
	r5 = r2->children;
	label$3637$3:
	if( r5 == NULL ) hl_null_access();
	r8 = r5->length;
	if( r4 >= r8 ) goto label$3637$30;
	r8 = r5->length;
	if( ((unsigned)r4) < ((unsigned)r8) ) goto label$3637$11;
	r6 = NULL;
	goto label$3637$14;
	label$3637$11:
	r11 = r5->array;
	r10 = ((vdynamic**)(r11 + 1))[r4];
	r6 = (hxd__prefab__Prefab)r10;
	label$3637$14:
	++r4;
	r12 = r0->contexts;
	if( r12 == NULL ) hl_null_access();
	r10 = haxe_ds_ObjectMap_get(r12,((vdynamic*)r6));
	r13 = (hxd__prefab__Context)r10;
	if( r13 ) goto label$3637$21;
	goto label$3637$3;
	label$3637$21:
	if( r13 == NULL ) hl_null_access();
	r14 = r13->local3d;
	if( r14 != r1 ) goto label$3637$26;
	r9 = hxd_prefab_ContextShared_getChildrenRoots(r0,r1,r6,r3);
	goto label$3637$29;
	label$3637$26:
	if( r3 == NULL ) hl_null_access();
	r14 = r13->local3d;
	r7 = hl_types_ArrayObj_push(r3,((vdynamic*)r14));
	label$3637$29:
	goto label$3637$3;
	label$3637$30:
	return r3;
}

hl__types__ArrayObj hxd_prefab_ContextShared_getObjects(hxd__prefab__ContextShared r0,hxd__prefab__Prefab r1,hl__Class r2) {
	haxe__ds__ObjectMap r4;
	hl__types__ArrayObj r7, r12, r13;
	venum *r15;
	hl_type *r9;
	vclosure *r14;
	vdynamic *r3;
	h3d__scene__Object r11;
	int r10, r16;
	varray *r8;
	hxd__prefab__Context r5;
	r4 = r0->contexts;
	if( r4 == NULL ) hl_null_access();
	r3 = haxe_ds_ObjectMap_get(r4,((vdynamic*)r1));
	r5 = (hxd__prefab__Context)r3;
	if( r5 ) goto label$3638$10;
	r9 = &type$1302;
	r10 = 0;
	r8 = hl_alloc_array(r9,r10);
	r7 = hl_types_ArrayObj_alloc(r8);
	return r7;
	label$3638$10:
	if( r5 == NULL ) hl_null_access();
	r11 = r5->local3d;
	r9 = &type$1302;
	r10 = 0;
	r8 = hl_alloc_array(r9,r10);
	r7 = hl_types_ArrayObj_alloc(r8);
	r7 = hxd_prefab_ContextShared_getChildrenRoots(r0,r11,r1,r7);
	r9 = &type$1302;
	r10 = 0;
	r8 = hl_alloc_array(r9,r10);
	r12 = hl_types_ArrayObj_alloc(r8);
	r9 = &type$2587;
	r10 = 1;
	r8 = hl_alloc_array(r9,r10);
	r14 = NULL;
	r10 = 0;
	((vclosure**)(r8 + 1))[r10] = r14;
	r13 = hl_types_ArrayObj_alloc(r8);
	if( r13 == NULL ) hl_null_access();
	r10 = 0;
	r15 = hl_alloc_enum(&type$3650,0);
	((Enum$3650*)r15)->p0 = (hl__Class)r2;
	((Enum$3650*)r15)->p1 = (hl__types__ArrayObj)r7;
	((Enum$3650*)r15)->p2 = (hl__types__ArrayObj)r12;
	((Enum$3650*)r15)->p3 = (hl__types__ArrayObj)r13;
	r14 = hl_alloc_closure_ptr(&type$3649,fun$3642,r15);
	r16 = r13->length;
	if( ((unsigned)r10) < ((unsigned)r16) ) goto label$3638$39;
	hl_types_ArrayObj___expand(r13,r10);
	label$3638$39:
	r8 = r13->array;
	((vclosure**)(r8 + 1))[r10] = r14;
	r10 = 0;
	r16 = r13->length;
	if( ((unsigned)r10) < ((unsigned)r16) ) goto label$3638$46;
	r14 = NULL;
	goto label$3638$49;
	label$3638$46:
	r8 = r13->array;
	r3 = ((vdynamic**)(r8 + 1))[r10];
	r14 = (vclosure*)r3;
	label$3638$49:
	if( r14 == NULL ) hl_null_access();
	r14->hasValue ? ((void (*)(vdynamic*,h3d__scene__Object))r14->fun)((vdynamic*)r14->value,r11) : ((void (*)(h3d__scene__Object))r14->fun)(r11);
	return r12;
}

hl__types__ArrayObj hxd_prefab_ContextShared_getMaterials(hxd__prefab__ContextShared r0,hxd__prefab__Prefab r1) {
	haxe__ds__ObjectMap r3;
	hl__types__ArrayObj r6, r11, r12;
	venum *r14;
	hl_type *r8;
	vclosure *r13;
	vdynamic *r2;
	h3d__scene__Object r10;
	int r9, r15;
	varray *r7;
	hxd__prefab__Context r4;
	r3 = r0->contexts;
	if( r3 == NULL ) hl_null_access();
	r2 = haxe_ds_ObjectMap_get(r3,((vdynamic*)r1));
	r4 = (hxd__prefab__Context)r2;
	if( r4 ) goto label$3639$10;
	r8 = &type$298;
	r9 = 0;
	r7 = hl_alloc_array(r8,r9);
	r6 = hl_types_ArrayObj_alloc(r7);
	return r6;
	label$3639$10:
	if( r4 == NULL ) hl_null_access();
	r10 = r4->local3d;
	r8 = &type$1302;
	r9 = 0;
	r7 = hl_alloc_array(r8,r9);
	r6 = hl_types_ArrayObj_alloc(r7);
	r6 = hxd_prefab_ContextShared_getChildrenRoots(r0,r10,r1,r6);
	r8 = &type$298;
	r9 = 0;
	r7 = hl_alloc_array(r8,r9);
	r11 = hl_types_ArrayObj_alloc(r7);
	r8 = &type$2587;
	r9 = 1;
	r7 = hl_alloc_array(r8,r9);
	r13 = NULL;
	r9 = 0;
	((vclosure**)(r7 + 1))[r9] = r13;
	r12 = hl_types_ArrayObj_alloc(r7);
	if( r12 == NULL ) hl_null_access();
	r9 = 0;
	r14 = hl_alloc_enum(&type$3653,0);
	((Enum$3653*)r14)->p0 = (hl__types__ArrayObj)r6;
	((Enum$3653*)r14)->p1 = (hl__types__ArrayObj)r11;
	((Enum$3653*)r14)->p2 = (hl__types__ArrayObj)r12;
	r13 = hl_alloc_closure_ptr(&type$3652,fun$3643,r14);
	r15 = r12->length;
	if( ((unsigned)r9) < ((unsigned)r15) ) goto label$3639$38;
	hl_types_ArrayObj___expand(r12,r9);
	label$3639$38:
	r7 = r12->array;
	((vclosure**)(r7 + 1))[r9] = r13;
	r9 = 0;
	r15 = r12->length;
	if( ((unsigned)r9) < ((unsigned)r15) ) goto label$3639$45;
	r13 = NULL;
	goto label$3639$48;
	label$3639$45:
	r7 = r12->array;
	r2 = ((vdynamic**)(r7 + 1))[r9];
	r13 = (vclosure*)r2;
	label$3639$48:
	if( r13 == NULL ) hl_null_access();
	r13->hasValue ? ((void (*)(vdynamic*,h3d__scene__Object))r13->fun)((vdynamic*)r13->value,r10) : ((void (*)(h3d__scene__Object))r13->fun)(r10);
	return r11;
}

void hxd_prefab_ContextShared_new(hxd__prefab__ContextShared r0) {
	haxe__ds__ObjectMap r6;
	haxe__ds__StringMap r8;
	h3d__prim__ModelCache r7;
	h2d__Object r1, r2;
	h3d__scene__Object r4, r5;
	r1 = (h2d__Object)hl_alloc_obj(h2d__Object__val);
	r2 = NULL;
	h2d_Object_new(r1,r2);
	r0->root2d = r1;
	r4 = (h3d__scene__Object)hl_alloc_obj(h3d__scene__Object__val);
	r5 = NULL;
	h3d_scene_Object_new(r4,r5);
	r0->root3d = r4;
	r6 = (haxe__ds__ObjectMap)hl_alloc_obj(haxe__ds__ObjectMap__val);
	haxe_ds_ObjectMap_new(r6);
	r0->contexts = r6;
	r6 = (haxe__ds__ObjectMap)hl_alloc_obj(haxe__ds__ObjectMap__val);
	haxe_ds_ObjectMap_new(r6);
	r0->references = r6;
	r7 = (h3d__prim__ModelCache)hl_alloc_obj(h3d__prim__ModelCache__val);
	h3d_prim_ModelCache_new(r7);
	r0->cache = r7;
	r8 = (haxe__ds__StringMap)hl_alloc_obj(haxe__ds__StringMap__val);
	haxe_ds_StringMap_new(r8);
	r0->shaderCache = r8;
	return;
}

