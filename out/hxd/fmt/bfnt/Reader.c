// Generated by HLC 4.0.0 (HL v4)
#include <hl/code.h>

h2d__Font hxd_fmt_bfnt_Reader_read(hxd__fmt__bfnt__Reader r0,vclosure* r1) {
	String r3, r7;
	venum *r6;
	bool r14;
	haxe__ds__IntMap r25;
	h2d__Tile r13, r18;
	h2d__Font r9, r11;
	h2d__FontChar r17;
	int *r22, *r24;
	haxe__io__Input r4, r12;
	vbyte *r26;
	int r5, r8, r10, r15, r16, r19, r20, r21, r23;
	r4 = r0->i;
	if( r4 == NULL ) hl_null_access();
	r5 = 4;
	r6 = NULL;
	r3 = haxe_io_Input_readString(r4,r5,r6);
	r7 = (String)global$1012;
	if( r3 != r7 && (!r3 || !r7 || String___compare(r3,(vdynamic*)r7) != 0) ) goto label$3354$12;
	r4 = r0->i;
	if( r4 == NULL ) hl_null_access();
	r5 = ((int (*)(haxe__io__Input))r4->$type->vobj_proto[0])(r4);
	r8 = 0;
	if( r5 == r8 ) goto label$3354$14;
	label$3354$12:
	r3 = (String)global$1013;
	hl_throw((vdynamic*)r3);
	label$3354$14:
	r9 = NULL;
	r4 = r0->i;
	if( r4 == NULL ) hl_null_access();
	r5 = ((int (*)(haxe__io__Input))r4->$type->vobj_proto[0])(r4);
	r10 = 1;
	if( r5 != r10 ) goto label$3354$116;
	r11 = (h2d__Font)hl_alloc_obj(h2d__Font__val);
	r4 = r0->i;
	if( r4 == NULL ) hl_null_access();
	r12 = r0->i;
	if( r12 == NULL ) hl_null_access();
	r8 = haxe_io_Input_readUInt16(r12);
	r6 = NULL;
	r3 = haxe_io_Input_readString(r4,r8,r6);
	r4 = r0->i;
	if( r4 == NULL ) hl_null_access();
	r8 = haxe_io_Input_readInt16(r4);
	h2d_Font_new(r11,r3,r8);
	r9 = r11;
	r4 = r0->i;
	if( r4 == NULL ) hl_null_access();
	r12 = r0->i;
	if( r12 == NULL ) hl_null_access();
	r8 = haxe_io_Input_readUInt16(r12);
	r6 = NULL;
	r3 = haxe_io_Input_readString(r4,r8,r6);
	r11->tilePath = r3;
	if( r1 == NULL ) hl_null_access();
	r3 = r11->tilePath;
	r13 = r1->hasValue ? ((h2d__Tile (*)(vdynamic*,String))r1->fun)((vdynamic*)r1->value,r3) : ((h2d__Tile (*)(String))r1->fun)(r3);
	r11->tile = r13;
	r4 = r0->i;
	if( r4 == NULL ) hl_null_access();
	r8 = haxe_io_Input_readInt16(r4);
	r11->lineHeight = r8;
	r4 = r0->i;
	if( r4 == NULL ) hl_null_access();
	r8 = haxe_io_Input_readInt16(r4);
	r11->baseLine = r8;
	r4 = r0->i;
	if( r4 == NULL ) hl_null_access();
	r8 = haxe_io_Input_readInt32(r4);
	label$3354$56:
	r14 = true;
	if( !r14 ) goto label$3354$115;
	r4 = r0->i;
	if( r4 == NULL ) hl_null_access();
	r15 = haxe_io_Input_readInt32(r4);
	r10 = r15;
	r16 = 0;
	if( r15 != r16 ) goto label$3354$66;
	goto label$3354$115;
	label$3354$66:
	r17 = (h2d__FontChar)hl_alloc_obj(h2d__FontChar__val);
	if( r13 == NULL ) hl_null_access();
	r4 = r0->i;
	if( r4 == NULL ) hl_null_access();
	r15 = haxe_io_Input_readUInt16(r4);
	r4 = r0->i;
	if( r4 == NULL ) hl_null_access();
	r16 = haxe_io_Input_readUInt16(r4);
	r4 = r0->i;
	if( r4 == NULL ) hl_null_access();
	r19 = haxe_io_Input_readUInt16(r4);
	r4 = r0->i;
	if( r4 == NULL ) hl_null_access();
	r20 = haxe_io_Input_readUInt16(r4);
	r4 = r0->i;
	if( r4 == NULL ) hl_null_access();
	r21 = haxe_io_Input_readInt16(r4);
	r22 = &r21;
	r4 = r0->i;
	if( r4 == NULL ) hl_null_access();
	r23 = haxe_io_Input_readInt16(r4);
	r24 = &r23;
	r18 = h2d_Tile_sub(r13,r15,r16,r19,r20,r22,r24);
	r4 = r0->i;
	if( r4 == NULL ) hl_null_access();
	r15 = haxe_io_Input_readInt16(r4);
	h2d_FontChar_new(r17,r18,r15);
	if( r9 == NULL ) hl_null_access();
	r25 = r9->glyphs;
	if( r25 == NULL ) hl_null_access();
	haxe_ds_IntMap_set(r25,r10,((vdynamic*)r17));
	if( r10 != r8 ) goto label$3354$99;
	r9->defaultChar = r17;
	label$3354$99:
	r14 = true;
	if( !r14 ) goto label$3354$114;
	r4 = r0->i;
	if( r4 == NULL ) hl_null_access();
	r16 = haxe_io_Input_readInt32(r4);
	r19 = 0;
	if( r16 != r19 ) goto label$3354$108;
	goto label$3354$114;
	label$3354$108:
	if( r17 == NULL ) hl_null_access();
	r4 = r0->i;
	if( r4 == NULL ) hl_null_access();
	r19 = haxe_io_Input_readInt16(r4);
	h2d_FontChar_addKerning(r17,r16,r19);
	goto label$3354$99;
	label$3354$114:
	goto label$3354$56;
	label$3354$115:
	goto label$3354$123;
	label$3354$116:
	r3 = (String)global$1014;
	r8 = r5;
	r22 = &r8;
	r26 = hl_itos(r8,r22);
	r7 = String___alloc__(r26,r8);
	r3 = String___add__(r3,r7);
	hl_throw((vdynamic*)r3);
	label$3354$123:
	return r9;
}

void hxd_fmt_bfnt_Reader_new(hxd__fmt__bfnt__Reader r0,haxe__io__Input r1) {
	r0->i = r1;
	return;
}

h2d__Font hxd_fmt_bfnt_Reader_parse(haxe__io__Bytes r0,vclosure* r1) {
	haxe__io__BytesInput r4;
	h2d__Font r2;
	vdynamic *r5, *r6;
	hxd__fmt__bfnt__Reader r3;
	r3 = (hxd__fmt__bfnt__Reader)hl_alloc_obj(hxd__fmt__bfnt__Reader__val);
	r4 = (haxe__io__BytesInput)hl_alloc_obj(haxe__io__BytesInput__val);
	r5 = NULL;
	r6 = NULL;
	haxe_io_BytesInput_new(r4,r0,r5,r6);
	hxd_fmt_bfnt_Reader_new(r3,((haxe__io__Input)r4));
	r2 = hxd_fmt_bfnt_Reader_read(r3,r1);
	return r2;
}

