// Generated by HLC 4.0.0 (HL v4)
#include <hl/code.h>

haxe__io__Bytes hxd_fmt_hmd_Library_getData(hxd__fmt__hmd__Library r0) {
	hxd__fmt__hmd__Data r7;
	hxd__fs__FileEntry r1;
	hxd__res__Resource r2;
	haxe__io__Bytes r4;
	int r5, r6;
	r2 = r0->resource;
	if( r2 == NULL ) hl_null_access();
	r1 = r2->entry;
	if( r1 == NULL ) hl_null_access();
	r5 = ((int (*)(hxd__fs__FileEntry))r1->$type->vobj_proto[14])(r1);
	r7 = r0->header;
	if( r7 == NULL ) hl_null_access();
	r6 = r7->dataPosition;
	r5 = r5 - r6;
	r4 = haxe_io_Bytes_alloc(r5);
	((void (*)(hxd__fs__FileEntry))r1->$type->vobj_proto[2])(r1);
	r7 = r0->header;
	if( r7 == NULL ) hl_null_access();
	r5 = r7->dataPosition;
	((void (*)(hxd__fs__FileEntry,int))r1->$type->vobj_proto[3])(r1,r5);
	r5 = 0;
	if( r4 == NULL ) hl_null_access();
	r6 = r4->length;
	((void (*)(hxd__fs__FileEntry,haxe__io__Bytes,int,int))r1->$type->vobj_proto[5])(r1,r4,r5,r6);
	((void (*)(hxd__fs__FileEntry))r1->$type->vobj_proto[6])(r1);
	return r4;
}

vvirtual* hxd_fmt_hmd_Library_getDefaultFormat(hxd__fmt__hmd__Library r0,int r1) {
	String r7;
	vvirtual *r19;
	hl__types__ArrayObj r2, r9;
	hl_type *r4;
	hxd__fmt__hmd__GeometryFormat r6;
	h3d__Vector r10;
	double r12, r14, r16;
	double *r13, *r15, *r17, *r18;
	int r5, r11;
	varray *r3;
	r4 = &type$2492;
	r5 = 1;
	r3 = hl_alloc_array(r4,r5);
	r6 = (hxd__fmt__hmd__GeometryFormat)hl_alloc_obj(hxd__fmt__hmd__GeometryFormat__val);
	r7 = (String)global$703;
	r5 = 3;
	hxd_fmt_hmd_GeometryFormat_new(r6,r7,r5);
	r5 = 0;
	((hxd__fmt__hmd__GeometryFormat*)(r3 + 1))[r5] = r6;
	r2 = hl_types_ArrayObj_alloc(r3);
	r4 = &type$123;
	r5 = 1;
	r3 = hl_alloc_array(r4,r5);
	r10 = NULL;
	r5 = 0;
	((h3d__Vector*)(r3 + 1))[r5] = r10;
	r9 = hl_types_ArrayObj_alloc(r3);
	r11 = 3;
	if( r11 >= r1 ) goto label$2952$28;
	if( r2 == NULL ) hl_null_access();
	r6 = (hxd__fmt__hmd__GeometryFormat)hl_alloc_obj(hxd__fmt__hmd__GeometryFormat__val);
	r7 = (String)global$702;
	r5 = 3;
	hxd_fmt_hmd_GeometryFormat_new(r6,r7,r5);
	r5 = hl_types_ArrayObj_push(r2,((vdynamic*)r6));
	if( r9 == NULL ) hl_null_access();
	r10 = NULL;
	r5 = hl_types_ArrayObj_push(r9,((vdynamic*)r10));
	label$2952$28:
	r11 = 6;
	if( r11 >= r1 ) goto label$2952$39;
	if( r2 == NULL ) hl_null_access();
	r6 = (hxd__fmt__hmd__GeometryFormat)hl_alloc_obj(hxd__fmt__hmd__GeometryFormat__val);
	r7 = (String)global$711;
	r5 = 2;
	hxd_fmt_hmd_GeometryFormat_new(r6,r7,r5);
	r5 = hl_types_ArrayObj_push(r2,((vdynamic*)r6));
	if( r9 == NULL ) hl_null_access();
	r10 = NULL;
	r5 = hl_types_ArrayObj_push(r9,((vdynamic*)r10));
	label$2952$39:
	r11 = 8;
	if( r11 >= r1 ) goto label$2952$61;
	if( r2 == NULL ) hl_null_access();
	r6 = (hxd__fmt__hmd__GeometryFormat)hl_alloc_obj(hxd__fmt__hmd__GeometryFormat__val);
	r7 = (String)global$712;
	r5 = 3;
	hxd_fmt_hmd_GeometryFormat_new(r6,r7,r5);
	r5 = hl_types_ArrayObj_push(r2,((vdynamic*)r6));
	if( r9 == NULL ) hl_null_access();
	r10 = (h3d__Vector)hl_alloc_obj(h3d__Vector__val);
	r5 = 1;
	r12 = (double)r5;
	r13 = &r12;
	r5 = 1;
	r14 = (double)r5;
	r15 = &r14;
	r5 = 1;
	r16 = (double)r5;
	r17 = &r16;
	r18 = NULL;
	h3d_Vector_new(r10,r13,r15,r17,r18);
	r5 = hl_types_ArrayObj_push(r9,((vdynamic*)r10));
	label$2952$61:
	r11 = 11;
	if( r11 >= r1 ) goto label$2952$65;
	r7 = (String)global$1165;
	hl_throw((vdynamic*)r7);
	label$2952$65:
	r19 = hl_alloc_virtual(&type$3461);
	if( hl_vfields(r19)[1] ) *(hl__types__ArrayObj*)(hl_vfields(r19)[1]) = (hl__types__ArrayObj)r2; else hl_dyn_setp(r19->value,-40988873/*format*/,&type$46,r2);
	if( hl_vfields(r19)[0] ) *(hl__types__ArrayObj*)(hl_vfields(r19)[0]) = (hl__types__ArrayObj)r9; else hl_dyn_setp(r19->value,40260632/*defs*/,&type$46,r9);
	return r19;
}

vvirtual* hxd_fmt_hmd_Library_load(hxd__fmt__hmd__Library r0,hl__types__ArrayObj r1,hl__types__ArrayObj r2,int* r3) {
	bool *r41;
	String r38;
	hxd__fmt__hmd__Model r16;
	hxd__fmt__hmd__Data r13;
	vvirtual *r58;
	hl__types__ArrayObj r10, r32;
	hl_type *r15;
	hl__types__ArrayBytes_hl_UI16 r25, r27, r56;
	hxd__fmt__hmd__GeometryFormat r34;
	hl__types__ArrayBytes_Int r36;
	hxd__fmt__hmd__Geometry r35;
	hl__types__ArrayBytes_Single r19, r21, r44, r55;
	unsigned short r28, r57;
	float r23;
	hxd__fmt__hmd__GeometryBuffer r42;
	double r5, r7, r8, r9, r22, r45, r46, r49, r50, r51, r52;
	hxd__fmt__hmd__Position r40;
	vdynamic *r17, *r43;
	h3d__Matrix r39;
	vbyte *r24;
	varray *r14, *r18;
	int r4, r11, r12, r20, r26, r29, r30, r31, r33, r37, r47, r48, r53, r54;
	if( r3 ) goto label$2953$3;
	r4 = -1;
	goto label$2953$4;
	label$2953$3:
	r4 = *r3;
	label$2953$4:
	r5 = 0.;
	r7 = 0.;
	r8 = 0.;
	r9 = 1.;
	r12 = 0;
	if( r4 >= r12 ) goto label$2953$14;
	r13 = r0->header;
	if( r13 == NULL ) hl_null_access();
	r10 = r13->models;
	goto label$2953$31;
	label$2953$14:
	r15 = &type$2497;
	r11 = 1;
	r14 = hl_alloc_array(r15,r11);
	r13 = r0->header;
	if( r13 == NULL ) hl_null_access();
	r10 = r13->models;
	if( r10 == NULL ) hl_null_access();
	r12 = r10->length;
	if( ((unsigned)r4) < ((unsigned)r12) ) goto label$2953$25;
	r16 = NULL;
	goto label$2953$28;
	label$2953$25:
	r18 = r10->array;
	r17 = ((vdynamic**)(r18 + 1))[r4];
	r16 = (hxd__fmt__hmd__Model)r17;
	label$2953$28:
	r11 = 0;
	((hxd__fmt__hmd__Model*)(r14 + 1))[r11] = r16;
	r10 = hl_types_ArrayObj_alloc(r14);
	label$2953$31:
	r11 = 0;
	r19 = (hl__types__ArrayBytes_Single)hl_alloc_obj(hl__types__ArrayBytes_Single__val);
	hl_types_ArrayBytes_Single_new(r19);
	r20 = 0;
	if( r20 >= r11 ) goto label$2953$49;
	r20 = r19->length;
	if( r20 >= r11 ) goto label$2953$49;
	r20 = 1;
	r12 = r11 - r20;
	r22 = 0.;
	r23 = (float)r22;
	r20 = r19->length;
	if( ((unsigned)r12) < ((unsigned)r20) ) goto label$2953$45;
	hl_types_ArrayBytes_Single___expand(r19,r12);
	label$2953$45:
	r24 = r19->bytes;
	r20 = 2;
	r20 = r12 << r20;
	*(float*)(r24 + r20) = r23;
	label$2953$49:
	r21 = r19;
	r12 = 0;
	r25 = (hl__types__ArrayBytes_hl_UI16)hl_alloc_obj(hl__types__ArrayBytes_hl_UI16__val);
	hl_types_ArrayBytes_hl_UI16_new(r25);
	r26 = 0;
	if( r26 >= r12 ) goto label$2953$69;
	r26 = r25->length;
	if( r26 >= r12 ) goto label$2953$69;
	r26 = 1;
	r20 = r12 - r26;
	r26 = 0;
	r28 = (int)r26;
	r26 = (int)r28;
	r29 = r25->length;
	if( ((unsigned)r20) < ((unsigned)r29) ) goto label$2953$65;
	hl_types_ArrayBytes_hl_UI16___expand(r25,r20);
	label$2953$65:
	r24 = r25->bytes;
	r29 = 1;
	r29 = r20 << r29;
	*(unsigned short*)(r24 + r29) = (unsigned short)r26;
	label$2953$69:
	r27 = r25;
	r20 = 0;
	r26 = -1;
	r29 = 0;
	label$2953$73:
	if( r1 == NULL ) hl_null_access();
	r31 = r1->length;
	if( r29 >= r31 ) goto label$2953$93;
	r31 = r29;
	++r29;
	r33 = r1->length;
	if( ((unsigned)r31) < ((unsigned)r33) ) goto label$2953$83;
	r34 = NULL;
	goto label$2953$86;
	label$2953$83:
	r14 = r1->array;
	r17 = ((vdynamic**)(r14 + 1))[r31];
	r34 = (hxd__fmt__hmd__GeometryFormat)r17;
	label$2953$86:
	if( r34 == NULL ) hl_null_access();
	r31 = r34->format;
	r33 = 7;
	r31 = r31 & r33;
	r30 = r20 + r31;
	r20 = r30;
	goto label$2953$73;
	label$2953$93:
	r29 = 0;
	label$2953$94:
	if( r10 == NULL ) hl_null_access();
	r31 = r10->length;
	if( r29 >= r31 ) goto label$2953$303;
	r31 = r10->length;
	if( ((unsigned)r29) < ((unsigned)r31) ) goto label$2953$102;
	r16 = NULL;
	goto label$2953$105;
	label$2953$102:
	r14 = r10->array;
	r17 = ((vdynamic**)(r14 + 1))[r29];
	r16 = (hxd__fmt__hmd__Model)r17;
	label$2953$105:
	++r29;
	r13 = r0->header;
	if( r13 == NULL ) hl_null_access();
	r32 = r13->geometries;
	if( r32 == NULL ) hl_null_access();
	if( r16 == NULL ) hl_null_access();
	r30 = r16->geometry;
	r31 = r32->length;
	if( ((unsigned)r30) < ((unsigned)r31) ) goto label$2953$116;
	r35 = NULL;
	goto label$2953$119;
	label$2953$116:
	r14 = r32->array;
	r17 = ((vdynamic**)(r14 + 1))[r30];
	r35 = (hxd__fmt__hmd__Geometry)r17;
	label$2953$119:
	if( r35 ) goto label$2953$121;
	goto label$2953$94;
	label$2953$121:
	r30 = 0;
	r36 = r16->materials;
	label$2953$123:
	if( r36 == NULL ) hl_null_access();
	r33 = r36->length;
	if( r30 >= r33 ) goto label$2953$143;
	r33 = r36->length;
	if( ((unsigned)r30) < ((unsigned)r33) ) goto label$2953$131;
	r31 = 0;
	goto label$2953$135;
	label$2953$131:
	r24 = r36->bytes;
	r33 = 2;
	r33 = r30 << r33;
	r31 = *(int*)(r24 + r33);
	label$2953$135:
	++r30;
	r37 = 0;
	if( r26 >= r37 ) goto label$2953$139;
	r26 = r31;
	label$2953$139:
	if( r26 == r31 ) goto label$2953$142;
	r38 = (String)global$1166;
	hl_throw((vdynamic*)r38);
	label$2953$142:
	goto label$2953$123;
	label$2953$143:
	if( r16 == NULL ) hl_null_access();
	r40 = r16->position;
	if( r40 == NULL ) hl_null_access();
	r41 = NULL;
	r39 = hxd_fmt_hmd_Position_toMatrix(r40,r41);
	r43 = NULL;
	r42 = hxd_fmt_hmd_Library_getBuffers(r0,r35,r1,r2,r43);
	if( r21 == NULL ) hl_null_access();
	r30 = r21->length;
	r22 = (double)r30;
	r45 = (double)r20;
	r22 = r22 / r45;
	r30 = (int)r22;
	r31 = 0;
	if( r42 == NULL ) hl_null_access();
	r44 = r42->vertexes;
	if( r44 == NULL ) hl_null_access();
	r33 = r44->length;
	r45 = (double)r33;
	r46 = (double)r20;
	r45 = r45 / r46;
	r33 = (int)r45;
	label$2953$165:
	if( r31 >= r33 ) goto label$2953$279;
	r37 = r31;
	++r31;
	r37 = r37 * r20;
	if( r42 == NULL ) hl_null_access();
	r44 = r42->vertexes;
	if( r44 == NULL ) hl_null_access();
	r47 = r37;
	++r37;
	r48 = r44->length;
	if( ((unsigned)r47) < ((unsigned)r48) ) goto label$2953$179;
	r23 = 0.;
	goto label$2953$183;
	label$2953$179:
	r24 = r44->bytes;
	r48 = 2;
	r48 = r47 << r48;
	r23 = *(float*)(r24 + r48);
	label$2953$183:
	r46 = (double)r23;
	r5 = r46;
	r44 = r42->vertexes;
	if( r44 == NULL ) hl_null_access();
	r47 = r37;
	++r37;
	r48 = r44->length;
	if( ((unsigned)r47) < ((unsigned)r48) ) goto label$2953$193;
	r23 = 0.;
	goto label$2953$197;
	label$2953$193:
	r24 = r44->bytes;
	r48 = 2;
	r48 = r47 << r48;
	r23 = *(float*)(r24 + r48);
	label$2953$197:
	r46 = (double)r23;
	r7 = r46;
	r44 = r42->vertexes;
	if( r44 == NULL ) hl_null_access();
	r47 = r37;
	++r37;
	r48 = r44->length;
	if( ((unsigned)r47) < ((unsigned)r48) ) goto label$2953$207;
	r23 = 0.;
	goto label$2953$211;
	label$2953$207:
	r24 = r44->bytes;
	r48 = 2;
	r48 = r47 << r48;
	r23 = *(float*)(r24 + r48);
	label$2953$211:
	r46 = (double)r23;
	r8 = r46;
	if( r39 == NULL ) hl_null_access();
	r49 = r39->_12;
	r46 = r5 * r49;
	r50 = r39->_22;
	r49 = r7 * r50;
	r46 = r46 + r49;
	r50 = r39->_32;
	r49 = r8 * r50;
	r46 = r46 + r49;
	r50 = r39->_42;
	r49 = r9 * r50;
	r46 = r46 + r49;
	r50 = r39->_13;
	r49 = r5 * r50;
	r51 = r39->_23;
	r50 = r7 * r51;
	r49 = r49 + r50;
	r51 = r39->_33;
	r50 = r8 * r51;
	r49 = r49 + r50;
	r51 = r39->_43;
	r50 = r9 * r51;
	r49 = r49 + r50;
	r51 = r39->_11;
	r50 = r5 * r51;
	r52 = r39->_21;
	r51 = r7 * r52;
	r50 = r50 + r51;
	r52 = r39->_31;
	r51 = r8 * r52;
	r50 = r50 + r51;
	r52 = r39->_41;
	r51 = r9 * r52;
	r50 = r50 + r51;
	r5 = r50;
	r7 = r46;
	if( r21 == NULL ) hl_null_access();
	r23 = (float)r5;
	r47 = hl_types_ArrayBytes_Single_push(r21,r23);
	r23 = (float)r7;
	r47 = hl_types_ArrayBytes_Single_push(r21,r23);
	r23 = (float)r49;
	r47 = hl_types_ArrayBytes_Single_push(r21,r23);
	r47 = 0;
	r53 = 3;
	r48 = r20 - r53;
	label$2953$259:
	if( r47 >= r48 ) goto label$2953$278;
	++r47;
	if( r21 == NULL ) hl_null_access();
	if( r42 == NULL ) hl_null_access();
	r55 = r42->vertexes;
	if( r55 == NULL ) hl_null_access();
	r53 = r37;
	++r37;
	r54 = r55->length;
	if( ((unsigned)r53) < ((unsigned)r54) ) goto label$2953$272;
	r23 = 0.;
	goto label$2953$276;
	label$2953$272:
	r24 = r55->bytes;
	r54 = 2;
	r54 = r53 << r54;
	r23 = *(float*)(r24 + r54);
	label$2953$276:
	r53 = hl_types_ArrayBytes_Single_push(r21,r23);
	goto label$2953$259;
	label$2953$278:
	goto label$2953$165;
	label$2953$279:
	r31 = 0;
	if( r42 == NULL ) hl_null_access();
	r56 = r42->indexes;
	label$2953$282:
	if( r56 == NULL ) hl_null_access();
	r37 = r56->length;
	if( r31 >= r37 ) goto label$2953$302;
	if( r27 == NULL ) hl_null_access();
	r33 = r31;
	++r31;
	r37 = r56->length;
	if( ((unsigned)r33) < ((unsigned)r37) ) goto label$2953$293;
	r33 = 0;
	goto label$2953$297;
	label$2953$293:
	r24 = r56->bytes;
	r37 = 1;
	r37 = r33 << r37;
	r33 = *(unsigned short*)(r24 + r37);
	label$2953$297:
	r28 = (int)r33;
	r57 = (int)r30;
	r28 = r28 + r57;
	r33 = hl_types_ArrayBytes_hl_UI16_push(r27,r28);
	goto label$2953$282;
	label$2953$302:
	goto label$2953$94;
	label$2953$303:
	r58 = hl_alloc_virtual(&type$3463);
	if( hl_vfields(r58)[1] ) *(hl__types__ArrayBytes_Single*)(hl_vfields(r58)[1]) = (hl__types__ArrayBytes_Single)r21; else hl_dyn_setp(r58->value,-515384742/*vertex*/,&type$37,r21);
	if( hl_vfields(r58)[0] ) *(hl__types__ArrayBytes_hl_UI16*)(hl_vfields(r58)[0]) = (hl__types__ArrayBytes_hl_UI16)r27; else hl_dyn_setp(r58->value,-32204280/*index*/,&type$35,r27);
	return r58;
}

hxd__fmt__hmd__GeometryBuffer hxd_fmt_hmd_Library_getBuffers(hxd__fmt__hmd__Library r0,hxd__fmt__hmd__Geometry r1,hl__types__ArrayObj r2,hl__types__ArrayObj r3,vdynamic* r4) {
	hxd__fmt__hmd__Data r37;
	hxd__fs__FileEntry r35;
	String r25, r26;
	hl__types__ArrayObj r13;
	hxd__res__Resource r36;
	haxe__io__Bytes r34, r38;
	bool r21, r29;
	hl__types__ArrayBytes_hl_UI16 r43, r44;
	hxd__fmt__hmd__GeometryFormat r17, r20;
	hl__types__ArrayBytes_Single r40, r41;
	hl__types__ArrayBytes_Int r9, r52;
	h3d__Vector r32;
	unsigned short r45;
	float r42;
	double r50;
	hxd__fmt__hmd__GeometryBuffer r39;
	hxd__fmt__hmd___Library__FormatMap r11, r31, r33;
	int *r27;
	vdynamic *r6, *r8, *r18;
	vbyte *r28;
	varray *r19;
	int r7, r10, r12, r14, r15, r16, r22, r23, r24, r30, r46, r47, r48, r49, r51, r53, r54;
	r7 = 0;
	r8 = hl_alloc_dynamic(&type$3);
	r8->v.i = r7;
	if( r4 != r8 && (!r4 || !r8 || (r4->v.i != r8->v.i)) ) goto label$2954$11;
	if( r1 == NULL ) hl_null_access();
	r9 = r1->indexCounts;
	if( r9 == NULL ) hl_null_access();
	r7 = r9->length;
	r10 = 1;
	if( r7 != r10 ) goto label$2954$11;
	r6 = NULL;
	r4 = r6;
	label$2954$11:
	r11 = NULL;
	r7 = 0;
	r10 = 0;
	if( r2 == NULL ) hl_null_access();
	r12 = r2->length;
	label$2954$16:
	if( r10 >= r12 ) goto label$2954$121;
	if( r2 == NULL ) hl_null_access();
	r14 = r2->length;
	r15 = 1;
	r14 = r14 - r15;
	r15 = r10;
	++r10;
	r14 = r14 - r15;
	r16 = r2->length;
	if( ((unsigned)r14) < ((unsigned)r16) ) goto label$2954$29;
	r17 = NULL;
	goto label$2954$32;
	label$2954$29:
	r19 = r2->array;
	r18 = ((vdynamic**)(r19 + 1))[r14];
	r17 = (hxd__fmt__hmd__GeometryFormat)r18;
	label$2954$32:
	if( r17 == NULL ) hl_null_access();
	r15 = r17->format;
	r16 = 7;
	r15 = r15 & r16;
	r16 = 0;
	r21 = false;
	r22 = 0;
	if( r1 == NULL ) hl_null_access();
	r13 = r1->vertexFormat;
	label$2954$41:
	if( r13 == NULL ) hl_null_access();
	r24 = r13->length;
	if( r22 >= r24 ) goto label$2954$91;
	r24 = r13->length;
	if( ((unsigned)r22) < ((unsigned)r24) ) goto label$2954$49;
	r20 = NULL;
	goto label$2954$52;
	label$2954$49:
	r19 = r13->array;
	r18 = ((vdynamic**)(r19 + 1))[r22];
	r20 = (hxd__fmt__hmd__GeometryFormat)r18;
	label$2954$52:
	++r22;
	if( r20 == NULL ) hl_null_access();
	r25 = r20->name;
	if( r17 == NULL ) hl_null_access();
	r26 = r17->name;
	if( r25 != r26 && (!r25 || !r26 || String___compare(r25,(vdynamic*)r26) != 0) ) goto label$2954$85;
	r23 = r20->format;
	r24 = 7;
	r23 = r23 & r24;
	if( r23 >= r15 ) goto label$2954$82;
	r25 = (String)global$1167;
	r26 = r17->name;
	r25 = String___add__(r25,r26);
	r26 = (String)global$1168;
	r25 = String___add__(r25,r26);
	r23 = r20->format;
	r24 = 7;
	r23 = r23 & r24;
	r27 = &r23;
	r28 = hl_itos(r23,r27);
	r26 = String___alloc__(r28,r23);
	r25 = String___add__(r25,r26);
	r26 = (String)global$1169;
	r25 = String___add__(r25,r26);
	r23 = r15;
	r27 = &r23;
	r28 = hl_itos(r23,r27);
	r26 = String___alloc__(r28,r23);
	r25 = String___add__(r25,r26);
	hl_throw((vdynamic*)r25);
	label$2954$82:
	r29 = true;
	r21 = r29;
	goto label$2954$91;
	label$2954$85:
	r24 = r20->format;
	r30 = 7;
	r24 = r24 & r30;
	r23 = r16 + r24;
	r16 = r23;
	goto label$2954$41;
	label$2954$91:
	if( !r21 ) goto label$2954$97;
	r31 = (hxd__fmt__hmd___Library__FormatMap)hl_alloc_obj(hxd__fmt__hmd___Library__FormatMap__val);
	r32 = NULL;
	hxd_fmt_hmd__Library_FormatMap_new(r31,r15,r16,r32,r11);
	r11 = r31;
	goto label$2954$118;
	label$2954$97:
	if( r3 ) goto label$2954$100;
	r32 = NULL;
	goto label$2954$108;
	label$2954$100:
	if( r3 == NULL ) hl_null_access();
	r23 = r3->length;
	if( ((unsigned)r14) < ((unsigned)r23) ) goto label$2954$105;
	r32 = NULL;
	goto label$2954$108;
	label$2954$105:
	r19 = r3->array;
	r18 = ((vdynamic**)(r19 + 1))[r14];
	r32 = (h3d__Vector)r18;
	label$2954$108:
	if( r32 ) goto label$2954$114;
	r25 = (String)global$1170;
	if( r17 == NULL ) hl_null_access();
	r26 = r17->name;
	r25 = String___add__(r25,r26);
	hl_throw((vdynamic*)r25);
	label$2954$114:
	r31 = (hxd__fmt__hmd___Library__FormatMap)hl_alloc_obj(hxd__fmt__hmd___Library__FormatMap__val);
	r23 = 0;
	hxd_fmt_hmd__Library_FormatMap_new(r31,r15,r23,r32,r11);
	r11 = r31;
	label$2954$118:
	r22 = r7 + r15;
	r7 = r22;
	goto label$2954$16;
	label$2954$121:
	if( r1 == NULL ) hl_null_access();
	r10 = r1->vertexCount;
	r12 = r1->vertexStride;
	r10 = r10 * r12;
	r12 = 4;
	r10 = r10 * r12;
	r34 = haxe_io_Bytes_alloc(r10);
	r36 = r0->resource;
	if( r36 == NULL ) hl_null_access();
	r35 = r36->entry;
	if( r35 == NULL ) hl_null_access();
	((void (*)(hxd__fs__FileEntry))r35->$type->vobj_proto[2])(r35);
	r37 = r0->header;
	if( r37 == NULL ) hl_null_access();
	r12 = r37->dataPosition;
	r14 = r1->vertexPosition;
	r12 = r12 + r14;
	((void (*)(hxd__fs__FileEntry,int))r35->$type->vobj_proto[3])(r35,r12);
	r12 = 0;
	((void (*)(hxd__fs__FileEntry,haxe__io__Bytes,int,int))r35->$type->vobj_proto[5])(r35,r34,r12,r10);
	r12 = r1->indexPosition;
	r14 = r1->vertexPosition;
	r14 = r14 + r10;
	r12 = r12 - r14;
	((void (*)(hxd__fs__FileEntry,int))r35->$type->vobj_proto[3])(r35,r12);
	if( r4 ) goto label$2954$152;
	r14 = hxd_fmt_hmd_Geometry_get_indexCount(r1);
	r15 = 2;
	r14 = r14 * r15;
	r12 = r14;
	goto label$2954$193;
	label$2954$152:
	r14 = 0;
	r15 = 0;
	r6 = r4;
	label$2954$155:
	r22 = r6 ? r6->v.i : 0;
	if( r15 >= r22 ) goto label$2954$174;
	if( r1 == NULL ) hl_null_access();
	r9 = r1->indexCounts;
	if( r9 == NULL ) hl_null_access();
	r22 = r15;
	++r15;
	r23 = r9->length;
	if( ((unsigned)r22) < ((unsigned)r23) ) goto label$2954$167;
	r22 = 0;
	goto label$2954$171;
	label$2954$167:
	r28 = r9->bytes;
	r23 = 2;
	r23 = r22 << r23;
	r22 = *(int*)(r28 + r23);
	label$2954$171:
	r16 = r14 + r22;
	r14 = r16;
	goto label$2954$155;
	label$2954$174:
	if( r35 == NULL ) hl_null_access();
	r16 = 2;
	r15 = r14 * r16;
	((void (*)(hxd__fs__FileEntry,int))r35->$type->vobj_proto[3])(r35,r15);
	if( r1 == NULL ) hl_null_access();
	r9 = r1->indexCounts;
	if( r9 == NULL ) hl_null_access();
	r15 = r4 ? r4->v.i : 0;
	r16 = r9->length;
	if( ((unsigned)r15) < ((unsigned)r16) ) goto label$2954$186;
	r15 = 0;
	goto label$2954$190;
	label$2954$186:
	r28 = r9->bytes;
	r16 = 2;
	r16 = r15 << r16;
	r15 = *(int*)(r28 + r16);
	label$2954$190:
	r16 = 2;
	r15 = r15 * r16;
	r12 = r15;
	label$2954$193:
	r38 = haxe_io_Bytes_alloc(r12);
	r14 = 0;
	((void (*)(hxd__fs__FileEntry,haxe__io__Bytes,int,int))r35->$type->vobj_proto[5])(r35,r38,r14,r12);
	r39 = (hxd__fmt__hmd__GeometryBuffer)hl_alloc_obj(hxd__fmt__hmd__GeometryBuffer__val);
	hxd_fmt_hmd_GeometryBuffer_new(r39);
	if( r4 ) goto label$2954$486;
	r15 = r1->vertexCount;
	r14 = r7 * r15;
	r15 = 0;
	r28 = hl_alloc_bytes(r15);
	r15 = 0;
	r15 = 0;
	r40 = hl_types_ArrayBase_allocF32(r28,r15);
	r16 = 0;
	if( r16 >= r14 ) goto label$2954$220;
	if( r40 == NULL ) hl_null_access();
	r16 = 1;
	r15 = r14 - r16;
	r18 = NULL;
	r42 = (float)hl_dyn_castf(&r18,&type$9);
	r16 = r40->length;
	if( ((unsigned)r15) < ((unsigned)r16) ) goto label$2954$216;
	hl_types_ArrayBytes_Single___expand(r40,r15);
	label$2954$216:
	r28 = r40->bytes;
	r16 = 2;
	r16 = r15 << r16;
	*(float*)(r28 + r16) = r42;
	label$2954$220:
	r39->vertexes = r40;
	r15 = hxd_fmt_hmd_Geometry_get_indexCount(r1);
	r16 = 0;
	r28 = hl_alloc_bytes(r16);
	r16 = 0;
	r16 = 0;
	r43 = hl_types_ArrayBase_allocUI16(r28,r16);
	r22 = 0;
	if( r22 >= r15 ) goto label$2954$242;
	if( r43 == NULL ) hl_null_access();
	r22 = 1;
	r16 = r15 - r22;
	r18 = NULL;
	r45 = (unsigned short)hl_dyn_casti(&r18,&type$9,&type$2);
	r22 = (int)r45;
	r23 = r43->length;
	if( ((unsigned)r16) < ((unsigned)r23) ) goto label$2954$238;
	hl_types_ArrayBytes_hl_UI16___expand(r43,r16);
	label$2954$238:
	r28 = r43->bytes;
	r23 = 1;
	r23 = r16 << r23;
	*(unsigned short*)(r28 + r23) = (unsigned short)r22;
	label$2954$242:
	r39->indexes = r43;
	r16 = 0;
	r22 = 0;
	r23 = r1->vertexCount;
	label$2954$246:
	if( r22 >= r23 ) goto label$2954$452;
	r24 = r22;
	++r22;
	r31 = r11;
	label$2954$251:
	if( !r31 ) goto label$2954$451;
	if( r31 == NULL ) hl_null_access();
	r32 = r31->def;
	if( r32 ) goto label$2954$288;
	if( r1 == NULL ) hl_null_access();
	r46 = r1->vertexStride;
	r30 = r24 * r46;
	r46 = 0;
	r47 = r31->size;
	label$2954$261:
	if( r46 >= r47 ) goto label$2954$287;
	if( r39 == NULL ) hl_null_access();
	r41 = r39->vertexes;
	if( r41 == NULL ) hl_null_access();
	r48 = r16;
	++r16;
	if( r34 == NULL ) hl_null_access();
	if( r31 == NULL ) hl_null_access();
	r51 = r31->offset;
	r49 = r30 + r51;
	r51 = r46;
	++r46;
	r49 = r49 + r51;
	r51 = 2;
	r49 = r49 << r51;
	r50 = haxe_io_Bytes_getFloat(r34,r49);
	r42 = (float)r50;
	r49 = r41->length;
	if( ((unsigned)r48) < ((unsigned)r49) ) goto label$2954$282;
	hl_types_ArrayBytes_Single___expand(r41,r48);
	label$2954$282:
	r28 = r41->bytes;
	r49 = 2;
	r49 = r48 << r49;
	*(float*)(r28 + r49) = r42;
	goto label$2954$261;
	label$2954$287:
	goto label$2954$447;
	label$2954$288:
	r30 = r31->size;
	switch(r30) {
		default:
		case 0:
			if( r39 == NULL ) hl_null_access();
			r41 = r39->vertexes;
			if( r41 == NULL ) hl_null_access();
			r30 = r16;
			++r16;
			r32 = r31->def;
			if( r32 == NULL ) hl_null_access();
			r50 = r32->x;
			r42 = (float)r50;
			r46 = r41->length;
			if( ((unsigned)r30) < ((unsigned)r46) ) goto label$2954$302;
			hl_types_ArrayBytes_Single___expand(r41,r30);
			label$2954$302:
			r28 = r41->bytes;
			r46 = 2;
			r46 = r30 << r46;
			*(float*)(r28 + r46) = r42;
			r41 = r39->vertexes;
			if( r41 == NULL ) hl_null_access();
			r30 = r16;
			++r16;
			r32 = r31->def;
			if( r32 == NULL ) hl_null_access();
			r50 = r32->y;
			r42 = (float)r50;
			r46 = r41->length;
			if( ((unsigned)r30) < ((unsigned)r46) ) goto label$2954$317;
			hl_types_ArrayBytes_Single___expand(r41,r30);
			label$2954$317:
			r28 = r41->bytes;
			r46 = 2;
			r46 = r30 << r46;
			*(float*)(r28 + r46) = r42;
			r41 = r39->vertexes;
			if( r41 == NULL ) hl_null_access();
			r30 = r16;
			++r16;
			r32 = r31->def;
			if( r32 == NULL ) hl_null_access();
			r50 = r32->z;
			r42 = (float)r50;
			r46 = r41->length;
			if( ((unsigned)r30) < ((unsigned)r46) ) goto label$2954$332;
			hl_types_ArrayBytes_Single___expand(r41,r30);
			label$2954$332:
			r28 = r41->bytes;
			r46 = 2;
			r46 = r30 << r46;
			*(float*)(r28 + r46) = r42;
			r41 = r39->vertexes;
			if( r41 == NULL ) hl_null_access();
			r30 = r16;
			++r16;
			r32 = r31->def;
			if( r32 == NULL ) hl_null_access();
			r50 = r32->w;
			r42 = (float)r50;
			r46 = r41->length;
			if( ((unsigned)r30) < ((unsigned)r46) ) goto label$2954$347;
			hl_types_ArrayBytes_Single___expand(r41,r30);
			label$2954$347:
			r28 = r41->bytes;
			r46 = 2;
			r46 = r30 << r46;
			*(float*)(r28 + r46) = r42;
			goto label$2954$447;
		case 1:
			if( r39 == NULL ) hl_null_access();
			r41 = r39->vertexes;
			if( r41 == NULL ) hl_null_access();
			r30 = r16;
			++r16;
			r32 = r31->def;
			if( r32 == NULL ) hl_null_access();
			r50 = r32->x;
			r42 = (float)r50;
			r46 = r41->length;
			if( ((unsigned)r30) < ((unsigned)r46) ) goto label$2954$364;
			hl_types_ArrayBytes_Single___expand(r41,r30);
			label$2954$364:
			r28 = r41->bytes;
			r46 = 2;
			r46 = r30 << r46;
			*(float*)(r28 + r46) = r42;
			goto label$2954$447;
		case 2:
			if( r39 == NULL ) hl_null_access();
			r41 = r39->vertexes;
			if( r41 == NULL ) hl_null_access();
			r30 = r16;
			++r16;
			r32 = r31->def;
			if( r32 == NULL ) hl_null_access();
			r50 = r32->x;
			r42 = (float)r50;
			r46 = r41->length;
			if( ((unsigned)r30) < ((unsigned)r46) ) goto label$2954$381;
			hl_types_ArrayBytes_Single___expand(r41,r30);
			label$2954$381:
			r28 = r41->bytes;
			r46 = 2;
			r46 = r30 << r46;
			*(float*)(r28 + r46) = r42;
			r41 = r39->vertexes;
			if( r41 == NULL ) hl_null_access();
			r30 = r16;
			++r16;
			r32 = r31->def;
			if( r32 == NULL ) hl_null_access();
			r50 = r32->y;
			r42 = (float)r50;
			r46 = r41->length;
			if( ((unsigned)r30) < ((unsigned)r46) ) goto label$2954$396;
			hl_types_ArrayBytes_Single___expand(r41,r30);
			label$2954$396:
			r28 = r41->bytes;
			r46 = 2;
			r46 = r30 << r46;
			*(float*)(r28 + r46) = r42;
			goto label$2954$447;
		case 3:
			if( r39 == NULL ) hl_null_access();
			r41 = r39->vertexes;
			if( r41 == NULL ) hl_null_access();
			r30 = r16;
			++r16;
			r32 = r31->def;
			if( r32 == NULL ) hl_null_access();
			r50 = r32->x;
			r42 = (float)r50;
			r46 = r41->length;
			if( ((unsigned)r30) < ((unsigned)r46) ) goto label$2954$413;
			hl_types_ArrayBytes_Single___expand(r41,r30);
			label$2954$413:
			r28 = r41->bytes;
			r46 = 2;
			r46 = r30 << r46;
			*(float*)(r28 + r46) = r42;
			r41 = r39->vertexes;
			if( r41 == NULL ) hl_null_access();
			r30 = r16;
			++r16;
			r32 = r31->def;
			if( r32 == NULL ) hl_null_access();
			r50 = r32->y;
			r42 = (float)r50;
			r46 = r41->length;
			if( ((unsigned)r30) < ((unsigned)r46) ) goto label$2954$428;
			hl_types_ArrayBytes_Single___expand(r41,r30);
			label$2954$428:
			r28 = r41->bytes;
			r46 = 2;
			r46 = r30 << r46;
			*(float*)(r28 + r46) = r42;
			r41 = r39->vertexes;
			if( r41 == NULL ) hl_null_access();
			r30 = r16;
			++r16;
			r32 = r31->def;
			if( r32 == NULL ) hl_null_access();
			r50 = r32->z;
			r42 = (float)r50;
			r46 = r41->length;
			if( ((unsigned)r30) < ((unsigned)r46) ) goto label$2954$443;
			hl_types_ArrayBytes_Single___expand(r41,r30);
			label$2954$443:
			r28 = r41->bytes;
			r46 = 2;
			r46 = r30 << r46;
			*(float*)(r28 + r46) = r42;
	}
	label$2954$447:
	if( r31 == NULL ) hl_null_access();
	r33 = r31->next;
	r31 = r33;
	goto label$2954$251;
	label$2954$451:
	goto label$2954$246;
	label$2954$452:
	r22 = 0;
	r23 = 0;
	if( r39 == NULL ) hl_null_access();
	r44 = r39->indexes;
	if( r44 == NULL ) hl_null_access();
	r24 = r44->length;
	label$2954$458:
	if( r23 >= r24 ) goto label$2954$485;
	if( r39 == NULL ) hl_null_access();
	r44 = r39->indexes;
	if( r44 == NULL ) hl_null_access();
	r30 = r23;
	++r23;
	if( r38 == NULL ) hl_null_access();
	r46 = r22;
	++r22;
	r46 = haxe_io_Bytes_get(r38,r46);
	r47 = r22;
	++r22;
	r47 = haxe_io_Bytes_get(r38,r47);
	r48 = 8;
	r47 = r47 << r48;
	r46 = r46 | r47;
	r45 = (int)r46;
	r46 = (int)r45;
	r47 = r44->length;
	if( ((unsigned)r30) < ((unsigned)r47) ) goto label$2954$480;
	hl_types_ArrayBytes_hl_UI16___expand(r44,r30);
	label$2954$480:
	r28 = r44->bytes;
	r47 = 1;
	r47 = r30 << r47;
	*(unsigned short*)(r28 + r47) = (unsigned short)r46;
	goto label$2954$458;
	label$2954$485:
	goto label$2954$689;
	label$2954$486:
	r9 = r1->indexCounts;
	if( r9 == NULL ) hl_null_access();
	r14 = r4 ? r4->v.i : 0;
	r15 = r9->length;
	if( ((unsigned)r14) < ((unsigned)r15) ) goto label$2954$493;
	r14 = 0;
	goto label$2954$497;
	label$2954$493:
	r28 = r9->bytes;
	r15 = 2;
	r15 = r14 << r15;
	r14 = *(int*)(r28 + r15);
	label$2954$497:
	r15 = r1->vertexCount;
	r16 = 0;
	r28 = hl_alloc_bytes(r16);
	r16 = 0;
	r16 = 0;
	r9 = hl_types_ArrayBase_allocI32(r28,r16);
	r22 = 0;
	if( r22 >= r15 ) goto label$2954$517;
	if( r9 == NULL ) hl_null_access();
	r22 = 1;
	r16 = r15 - r22;
	r18 = NULL;
	r22 = (int)hl_dyn_casti(&r18,&type$9,&type$3);
	r23 = r9->length;
	if( ((unsigned)r16) < ((unsigned)r23) ) goto label$2954$513;
	hl_types_ArrayBytes_Int___expand(r9,r16);
	label$2954$513:
	r28 = r9->bytes;
	r23 = 2;
	r23 = r16 << r23;
	*(int*)(r28 + r23) = r22;
	label$2954$517:
	r52 = r9;
	r40 = (hl__types__ArrayBytes_Single)hl_alloc_obj(hl__types__ArrayBytes_Single__val);
	hl_types_ArrayBytes_Single_new(r40);
	r16 = 0;
	r28 = hl_alloc_bytes(r16);
	r16 = 0;
	r16 = 0;
	r43 = hl_types_ArrayBase_allocUI16(r28,r16);
	r22 = 0;
	if( r22 >= r14 ) goto label$2954$540;
	if( r43 == NULL ) hl_null_access();
	r22 = 1;
	r16 = r14 - r22;
	r18 = NULL;
	r45 = (unsigned short)hl_dyn_casti(&r18,&type$9,&type$2);
	r22 = (int)r45;
	r23 = r43->length;
	if( ((unsigned)r16) < ((unsigned)r23) ) goto label$2954$536;
	hl_types_ArrayBytes_hl_UI16___expand(r43,r16);
	label$2954$536:
	r28 = r43->bytes;
	r23 = 1;
	r23 = r16 << r23;
	*(unsigned short*)(r28 + r23) = (unsigned short)r22;
	label$2954$540:
	r39->indexes = r43;
	r16 = 0;
	r22 = 0;
	r23 = 0;
	r44 = r39->indexes;
	if( r44 == NULL ) hl_null_access();
	r24 = r44->length;
	label$2954$547:
	if( r23 >= r24 ) goto label$2954$687;
	r30 = r23;
	++r23;
	if( r38 == NULL ) hl_null_access();
	r46 = r16;
	++r16;
	r46 = haxe_io_Bytes_get(r38,r46);
	r47 = r16;
	++r16;
	r47 = haxe_io_Bytes_get(r38,r47);
	r48 = 8;
	r47 = r47 << r48;
	r46 = r46 | r47;
	if( r52 == NULL ) hl_null_access();
	r48 = r52->length;
	if( ((unsigned)r46) < ((unsigned)r48) ) goto label$2954$566;
	r47 = 0;
	goto label$2954$570;
	label$2954$566:
	r28 = r52->bytes;
	r48 = 2;
	r48 = r46 << r48;
	r47 = *(int*)(r28 + r48);
	label$2954$570:
	r49 = 0;
	if( r47 != r49 ) goto label$2954$672;
	++r22;
	r47 = r22;
	r51 = r52->length;
	if( ((unsigned)r46) < ((unsigned)r51) ) goto label$2954$577;
	hl_types_ArrayBytes_Int___expand(r52,r46);
	label$2954$577:
	r28 = r52->bytes;
	r51 = 2;
	r51 = r46 << r51;
	*(int*)(r28 + r51) = r22;
	r31 = r11;
	label$2954$582:
	if( !r31 ) goto label$2954$672;
	if( r31 == NULL ) hl_null_access();
	r32 = r31->def;
	if( r32 ) goto label$2954$609;
	if( r1 == NULL ) hl_null_access();
	r49 = r1->vertexStride;
	r48 = r46 * r49;
	r49 = 0;
	r51 = r31->size;
	label$2954$592:
	if( r49 >= r51 ) goto label$2954$608;
	if( r40 == NULL ) hl_null_access();
	if( r34 == NULL ) hl_null_access();
	if( r31 == NULL ) hl_null_access();
	r54 = r31->offset;
	r53 = r48 + r54;
	r54 = r49;
	++r49;
	r53 = r53 + r54;
	r54 = 2;
	r53 = r53 << r54;
	r50 = haxe_io_Bytes_getFloat(r34,r53);
	r42 = (float)r50;
	r53 = hl_types_ArrayBytes_Single_push(r40,r42);
	goto label$2954$592;
	label$2954$608:
	goto label$2954$668;
	label$2954$609:
	r48 = r31->size;
	switch(r48) {
		default:
		case 0:
			if( r40 == NULL ) hl_null_access();
			r32 = r31->def;
			if( r32 == NULL ) hl_null_access();
			r50 = r32->x;
			r42 = (float)r50;
			r48 = hl_types_ArrayBytes_Single_push(r40,r42);
			r32 = r31->def;
			if( r32 == NULL ) hl_null_access();
			r50 = r32->y;
			r42 = (float)r50;
			r48 = hl_types_ArrayBytes_Single_push(r40,r42);
			r32 = r31->def;
			if( r32 == NULL ) hl_null_access();
			r50 = r32->z;
			r42 = (float)r50;
			r48 = hl_types_ArrayBytes_Single_push(r40,r42);
			r32 = r31->def;
			if( r32 == NULL ) hl_null_access();
			r50 = r32->w;
			r42 = (float)r50;
			r48 = hl_types_ArrayBytes_Single_push(r40,r42);
			goto label$2954$668;
		case 1:
			if( r40 == NULL ) hl_null_access();
			r32 = r31->def;
			if( r32 == NULL ) hl_null_access();
			r50 = r32->x;
			r42 = (float)r50;
			r48 = hl_types_ArrayBytes_Single_push(r40,r42);
			goto label$2954$668;
		case 2:
			if( r40 == NULL ) hl_null_access();
			r32 = r31->def;
			if( r32 == NULL ) hl_null_access();
			r50 = r32->x;
			r42 = (float)r50;
			r48 = hl_types_ArrayBytes_Single_push(r40,r42);
			r32 = r31->def;
			if( r32 == NULL ) hl_null_access();
			r50 = r32->y;
			r42 = (float)r50;
			r48 = hl_types_ArrayBytes_Single_push(r40,r42);
			goto label$2954$668;
		case 3:
			if( r40 == NULL ) hl_null_access();
			r32 = r31->def;
			if( r32 == NULL ) hl_null_access();
			r50 = r32->x;
			r42 = (float)r50;
			r48 = hl_types_ArrayBytes_Single_push(r40,r42);
			r32 = r31->def;
			if( r32 == NULL ) hl_null_access();
			r50 = r32->y;
			r42 = (float)r50;
			r48 = hl_types_ArrayBytes_Single_push(r40,r42);
			r32 = r31->def;
			if( r32 == NULL ) hl_null_access();
			r50 = r32->z;
			r42 = (float)r50;
			r48 = hl_types_ArrayBytes_Single_push(r40,r42);
	}
	label$2954$668:
	if( r31 == NULL ) hl_null_access();
	r33 = r31->next;
	r31 = r33;
	goto label$2954$582;
	label$2954$672:
	if( r39 == NULL ) hl_null_access();
	r44 = r39->indexes;
	if( r44 == NULL ) hl_null_access();
	r51 = 1;
	r49 = r47 - r51;
	r45 = (int)r49;
	r49 = (int)r45;
	r51 = r44->length;
	if( ((unsigned)r30) < ((unsigned)r51) ) goto label$2954$682;
	hl_types_ArrayBytes_hl_UI16___expand(r44,r30);
	label$2954$682:
	r28 = r44->bytes;
	r51 = 1;
	r51 = r30 << r51;
	*(unsigned short*)(r28 + r51) = (unsigned short)r49;
	goto label$2954$547;
	label$2954$687:
	if( r39 == NULL ) hl_null_access();
	r39->vertexes = r40;
	label$2954$689:
	if( r35 == NULL ) hl_null_access();
	((void (*)(hxd__fs__FileEntry))r35->$type->vobj_proto[6])(r35);
	return r39;
}

h3d__prim__HMDModel hxd_fmt_hmd_Library_makePrimitive(hxd__fmt__hmd__Library r0,int r1) {
	hxd__fmt__hmd__Data r10;
	hl__types__ArrayObj r2;
	hxd__fmt__hmd__Geometry r11;
	h3d__prim__HMDModel r5, r9;
	vdynamic *r6;
	varray *r7;
	int r3, r4;
	r2 = r0->cachedPrimitives;
	if( r2 == NULL ) hl_null_access();
	r4 = r2->length;
	if( ((unsigned)r1) < ((unsigned)r4) ) goto label$2955$6;
	r5 = NULL;
	goto label$2955$9;
	label$2955$6:
	r7 = r2->array;
	r6 = ((vdynamic**)(r7 + 1))[r1];
	r5 = (h3d__prim__HMDModel)r6;
	label$2955$9:
	if( !r5 ) goto label$2955$11;
	return r5;
	label$2955$11:
	r9 = (h3d__prim__HMDModel)hl_alloc_obj(h3d__prim__HMDModel__val);
	r10 = r0->header;
	if( r10 == NULL ) hl_null_access();
	r2 = r10->geometries;
	if( r2 == NULL ) hl_null_access();
	r4 = r2->length;
	if( ((unsigned)r1) < ((unsigned)r4) ) goto label$2955$20;
	r11 = NULL;
	goto label$2955$23;
	label$2955$20:
	r7 = r2->array;
	r6 = ((vdynamic**)(r7 + 1))[r1];
	r11 = (hxd__fmt__hmd__Geometry)r6;
	label$2955$23:
	r10 = r0->header;
	if( r10 == NULL ) hl_null_access();
	r3 = r10->dataPosition;
	h3d_prim_HMDModel_new(r9,r11,r3,r0);
	r2 = r0->cachedPrimitives;
	if( r2 == NULL ) hl_null_access();
	r4 = r2->length;
	if( ((unsigned)r1) < ((unsigned)r4) ) goto label$2955$32;
	hl_types_ArrayObj___expand(r2,r1);
	label$2955$32:
	r7 = r2->array;
	((h3d__prim__HMDModel*)(r7 + 1))[r1] = r9;
	return r9;
}

h3d__mat__Material hxd_fmt_hmd_Library_makeMaterial(hxd__fmt__hmd__Library r0,hxd__fmt__hmd__Model r1,int r2,vclosure* r3) {
	String r14;
	hxd__fmt__hmd__Data r5;
	hxd__fmt__hmd__Material r8;
	vvirtual *r17;
	hl__types__ArrayObj r4;
	hxd__res__Resource r19;
	venum *r18;
	h3d__mat__Material r11;
	h3d__mat__$MaterialSetup r13;
	h3d__mat__MaterialSetup r12;
	vdynamic *r9, *r16, *r20;
	h3d__mat__Texture r15;
	varray *r10;
	int r6, r7;
	r5 = r0->header;
	if( r5 == NULL ) hl_null_access();
	r4 = r5->materials;
	if( r4 == NULL ) hl_null_access();
	r7 = r4->length;
	if( ((unsigned)r2) < ((unsigned)r7) ) goto label$2956$8;
	r8 = NULL;
	goto label$2956$11;
	label$2956$8:
	r10 = r4->array;
	r9 = ((vdynamic**)(r10 + 1))[r2];
	r8 = (hxd__fmt__hmd__Material)r9;
	label$2956$11:
	r13 = (h3d__mat__$MaterialSetup)global$558;
	r12 = r13->current;
	if( r12 == NULL ) hl_null_access();
	r11 = h3d_mat_MaterialSetup_createMaterial(r12);
	if( r11 == NULL ) hl_null_access();
	if( r8 == NULL ) hl_null_access();
	r14 = r8->name;
	r11->name = r14;
	r14 = r8->diffuseTexture;
	if( !r14 ) goto label$2956$32;
	if( r3 == NULL ) hl_null_access();
	r14 = r8->diffuseTexture;
	r15 = r3->hasValue ? ((h3d__mat__Texture (*)(vdynamic*,String))r3->fun)((vdynamic*)r3->value,r14) : ((h3d__mat__Texture (*)(String))r3->fun)(r14);
	r15 = h3d_mat_Material_set_texture(r11,r15);
	r15 = h3d_mat_Material_get_texture(r11);
	if( r15 ) goto label$2956$32;
	r6 = 16711935;
	r16 = NULL;
	r17 = NULL;
	r15 = h3d_mat_Texture_fromColor(r6,r16,r17);
	r15 = h3d_mat_Material_set_texture(r11,r15);
	label$2956$32:
	r14 = r8->specularTexture;
	if( !r14 ) goto label$2956$38;
	if( r3 == NULL ) hl_null_access();
	r14 = r8->specularTexture;
	r15 = r3->hasValue ? ((h3d__mat__Texture (*)(vdynamic*,String))r3->fun)((vdynamic*)r3->value,r14) : ((h3d__mat__Texture (*)(String))r3->fun)(r14);
	r15 = h3d_mat_Material_set_specularTexture(r11,r15);
	label$2956$38:
	r14 = r8->normalMap;
	if( !r14 ) goto label$2956$44;
	if( r3 == NULL ) hl_null_access();
	r14 = r8->normalMap;
	r15 = r3->hasValue ? ((h3d__mat__Texture (*)(vdynamic*,String))r3->fun)((vdynamic*)r3->value,r14) : ((h3d__mat__Texture (*)(String))r3->fun)(r14);
	r15 = h3d_mat_Material_set_normalMap(r11,r15);
	label$2956$44:
	r18 = r8->blendMode;
	r18 = h3d_mat_Material_set_blendMode(r11,r18);
	r19 = r0->resource;
	r11->model = r19;
	r13 = (h3d__mat__$MaterialSetup)global$558;
	r12 = r13->current;
	if( r12 == NULL ) hl_null_access();
	r9 = h3d_mat_MaterialSetup_loadMaterialProps(r12,r11);
	if( r9 ) goto label$2956$55;
	r20 = h3d_mat_Material_getDefaultModelProps(r11);
	r9 = r20;
	label$2956$55:
	r20 = hxd_impl_AnyProps_set_props(((hxd__impl__AnyProps)r11),r9);
	return r11;
}

h3d__anim__Skin hxd_fmt_hmd_Library_makeSkin(hxd__fmt__hmd__Library r0,hxd__fmt__hmd__Skin r1) {
	bool *r20;
	String r4;
	h3d__anim__Joint r16, r17;
	vvirtual *r29;
	hl__types__ArrayObj r10, r14, r23, r27;
	haxe__ds__StringMap r3;
	hl_type *r12;
	bool r21;
	h3d__anim__Skin r5, r7;
	hl__types__ArrayBytes_Int r24;
	hxd__fmt__hmd__SkinSplit r22;
	hxd__fmt__hmd__Position r19;
	vdynamic *r2;
	vbyte *r28;
	h3d__Matrix r18;
	hxd__fmt__hmd__SkinJoint r15;
	varray *r11;
	int r8, r9, r13, r25, r26;
	r3 = r0->cachedSkin;
	if( r3 == NULL ) hl_null_access();
	if( r1 == NULL ) hl_null_access();
	r4 = r1->name;
	r2 = haxe_ds_StringMap_get(r3,r4);
	r5 = (h3d__anim__Skin)r2;
	if( !r5 ) goto label$2957$8;
	return r5;
	label$2957$8:
	r7 = (h3d__anim__Skin)hl_alloc_obj(h3d__anim__Skin__val);
	r4 = r1->name;
	r8 = 0;
	r9 = 3;
	h3d_anim_Skin_new(r7,r4,r8,r9);
	r5 = r7;
	r3 = (haxe__ds__StringMap)hl_alloc_obj(haxe__ds__StringMap__val);
	haxe_ds_StringMap_new(r3);
	r7->namedJoints = r3;
	r12 = &type$1871;
	r8 = 0;
	r11 = hl_alloc_array(r12,r8);
	r10 = hl_types_ArrayObj_alloc(r11);
	r7->allJoints = r10;
	r12 = &type$1871;
	r8 = 0;
	r11 = hl_alloc_array(r12,r8);
	r10 = hl_types_ArrayObj_alloc(r11);
	r7->boundJoints = r10;
	r12 = &type$1871;
	r8 = 0;
	r11 = hl_alloc_array(r12,r8);
	r10 = hl_types_ArrayObj_alloc(r11);
	r7->rootJoints = r10;
	r8 = 0;
	r10 = r1->joints;
	label$2957$34:
	if( r10 == NULL ) hl_null_access();
	r13 = r10->length;
	if( r8 >= r13 ) goto label$2957$110;
	r13 = r10->length;
	if( ((unsigned)r8) < ((unsigned)r13) ) goto label$2957$42;
	r15 = NULL;
	goto label$2957$45;
	label$2957$42:
	r11 = r10->array;
	r2 = ((vdynamic**)(r11 + 1))[r8];
	r15 = (hxd__fmt__hmd__SkinJoint)r2;
	label$2957$45:
	++r8;
	r16 = (h3d__anim__Joint)hl_alloc_obj(h3d__anim__Joint__val);
	h3d_anim_Joint_new(r16);
	if( r15 == NULL ) hl_null_access();
	r4 = r15->name;
	r16->name = r4;
	if( r5 == NULL ) hl_null_access();
	r14 = r5->allJoints;
	if( r14 == NULL ) hl_null_access();
	r9 = r14->length;
	r16->index = r9;
	r19 = r15->position;
	if( r19 == NULL ) hl_null_access();
	r20 = NULL;
	r18 = hxd_fmt_hmd_Position_toMatrix(r19,r20);
	r16->defMat = r18;
	r9 = r15->bind;
	r13 = 0;
	if( r9 < r13 ) goto label$2957$80;
	r9 = r15->bind;
	r16->bindIndex = r9;
	r19 = r15->transpos;
	if( r19 == NULL ) hl_null_access();
	r21 = true;
	r20 = &r21;
	r18 = hxd_fmt_hmd_Position_toMatrix(r19,r20);
	r16->transPos = r18;
	r14 = r5->boundJoints;
	if( r14 == NULL ) hl_null_access();
	r9 = r16->bindIndex;
	r13 = r14->length;
	if( ((unsigned)r9) < ((unsigned)r13) ) goto label$2957$78;
	hl_types_ArrayObj___expand(r14,r9);
	label$2957$78:
	r11 = r14->array;
	((h3d__anim__Joint*)(r11 + 1))[r9] = r16;
	label$2957$80:
	r9 = r15->parent;
	r13 = 0;
	if( r9 < r13 ) goto label$2957$99;
	r14 = r5->allJoints;
	if( r14 == NULL ) hl_null_access();
	r9 = r15->parent;
	r13 = r14->length;
	if( ((unsigned)r9) < ((unsigned)r13) ) goto label$2957$90;
	r17 = NULL;
	goto label$2957$93;
	label$2957$90:
	r11 = r14->array;
	r2 = ((vdynamic**)(r11 + 1))[r9];
	r17 = (h3d__anim__Joint)r2;
	label$2957$93:
	if( r17 == NULL ) hl_null_access();
	r14 = r17->subs;
	if( r14 == NULL ) hl_null_access();
	r9 = hl_types_ArrayObj_push(r14,((vdynamic*)r16));
	r16->parent = r17;
	goto label$2957$102;
	label$2957$99:
	r14 = r5->rootJoints;
	if( r14 == NULL ) hl_null_access();
	r9 = hl_types_ArrayObj_push(r14,((vdynamic*)r16));
	label$2957$102:
	r14 = r5->allJoints;
	if( r14 == NULL ) hl_null_access();
	r9 = hl_types_ArrayObj_push(r14,((vdynamic*)r16));
	r3 = r5->namedJoints;
	if( r3 == NULL ) hl_null_access();
	r4 = r16->name;
	haxe_ds_StringMap_set(r3,r4,((vdynamic*)r16));
	goto label$2957$34;
	label$2957$110:
	if( r1 == NULL ) hl_null_access();
	r10 = r1->split;
	if( !r10 ) goto label$2957$176;
	if( r5 == NULL ) hl_null_access();
	r12 = &type$1924;
	r8 = 0;
	r11 = hl_alloc_array(r12,r8);
	r10 = hl_types_ArrayObj_alloc(r11);
	r5->splitJoints = r10;
	r8 = 0;
	r10 = r1->split;
	label$2957$121:
	if( r10 == NULL ) hl_null_access();
	r13 = r10->length;
	if( r8 >= r13 ) goto label$2957$176;
	r13 = r10->length;
	if( ((unsigned)r8) < ((unsigned)r13) ) goto label$2957$129;
	r22 = NULL;
	goto label$2957$132;
	label$2957$129:
	r11 = r10->array;
	r2 = ((vdynamic**)(r11 + 1))[r8];
	r22 = (hxd__fmt__hmd__SkinSplit)r2;
	label$2957$132:
	++r8;
	if( r5 == NULL ) hl_null_access();
	r14 = r5->splitJoints;
	if( r22 == NULL ) hl_null_access();
	r9 = r22->materialIndex;
	r12 = &type$1871;
	r13 = 0;
	r11 = hl_alloc_array(r12,r13);
	r23 = hl_types_ArrayObj_alloc(r11);
	r13 = 0;
	r24 = r22->joints;
	label$2957$143:
	if( r24 == NULL ) hl_null_access();
	r26 = r24->length;
	if( r13 >= r26 ) goto label$2957$170;
	if( r23 == NULL ) hl_null_access();
	if( r5 == NULL ) hl_null_access();
	r27 = r5->allJoints;
	if( r27 == NULL ) hl_null_access();
	r25 = r13;
	++r13;
	r26 = r24->length;
	if( ((unsigned)r25) < ((unsigned)r26) ) goto label$2957$157;
	r25 = 0;
	goto label$2957$161;
	label$2957$157:
	r28 = r24->bytes;
	r26 = 2;
	r26 = r25 << r26;
	r25 = *(int*)(r28 + r26);
	label$2957$161:
	r26 = r27->length;
	if( ((unsigned)r25) < ((unsigned)r26) ) goto label$2957$165;
	r16 = NULL;
	goto label$2957$168;
	label$2957$165:
	r11 = r27->array;
	r2 = ((vdynamic**)(r11 + 1))[r25];
	r16 = (h3d__anim__Joint)r2;
	label$2957$168:
	r25 = hl_types_ArrayObj_push(r23,((vdynamic*)r16));
	goto label$2957$143;
	label$2957$170:
	if( r14 == NULL ) hl_null_access();
	r29 = hl_alloc_virtual(&type$1924);
	if( hl_vfields(r29)[1] ) *(int*)(hl_vfields(r29)[1]) = (int)r9; else hl_dyn_seti(r29->value,-257598297/*material*/,&type$3,r9);
	if( hl_vfields(r29)[0] ) *(hl__types__ArrayObj*)(hl_vfields(r29)[0]) = (hl__types__ArrayObj)r23; else hl_dyn_setp(r29->value,-251009446/*joints*/,&type$46,r23);
	r13 = hl_types_ArrayObj_push(r14,((vdynamic*)r29));
	goto label$2957$121;
	label$2957$176:
	r3 = r0->cachedSkin;
	if( r3 == NULL ) hl_null_access();
	if( r1 == NULL ) hl_null_access();
	r4 = r1->name;
	haxe_ds_StringMap_set(r3,r4,((vdynamic*)r5));
	return r5;
}

vdynamic* hxd_fmt_hmd_Library_getModelProperty(hxd__fmt__hmd__Library r0,String r1,venum* r2,vdynamic* r3) {
	String r13, r14;
	hxd__fmt__hmd__Model r10;
	hxd__fmt__hmd__Data r6;
	hl__types__ArrayObj r5, r9;
	venum *r16;
	hl__types__ArrayDyn r17;
	vdynamic *r11;
	varray *r12;
	int r4, r7, r8, r15;
	r4 = 0;
	r6 = r0->header;
	if( r6 == NULL ) hl_null_access();
	r5 = r6->models;
	label$2958$4:
	if( r5 == NULL ) hl_null_access();
	r8 = r5->length;
	if( r4 >= r8 ) goto label$2958$48;
	r8 = r5->length;
	if( ((unsigned)r4) < ((unsigned)r8) ) goto label$2958$12;
	r10 = NULL;
	goto label$2958$15;
	label$2958$12:
	r12 = r5->array;
	r11 = ((vdynamic**)(r12 + 1))[r4];
	r10 = (hxd__fmt__hmd__Model)r11;
	label$2958$15:
	++r4;
	if( r10 == NULL ) hl_null_access();
	r13 = r10->name;
	if( r13 != r1 && (!r13 || !r1 || String___compare(r13,(vdynamic*)r1) != 0) ) goto label$2958$47;
	r9 = r10->props;
	if( !r9 ) goto label$2958$46;
	r7 = 0;
	r9 = r10->props;
	label$2958$23:
	if( r9 == NULL ) hl_null_access();
	r15 = r9->length;
	if( r7 >= r15 ) goto label$2958$46;
	r15 = r9->length;
	if( ((unsigned)r7) < ((unsigned)r15) ) goto label$2958$31;
	r16 = NULL;
	goto label$2958$34;
	label$2958$31:
	r12 = r9->array;
	r11 = ((vdynamic**)(r12 + 1))[r7];
	r16 = (venum*)r11;
	label$2958$34:
	++r7;
	if( r16 == NULL ) hl_null_access();
	r8 = HL__ENUM_INDEX__(r16);
	if( r2 == NULL ) hl_null_access();
	r15 = HL__ENUM_INDEX__(r2);
	if( r8 != r15 ) goto label$2958$45;
	r17 = Type_enumParameters(((vdynamic*)r16));
	if( r17 == NULL ) hl_null_access();
	r8 = 0;
	r11 = ((vdynamic* (*)(hl__types__ArrayDyn,int))r17->$type->vobj_proto[0])(r17,r8);
	return r11;
	label$2958$45:
	goto label$2958$23;
	label$2958$46:
	return r3;
	label$2958$47:
	goto label$2958$4;
	label$2958$48:
	if( r3 ) goto label$2958$54;
	r13 = (String)global$1171;
	r13 = String___add__(r13,r1);
	r14 = (String)global$1052;
	r13 = String___add__(r13,r14);
	hl_throw((vdynamic*)r13);
	label$2958$54:
	return r3;
}

h3d__scene__Object hxd_fmt_hmd_Library_makeObject(hxd__fmt__hmd__Library r0,vclosure* r1) {
	bool *r31;
	hxd__fmt__hmd__Skin r20;
	hxd__fmt__hmd__Model r15;
	String r8;
	hxd__fmt__hmd__Data r6;
	hl__types__ArrayObj r5, r12, r14;
	hl_type *r11;
	h3d__mat__Material r24;
	h3d__anim__Skin r21;
	h3d__scene__Skin r26;
	h3d__scene__Mesh r27;
	hl__types__ArrayBytes_Int r22;
	h3d__scene__MultiMaterial r28;
	h3d__prim__HMDModel r19;
	vclosure *r3;
	hxd__fmt__hmd__Position r30;
	vdynamic *r9;
	h3d__Matrix r29;
	vbyte *r25;
	h3d__scene__Object r16, r17, r18;
	varray *r10;
	int r4, r7, r13, r23;
	if( r1 ) goto label$2959$3;
	r3 = &cl$3483;
	r1 = r3;
	label$2959$3:
	r6 = r0->header;
	if( r6 == NULL ) hl_null_access();
	r5 = r6->models;
	if( r5 == NULL ) hl_null_access();
	r4 = r5->length;
	r7 = 0;
	if( r4 != r7 ) goto label$2959$12;
	r8 = (String)global$1172;
	hl_throw((vdynamic*)r8);
	label$2959$12:
	r11 = &type$1302;
	r4 = 0;
	r10 = hl_alloc_array(r11,r4);
	r5 = hl_types_ArrayObj_alloc(r10);
	r4 = 0;
	r6 = r0->header;
	if( r6 == NULL ) hl_null_access();
	r12 = r6->models;
	label$2959$20:
	if( r12 == NULL ) hl_null_access();
	r13 = r12->length;
	if( r4 >= r13 ) goto label$2959$154;
	r13 = r12->length;
	if( ((unsigned)r4) < ((unsigned)r13) ) goto label$2959$28;
	r15 = NULL;
	goto label$2959$31;
	label$2959$28:
	r10 = r12->array;
	r9 = ((vdynamic**)(r10 + 1))[r4];
	r15 = (hxd__fmt__hmd__Model)r9;
	label$2959$31:
	++r4;
	if( r15 == NULL ) hl_null_access();
	r7 = r15->geometry;
	r13 = 0;
	if( r7 >= r13 ) goto label$2959$41;
	r17 = (h3d__scene__Object)hl_alloc_obj(h3d__scene__Object__val);
	r18 = NULL;
	h3d_scene_Object_new(r17,r18);
	r16 = r17;
	goto label$2959$128;
	label$2959$41:
	r7 = r15->geometry;
	r19 = hxd_fmt_hmd_Library_makePrimitive(r0,r7);
	r20 = r15->skin;
	if( !r20 ) goto label$2959$78;
	r20 = r15->skin;
	r21 = hxd_fmt_hmd_Library_makeSkin(r0,r20);
	if( r21 == NULL ) hl_null_access();
	r21->primitive = ((h3d__prim__Primitive)r19);
	r11 = &type$298;
	r7 = 0;
	r10 = hl_alloc_array(r11,r7);
	r14 = hl_types_ArrayObj_alloc(r10);
	r7 = 0;
	r22 = r15->materials;
	label$2959$55:
	if( r22 == NULL ) hl_null_access();
	r23 = r22->length;
	if( r7 >= r23 ) goto label$2959$73;
	if( r14 == NULL ) hl_null_access();
	r13 = r7;
	++r7;
	r23 = r22->length;
	if( ((unsigned)r13) < ((unsigned)r23) ) goto label$2959$66;
	r13 = 0;
	goto label$2959$70;
	label$2959$66:
	r25 = r22->bytes;
	r23 = 2;
	r23 = r13 << r23;
	r13 = *(int*)(r25 + r23);
	label$2959$70:
	r24 = hxd_fmt_hmd_Library_makeMaterial(r0,r15,r13,r1);
	r13 = hl_types_ArrayObj_push(r14,((vdynamic*)r24));
	goto label$2959$55;
	label$2959$73:
	r26 = (h3d__scene__Skin)hl_alloc_obj(h3d__scene__Skin__val);
	r17 = NULL;
	h3d_scene_Skin_new(r26,r21,r14,r17);
	r16 = ((h3d__scene__Object)r26);
	goto label$2959$128;
	label$2959$78:
	r22 = r15->materials;
	if( r22 == NULL ) hl_null_access();
	r7 = r22->length;
	r13 = 1;
	if( r7 != r13 ) goto label$2959$100;
	r27 = (h3d__scene__Mesh)hl_alloc_obj(h3d__scene__Mesh__val);
	r22 = r15->materials;
	if( r22 == NULL ) hl_null_access();
	r7 = 0;
	r13 = r22->length;
	if( ((unsigned)r7) < ((unsigned)r13) ) goto label$2959$91;
	r7 = 0;
	goto label$2959$95;
	label$2959$91:
	r25 = r22->bytes;
	r13 = 2;
	r13 = r7 << r13;
	r7 = *(int*)(r25 + r13);
	label$2959$95:
	r24 = hxd_fmt_hmd_Library_makeMaterial(r0,r15,r7,r1);
	r17 = NULL;
	h3d_scene_Mesh_new(r27,((h3d__prim__Primitive)r19),r24,r17);
	r16 = ((h3d__scene__Object)r27);
	goto label$2959$128;
	label$2959$100:
	r11 = &type$298;
	r7 = 0;
	r10 = hl_alloc_array(r11,r7);
	r14 = hl_types_ArrayObj_alloc(r10);
	r7 = 0;
	r22 = r15->materials;
	label$2959$106:
	if( r22 == NULL ) hl_null_access();
	r23 = r22->length;
	if( r7 >= r23 ) goto label$2959$124;
	if( r14 == NULL ) hl_null_access();
	r13 = r7;
	++r7;
	r23 = r22->length;
	if( ((unsigned)r13) < ((unsigned)r23) ) goto label$2959$117;
	r13 = 0;
	goto label$2959$121;
	label$2959$117:
	r25 = r22->bytes;
	r23 = 2;
	r23 = r13 << r23;
	r13 = *(int*)(r25 + r23);
	label$2959$121:
	r24 = hxd_fmt_hmd_Library_makeMaterial(r0,r15,r13,r1);
	r13 = hl_types_ArrayObj_push(r14,((vdynamic*)r24));
	goto label$2959$106;
	label$2959$124:
	r28 = (h3d__scene__MultiMaterial)hl_alloc_obj(h3d__scene__MultiMaterial__val);
	r17 = NULL;
	h3d_scene_MultiMaterial_new(r28,((h3d__prim__Primitive)r19),r14,r17);
	r16 = ((h3d__scene__Object)r28);
	label$2959$128:
	if( r15 == NULL ) hl_null_access();
	r8 = r15->name;
	r16->name = r8;
	r30 = r15->position;
	if( r30 == NULL ) hl_null_access();
	r31 = NULL;
	r29 = hxd_fmt_hmd_Position_toMatrix(r30,r31);
	r16->defaultTransform = r29;
	r7 = r16->flags;
	r13 = 1;
	r7 = r7 | r13;
	r16->flags = r7;
	if( r5 == NULL ) hl_null_access();
	r7 = hl_types_ArrayObj_push(r5,((vdynamic*)r16));
	r7 = r15->parent;
	r13 = r5->length;
	if( ((unsigned)r7) < ((unsigned)r13) ) goto label$2959$147;
	r17 = NULL;
	goto label$2959$150;
	label$2959$147:
	r10 = r5->array;
	r9 = ((vdynamic**)(r10 + 1))[r7];
	r17 = (h3d__scene__Object)r9;
	label$2959$150:
	if( !r17 ) goto label$2959$153;
	if( r17 == NULL ) hl_null_access();
	h3d_scene_Object_addChild(r17,r16);
	label$2959$153:
	goto label$2959$20;
	label$2959$154:
	if( r5 == NULL ) hl_null_access();
	r4 = 0;
	r7 = r5->length;
	if( ((unsigned)r4) < ((unsigned)r7) ) goto label$2959$160;
	r16 = NULL;
	goto label$2959$163;
	label$2959$160:
	r10 = r5->array;
	r9 = ((vdynamic**)(r10 + 1))[r4];
	r16 = (h3d__scene__Object)r9;
	label$2959$163:
	return r16;
}

h3d__anim__Animation hxd_fmt_hmd_Library_loadAnimation(hxd__fmt__hmd__Library r0,String r1) {
	hxd__fs__FileEntry r18;
	hxd__fmt__hmd__Data r11;
	String r4, r16;
	hl__types__ArrayObj r10;
	haxe__ds__StringMap r3;
	hxd__res__Resource r19;
	hxd__fmt__hmd__Animation r8, r13;
	h3d__anim__LinearAnimation r17;
	h3d__anim__Animation r5, r7;
	vdynamic *r2;
	varray *r14;
	int r9, r12, r15;
	r3 = r0->cachedAnimations;
	if( r3 == NULL ) hl_null_access();
	if( r1 ) goto label$2960$5;
	r4 = (String)global$8;
	goto label$2960$6;
	label$2960$5:
	r4 = r1;
	label$2960$6:
	r2 = haxe_ds_StringMap_get(r3,r4);
	r5 = (h3d__anim__Animation)r2;
	if( !r5 ) goto label$2960$10;
	return r5;
	label$2960$10:
	r8 = NULL;
	if( r1 ) goto label$2960$35;
	r11 = r0->header;
	if( r11 == NULL ) hl_null_access();
	r10 = r11->animations;
	if( r10 == NULL ) hl_null_access();
	r9 = r10->length;
	r12 = 0;
	if( r9 != r12 ) goto label$2960$21;
	r7 = NULL;
	return r7;
	label$2960$21:
	r11 = r0->header;
	if( r11 == NULL ) hl_null_access();
	r10 = r11->animations;
	if( r10 == NULL ) hl_null_access();
	r9 = 0;
	r12 = r10->length;
	if( ((unsigned)r9) < ((unsigned)r12) ) goto label$2960$30;
	r13 = NULL;
	goto label$2960$33;
	label$2960$30:
	r14 = r10->array;
	r2 = ((vdynamic**)(r14 + 1))[r9];
	r13 = (hxd__fmt__hmd__Animation)r2;
	label$2960$33:
	r8 = r13;
	goto label$2960$63;
	label$2960$35:
	r9 = 0;
	r11 = r0->header;
	if( r11 == NULL ) hl_null_access();
	r10 = r11->animations;
	label$2960$39:
	if( r10 == NULL ) hl_null_access();
	r15 = r10->length;
	if( r9 >= r15 ) goto label$2960$57;
	r15 = r10->length;
	if( ((unsigned)r9) < ((unsigned)r15) ) goto label$2960$47;
	r13 = NULL;
	goto label$2960$50;
	label$2960$47:
	r14 = r10->array;
	r2 = ((vdynamic**)(r14 + 1))[r9];
	r13 = (hxd__fmt__hmd__Animation)r2;
	label$2960$50:
	++r9;
	if( r13 == NULL ) hl_null_access();
	r4 = r13->name;
	if( r4 != r1 && (!r4 || !r1 || String___compare(r4,(vdynamic*)r1) != 0) ) goto label$2960$56;
	r8 = r13;
	goto label$2960$57;
	label$2960$56:
	goto label$2960$39;
	label$2960$57:
	if( r8 ) goto label$2960$63;
	r4 = (String)global$1086;
	r4 = String___add__(r4,r1);
	r16 = (String)global$1173;
	r4 = String___add__(r4,r16);
	hl_throw((vdynamic*)r4);
	label$2960$63:
	r17 = hxd_fmt_hmd_Library_makeAnimation(r0,r8);
	if( r17 == NULL ) hl_null_access();
	r19 = r0->resource;
	if( r19 == NULL ) hl_null_access();
	r18 = r19->entry;
	if( r18 == NULL ) hl_null_access();
	r4 = ((String (*)(hxd__fs__FileEntry))r18->$type->vobj_proto[15])(r18);
	r17->resPath = r4;
	r3 = r0->cachedAnimations;
	if( r3 == NULL ) hl_null_access();
	if( r8 == NULL ) hl_null_access();
	r4 = r8->name;
	haxe_ds_StringMap_set(r3,r4,((vdynamic*)r17));
	if( r1 ) goto label$2960$81;
	r3 = r0->cachedAnimations;
	if( r3 == NULL ) hl_null_access();
	r4 = (String)global$8;
	haxe_ds_StringMap_set(r3,r4,((vdynamic*)r17));
	label$2960$81:
	return ((h3d__anim__Animation)r17);
}

h3d__anim__LinearAnimation hxd_fmt_hmd_Library_makeAnimation(hxd__fmt__hmd__Library r0,hxd__fmt__hmd__Animation r1) {
	hxd__fmt__hmd__Data r11;
	hxd__fs__FileEntry r9;
	String r3, r37;
	hl__types__ArrayObj r8, r14, r22;
	hl_type *r21;
	hxd__res__Resource r10;
	haxe__io__Bytes r24;
	bool r7, r18, r19;
	hxd__fmt__hmd__AnimationObject r15;
	hl__types__ArrayBytes_Float r33, r35;
	double r5, r30, r31, r32;
	h3d__anim__LinearFrame r23;
	vdynamic *r16;
	h3d__anim__LinearAnimation r2;
	vbyte *r34;
	varray *r17;
	int r4, r12, r13, r20, r25, r26, r27, r28, r29, r36;
	r2 = (h3d__anim__LinearAnimation)hl_alloc_obj(h3d__anim__LinearAnimation__val);
	if( r1 == NULL ) hl_null_access();
	r3 = r1->name;
	r4 = r1->frames;
	r5 = r1->sampling;
	h3d_anim_LinearAnimation_new(r2,r3,r4,r5);
	r5 = r1->speed;
	r2->speed = r5;
	r7 = r1->loop;
	r2->loop = r7;
	r8 = r1->events;
	if( !r8 ) goto label$2961$14;
	r8 = r1->events;
	h3d_anim_Animation_setEvents(((h3d__anim__Animation)r2),((vdynamic*)r8));
	label$2961$14:
	r10 = r0->resource;
	if( r10 == NULL ) hl_null_access();
	r9 = r10->entry;
	if( r9 == NULL ) hl_null_access();
	((void (*)(hxd__fs__FileEntry))r9->$type->vobj_proto[2])(r9);
	r11 = r0->header;
	if( r11 == NULL ) hl_null_access();
	r4 = r11->dataPosition;
	r12 = r1->dataPosition;
	r4 = r4 + r12;
	((void (*)(hxd__fs__FileEntry,int))r9->$type->vobj_proto[3])(r9,r4);
	r4 = 0;
	r8 = r1->objects;
	label$2961$27:
	if( r8 == NULL ) hl_null_access();
	r13 = r8->length;
	if( r4 >= r13 ) goto label$2961$428;
	r13 = r8->length;
	if( ((unsigned)r4) < ((unsigned)r13) ) goto label$2961$35;
	r15 = NULL;
	goto label$2961$38;
	label$2961$35:
	r17 = r8->array;
	r16 = ((vdynamic**)(r17 + 1))[r4];
	r15 = (hxd__fmt__hmd__AnimationObject)r16;
	label$2961$38:
	++r4;
	if( r15 == NULL ) hl_null_access();
	r12 = r15->flags;
	r13 = 1;
	r12 = r12 & r13;
	r13 = 0;
	if( r12 != r13 ) goto label$2961$47;
	r7 = false;
	goto label$2961$48;
	label$2961$47:
	r7 = true;
	label$2961$48:
	r12 = r15->flags;
	r13 = 2;
	r12 = r12 & r13;
	r13 = 0;
	if( r12 != r13 ) goto label$2961$55;
	r18 = false;
	goto label$2961$56;
	label$2961$55:
	r18 = true;
	label$2961$56:
	r12 = r15->flags;
	r13 = 4;
	r12 = r12 & r13;
	r13 = 0;
	if( r12 != r13 ) goto label$2961$63;
	r19 = false;
	goto label$2961$64;
	label$2961$63:
	r19 = true;
	label$2961$64:
	if( r7 ) goto label$2961$67;
	if( r18 ) goto label$2961$67;
	if( !r19 ) goto label$2961$235;
	label$2961$67:
	if( r1 == NULL ) hl_null_access();
	r12 = r1->frames;
	r13 = r15->flags;
	r20 = 32;
	r13 = r13 & r20;
	r20 = 0;
	if( r13 == r20 ) goto label$2961$76;
	r13 = 1;
	r12 = r13;
	label$2961$76:
	r21 = &type$1880;
	r13 = 0;
	r17 = hl_alloc_array(r21,r13);
	r14 = hl_types_ArrayObj_alloc(r17);
	r20 = 0;
	if( r20 >= r12 ) goto label$2961$92;
	if( r14 == NULL ) hl_null_access();
	r20 = 1;
	r13 = r12 - r20;
	r16 = NULL;
	r23 = (h3d__anim__LinearFrame)hl_dyn_castp(&r16,&type$9,&type$1880);
	r20 = r14->length;
	if( ((unsigned)r13) < ((unsigned)r20) ) goto label$2961$90;
	hl_types_ArrayObj___expand(r14,r13);
	label$2961$90:
	r17 = r14->array;
	((h3d__anim__LinearFrame*)(r17 + 1))[r13] = r23;
	label$2961$92:
	r22 = r14;
	if( !r7 ) goto label$2961$96;
	r13 = 3;
	goto label$2961$97;
	label$2961$96:
	r13 = 0;
	label$2961$97:
	if( !r18 ) goto label$2961$100;
	r20 = 3;
	goto label$2961$101;
	label$2961$100:
	r20 = 0;
	label$2961$101:
	r13 = r13 + r20;
	if( !r19 ) goto label$2961$105;
	r20 = 3;
	goto label$2961$106;
	label$2961$105:
	r20 = 0;
	label$2961$106:
	r13 = r13 + r20;
	r20 = 4;
	r13 = r13 * r20;
	r13 = r13 * r12;
	r24 = haxe_io_Bytes_alloc(r13);
	if( r9 == NULL ) hl_null_access();
	r20 = 0;
	((void (*)(hxd__fs__FileEntry,haxe__io__Bytes,int,int))r9->$type->vobj_proto[5])(r9,r24,r20,r13);
	r20 = 0;
	r25 = 0;
	r26 = r12;
	label$2961$117:
	if( r25 >= r26 ) goto label$2961$231;
	r27 = r25;
	++r25;
	r23 = (h3d__anim__LinearFrame)hl_alloc_obj(h3d__anim__LinearFrame__val);
	h3d_anim_LinearFrame_new(r23);
	if( !r7 ) goto label$2961$139;
	if( r24 == NULL ) hl_null_access();
	r5 = haxe_io_Bytes_getFloat(r24,r20);
	r23->tx = r5;
	r29 = 4;
	r28 = r20 + r29;
	r5 = haxe_io_Bytes_getFloat(r24,r28);
	r23->ty = r5;
	r29 = 4;
	r28 = r28 + r29;
	r5 = haxe_io_Bytes_getFloat(r24,r28);
	r23->tz = r5;
	r29 = 4;
	r28 = r28 + r29;
	r20 = r28;
	goto label$2961$148;
	label$2961$139:
	r28 = 0;
	r5 = (double)r28;
	r23->tx = r5;
	r28 = 0;
	r5 = (double)r28;
	r23->ty = r5;
	r28 = 0;
	r5 = (double)r28;
	r23->tz = r5;
	label$2961$148:
	if( !r18 ) goto label$2961$187;
	if( r24 == NULL ) hl_null_access();
	r5 = haxe_io_Bytes_getFloat(r24,r20);
	r23->qx = r5;
	r29 = 4;
	r28 = r20 + r29;
	r5 = haxe_io_Bytes_getFloat(r24,r28);
	r23->qy = r5;
	r29 = 4;
	r28 = r28 + r29;
	r5 = haxe_io_Bytes_getFloat(r24,r28);
	r23->qz = r5;
	r29 = 4;
	r28 = r28 + r29;
	r20 = r28;
	r28 = 1;
	r5 = (double)r28;
	r30 = r23->qx;
	r31 = r23->qx;
	r30 = r30 * r31;
	r31 = r23->qy;
	r32 = r23->qy;
	r31 = r31 * r32;
	r30 = r30 + r31;
	r31 = r23->qz;
	r32 = r23->qz;
	r31 = r31 * r32;
	r30 = r30 + r31;
	r5 = r5 - r30;
	r28 = 0;
	r31 = (double)r28;
	if( !(r5 < r31) ) goto label$2961$184;
	r30 = -r5;
	r30 = hl_math_sqrt(r30);
	r30 = -r30;
	goto label$2961$185;
	label$2961$184:
	r30 = hl_math_sqrt(r5);
	label$2961$185:
	r23->qw = r30;
	goto label$2961$199;
	label$2961$187:
	r28 = 0;
	r5 = (double)r28;
	r23->qx = r5;
	r28 = 0;
	r5 = (double)r28;
	r23->qy = r5;
	r28 = 0;
	r5 = (double)r28;
	r23->qz = r5;
	r28 = 1;
	r5 = (double)r28;
	r23->qw = r5;
	label$2961$199:
	if( !r19 ) goto label$2961$215;
	if( r24 == NULL ) hl_null_access();
	r5 = haxe_io_Bytes_getFloat(r24,r20);
	r23->sx = r5;
	r29 = 4;
	r28 = r20 + r29;
	r5 = haxe_io_Bytes_getFloat(r24,r28);
	r23->sy = r5;
	r29 = 4;
	r28 = r28 + r29;
	r5 = haxe_io_Bytes_getFloat(r24,r28);
	r23->sz = r5;
	r29 = 4;
	r28 = r28 + r29;
	r20 = r28;
	goto label$2961$224;
	label$2961$215:
	r28 = 1;
	r5 = (double)r28;
	r23->sx = r5;
	r28 = 1;
	r5 = (double)r28;
	r23->sy = r5;
	r28 = 1;
	r5 = (double)r28;
	r23->sz = r5;
	label$2961$224:
	if( r22 == NULL ) hl_null_access();
	r29 = r22->length;
	if( ((unsigned)r27) < ((unsigned)r29) ) goto label$2961$228;
	hl_types_ArrayObj___expand(r22,r27);
	label$2961$228:
	r17 = r22->array;
	((h3d__anim__LinearFrame*)(r17 + 1))[r27] = r23;
	goto label$2961$117;
	label$2961$231:
	if( r2 == NULL ) hl_null_access();
	if( r15 == NULL ) hl_null_access();
	r3 = r15->name;
	h3d_anim_LinearAnimation_addCurve(r2,r3,r22,r18,r19);
	label$2961$235:
	r12 = r15->flags;
	r13 = 8;
	r12 = r12 & r13;
	r13 = 0;
	if( r12 == r13 ) goto label$2961$295;
	if( r1 == NULL ) hl_null_access();
	r12 = r1->frames;
	r13 = 2;
	r12 = r12 * r13;
	r13 = 0;
	r34 = hl_alloc_bytes(r13);
	r13 = 0;
	r13 = 0;
	r33 = hl_types_ArrayBase_allocF64(r34,r13);
	r20 = 0;
	if( r20 >= r12 ) goto label$2961$263;
	if( r33 == NULL ) hl_null_access();
	r20 = 1;
	r13 = r12 - r20;
	r16 = NULL;
	r5 = (double)hl_dyn_castd(&r16,&type$9);
	r20 = r33->length;
	if( ((unsigned)r13) < ((unsigned)r20) ) goto label$2961$259;
	hl_types_ArrayBytes_Float___expand(r33,r13);
	label$2961$259:
	r34 = r33->bytes;
	r20 = 3;
	r20 = r13 << r20;
	*(double*)(r34 + r20) = r5;
	label$2961$263:
	r35 = r33;
	r13 = 8;
	r20 = r1->frames;
	r13 = r13 * r20;
	r24 = haxe_io_Bytes_alloc(r13);
	if( r9 == NULL ) hl_null_access();
	r20 = 0;
	((void (*)(hxd__fs__FileEntry,haxe__io__Bytes,int,int))r9->$type->vobj_proto[5])(r9,r24,r20,r13);
	r20 = 0;
	if( r33 == NULL ) hl_null_access();
	r25 = r33->length;
	label$2961$274:
	if( r20 >= r25 ) goto label$2961$291;
	r26 = r20;
	++r20;
	if( r35 == NULL ) hl_null_access();
	if( r24 == NULL ) hl_null_access();
	r29 = 4;
	r28 = r26 * r29;
	r5 = haxe_io_Bytes_getFloat(r24,r28);
	r28 = r35->length;
	if( ((unsigned)r26) < ((unsigned)r28) ) goto label$2961$286;
	hl_types_ArrayBytes_Float___expand(r35,r26);
	label$2961$286:
	r34 = r35->bytes;
	r28 = 3;
	r28 = r26 << r28;
	*(double*)(r34 + r28) = r5;
	goto label$2961$274;
	label$2961$291:
	if( r2 == NULL ) hl_null_access();
	if( r15 == NULL ) hl_null_access();
	r3 = r15->name;
	h3d_anim_LinearAnimation_addUVCurve(r2,r3,r35);
	label$2961$295:
	r12 = r15->flags;
	r13 = 16;
	r12 = r12 & r13;
	r13 = 0;
	if( r12 == r13 ) goto label$2961$353;
	if( r1 == NULL ) hl_null_access();
	r12 = r1->frames;
	r13 = 0;
	r34 = hl_alloc_bytes(r13);
	r13 = 0;
	r13 = 0;
	r33 = hl_types_ArrayBase_allocF64(r34,r13);
	r20 = 0;
	if( r20 >= r12 ) goto label$2961$321;
	if( r33 == NULL ) hl_null_access();
	r20 = 1;
	r13 = r12 - r20;
	r16 = NULL;
	r5 = (double)hl_dyn_castd(&r16,&type$9);
	r20 = r33->length;
	if( ((unsigned)r13) < ((unsigned)r20) ) goto label$2961$317;
	hl_types_ArrayBytes_Float___expand(r33,r13);
	label$2961$317:
	r34 = r33->bytes;
	r20 = 3;
	r20 = r13 << r20;
	*(double*)(r34 + r20) = r5;
	label$2961$321:
	r35 = r33;
	r13 = 4;
	r20 = r1->frames;
	r13 = r13 * r20;
	r24 = haxe_io_Bytes_alloc(r13);
	if( r9 == NULL ) hl_null_access();
	r20 = 0;
	((void (*)(hxd__fs__FileEntry,haxe__io__Bytes,int,int))r9->$type->vobj_proto[5])(r9,r24,r20,r13);
	r20 = 0;
	if( r33 == NULL ) hl_null_access();
	r25 = r33->length;
	label$2961$332:
	if( r20 >= r25 ) goto label$2961$349;
	r26 = r20;
	++r20;
	if( r35 == NULL ) hl_null_access();
	if( r24 == NULL ) hl_null_access();
	r29 = 4;
	r28 = r26 * r29;
	r5 = haxe_io_Bytes_getFloat(r24,r28);
	r28 = r35->length;
	if( ((unsigned)r26) < ((unsigned)r28) ) goto label$2961$344;
	hl_types_ArrayBytes_Float___expand(r35,r26);
	label$2961$344:
	r34 = r35->bytes;
	r28 = 3;
	r28 = r26 << r28;
	*(double*)(r34 + r28) = r5;
	goto label$2961$332;
	label$2961$349:
	if( r2 == NULL ) hl_null_access();
	if( r15 == NULL ) hl_null_access();
	r3 = r15->name;
	h3d_anim_LinearAnimation_addAlphaCurve(r2,r3,r35);
	label$2961$353:
	r12 = r15->flags;
	r13 = 64;
	r12 = r12 & r13;
	r13 = 0;
	if( r12 == r13 ) goto label$2961$427;
	r12 = 0;
	r14 = r15->props;
	label$2961$360:
	if( r14 == NULL ) hl_null_access();
	r20 = r14->length;
	if( r12 >= r20 ) goto label$2961$427;
	r13 = r12;
	++r12;
	r20 = r14->length;
	if( ((unsigned)r13) < ((unsigned)r20) ) goto label$2961$370;
	r3 = NULL;
	goto label$2961$373;
	label$2961$370:
	r17 = r14->array;
	r16 = ((vdynamic**)(r17 + 1))[r13];
	r3 = (String)r16;
	label$2961$373:
	if( r1 == NULL ) hl_null_access();
	r13 = r1->frames;
	r20 = 0;
	r34 = hl_alloc_bytes(r20);
	r20 = 0;
	r20 = 0;
	r33 = hl_types_ArrayBase_allocF64(r34,r20);
	r25 = 0;
	if( r25 >= r13 ) goto label$2961$394;
	if( r33 == NULL ) hl_null_access();
	r25 = 1;
	r20 = r13 - r25;
	r16 = NULL;
	r5 = (double)hl_dyn_castd(&r16,&type$9);
	r25 = r33->length;
	if( ((unsigned)r20) < ((unsigned)r25) ) goto label$2961$390;
	hl_types_ArrayBytes_Float___expand(r33,r20);
	label$2961$390:
	r34 = r33->bytes;
	r25 = 3;
	r25 = r20 << r25;
	*(double*)(r34 + r25) = r5;
	label$2961$394:
	r35 = r33;
	r20 = 4;
	r25 = r1->frames;
	r20 = r20 * r25;
	r24 = haxe_io_Bytes_alloc(r20);
	if( r9 == NULL ) hl_null_access();
	r25 = 0;
	((void (*)(hxd__fs__FileEntry,haxe__io__Bytes,int,int))r9->$type->vobj_proto[5])(r9,r24,r25,r20);
	r25 = 0;
	if( r33 == NULL ) hl_null_access();
	r26 = r33->length;
	label$2961$405:
	if( r25 >= r26 ) goto label$2961$422;
	r27 = r25;
	++r25;
	if( r35 == NULL ) hl_null_access();
	if( r24 == NULL ) hl_null_access();
	r36 = 4;
	r29 = r27 * r36;
	r5 = haxe_io_Bytes_getFloat(r24,r29);
	r29 = r35->length;
	if( ((unsigned)r27) < ((unsigned)r29) ) goto label$2961$417;
	hl_types_ArrayBytes_Float___expand(r35,r27);
	label$2961$417:
	r34 = r35->bytes;
	r29 = 3;
	r29 = r27 << r29;
	*(double*)(r34 + r29) = r5;
	goto label$2961$405;
	label$2961$422:
	if( r2 == NULL ) hl_null_access();
	if( r15 == NULL ) hl_null_access();
	r37 = r15->name;
	h3d_anim_LinearAnimation_addPropCurve(r2,r37,r3,r35);
	goto label$2961$360;
	label$2961$427:
	goto label$2961$27;
	label$2961$428:
	if( r9 == NULL ) hl_null_access();
	((void (*)(hxd__fs__FileEntry))r9->$type->vobj_proto[6])(r9);
	return r2;
}

void hxd_fmt_hmd_Library_loadSkin(hxd__fmt__hmd__Library r0,hxd__fmt__hmd__Geometry r1,h3d__anim__Skin r2) {
	String r13;
	hl__types__ArrayObj r9, r14;
	hl_type *r11;
	hxd__fmt__hmd__GeometryFormat r12;
	hl__types__ArrayBytes_Int r21, r23;
	hl__types__ArrayBytes_Single r7, r26;
	float r29;
	hl__types__ArrayBytes_Float r4, r19;
	double r20;
	hxd__fmt__hmd__GeometryBuffer r8;
	vdynamic *r5, *r15;
	vbyte *r17;
	varray *r10;
	int r6, r16, r18, r22, r24, r25, r27, r28, r30;
	if( r2 == NULL ) hl_null_access();
	r4 = r2->vertexWeights;
	if( !r4 ) goto label$2962$4;
	return;
	label$2962$4:
	if( r1 == NULL ) hl_null_access();
	r6 = r1->vertexCount;
	r2->vertexCount = r6;
	r11 = &type$2492;
	r6 = 1;
	r10 = hl_alloc_array(r11,r6);
	r12 = (hxd__fmt__hmd__GeometryFormat)hl_alloc_obj(hxd__fmt__hmd__GeometryFormat__val);
	r13 = (String)global$1125;
	r6 = 3;
	hxd_fmt_hmd_GeometryFormat_new(r12,r13,r6);
	r6 = 0;
	((hxd__fmt__hmd__GeometryFormat*)(r10 + 1))[r6] = r12;
	r9 = hl_types_ArrayObj_alloc(r10);
	r14 = NULL;
	r15 = NULL;
	r8 = hxd_fmt_hmd_Library_getBuffers(r0,r1,r9,r14,r15);
	if( r8 == NULL ) hl_null_access();
	r7 = r8->vertexes;
	r6 = r2->vertexCount;
	r16 = r2->bonesPerVertex;
	r6 = r6 * r16;
	r16 = 0;
	r17 = hl_alloc_bytes(r16);
	r16 = 0;
	r16 = 0;
	r4 = hl_types_ArrayBase_allocF64(r17,r16);
	r18 = 0;
	if( r18 >= r6 ) goto label$2962$44;
	if( r4 == NULL ) hl_null_access();
	r18 = 1;
	r16 = r6 - r18;
	r5 = NULL;
	r20 = (double)hl_dyn_castd(&r5,&type$9);
	r18 = r4->length;
	if( ((unsigned)r16) < ((unsigned)r18) ) goto label$2962$40;
	hl_types_ArrayBytes_Float___expand(r4,r16);
	label$2962$40:
	r17 = r4->bytes;
	r18 = 3;
	r18 = r16 << r18;
	*(double*)(r17 + r18) = r20;
	label$2962$44:
	r2->vertexWeights = r4;
	r16 = r2->vertexCount;
	r18 = r2->bonesPerVertex;
	r16 = r16 * r18;
	r18 = 0;
	r17 = hl_alloc_bytes(r18);
	r18 = 0;
	r18 = 0;
	r21 = hl_types_ArrayBase_allocI32(r17,r18);
	r22 = 0;
	if( r22 >= r16 ) goto label$2962$67;
	if( r21 == NULL ) hl_null_access();
	r22 = 1;
	r18 = r16 - r22;
	r5 = NULL;
	r22 = (int)hl_dyn_casti(&r5,&type$9,&type$3);
	r24 = r21->length;
	if( ((unsigned)r18) < ((unsigned)r24) ) goto label$2962$63;
	hl_types_ArrayBytes_Int___expand(r21,r18);
	label$2962$63:
	r17 = r21->bytes;
	r24 = 2;
	r24 = r18 << r24;
	*(int*)(r17 + r24) = r22;
	label$2962$67:
	r2->vertexJoints = r21;
	r18 = 0;
	r19 = r2->vertexWeights;
	if( r19 == NULL ) hl_null_access();
	r22 = r19->length;
	label$2962$72:
	if( r18 >= r22 ) goto label$2962$97;
	r24 = r18;
	++r18;
	if( r2 == NULL ) hl_null_access();
	r19 = r2->vertexWeights;
	if( r19 == NULL ) hl_null_access();
	if( r7 == NULL ) hl_null_access();
	r28 = r7->length;
	if( ((unsigned)r24) < ((unsigned)r28) ) goto label$2962$84;
	r29 = 0.;
	goto label$2962$88;
	label$2962$84:
	r17 = r7->bytes;
	r28 = 2;
	r28 = r24 << r28;
	r29 = *(float*)(r17 + r28);
	label$2962$88:
	r20 = (double)r29;
	r27 = r19->length;
	if( ((unsigned)r24) < ((unsigned)r27) ) goto label$2962$92;
	hl_types_ArrayBytes_Float___expand(r19,r24);
	label$2962$92:
	r17 = r19->bytes;
	r27 = 3;
	r27 = r24 << r27;
	*(double*)(r17 + r27) = r20;
	goto label$2962$72;
	label$2962$97:
	r11 = &type$2492;
	r18 = 1;
	r10 = hl_alloc_array(r11,r18);
	r12 = (hxd__fmt__hmd__GeometryFormat)hl_alloc_obj(hxd__fmt__hmd__GeometryFormat__val);
	r13 = (String)global$1126;
	r18 = 9;
	hxd_fmt_hmd_GeometryFormat_new(r12,r13,r18);
	r18 = 0;
	((hxd__fmt__hmd__GeometryFormat*)(r10 + 1))[r18] = r12;
	r9 = hl_types_ArrayObj_alloc(r10);
	r14 = NULL;
	r15 = NULL;
	r8 = hxd_fmt_hmd_Library_getBuffers(r0,r1,r9,r14,r15);
	if( r8 == NULL ) hl_null_access();
	r26 = r8->vertexes;
	r18 = 0;
	r22 = 0;
	if( r2 == NULL ) hl_null_access();
	r24 = r2->vertexCount;
	label$2962$116:
	if( r22 >= r24 ) goto label$2962$175;
	if( r26 == NULL ) hl_null_access();
	r25 = r22;
	++r22;
	r27 = r26->length;
	if( ((unsigned)r25) < ((unsigned)r27) ) goto label$2962$125;
	r29 = 0.;
	goto label$2962$129;
	label$2962$125:
	r17 = r26->bytes;
	r27 = 2;
	r27 = r25 << r27;
	r29 = *(float*)(r17 + r27);
	label$2962$129:
	r25 = hxd_fmt_hmd_Library_ftoint32(r0,r29);
	if( r2 == NULL ) hl_null_access();
	r23 = r2->vertexJoints;
	if( r23 == NULL ) hl_null_access();
	r27 = r18;
	++r18;
	r30 = 255;
	r28 = r25 & r30;
	r30 = r23->length;
	if( ((unsigned)r27) < ((unsigned)r30) ) goto label$2962$140;
	hl_types_ArrayBytes_Int___expand(r23,r27);
	label$2962$140:
	r17 = r23->bytes;
	r30 = 2;
	r30 = r27 << r30;
	*(int*)(r17 + r30) = r28;
	r23 = r2->vertexJoints;
	if( r23 == NULL ) hl_null_access();
	r27 = r18;
	++r18;
	r30 = 8;
	r28 = r25 >> r30;
	r30 = 255;
	r28 = r28 & r30;
	r30 = r23->length;
	if( ((unsigned)r27) < ((unsigned)r30) ) goto label$2962$155;
	hl_types_ArrayBytes_Int___expand(r23,r27);
	label$2962$155:
	r17 = r23->bytes;
	r30 = 2;
	r30 = r27 << r30;
	*(int*)(r17 + r30) = r28;
	r23 = r2->vertexJoints;
	if( r23 == NULL ) hl_null_access();
	r27 = r18;
	++r18;
	r30 = 16;
	r28 = r25 >> r30;
	r30 = 255;
	r28 = r28 & r30;
	r30 = r23->length;
	if( ((unsigned)r27) < ((unsigned)r30) ) goto label$2962$170;
	hl_types_ArrayBytes_Int___expand(r23,r27);
	label$2962$170:
	r17 = r23->bytes;
	r30 = 2;
	r30 = r27 << r30;
	*(int*)(r17 + r30) = r28;
	goto label$2962$116;
	label$2962$175:
	return;
}

int hxd_fmt_hmd_Library_ftoint32(hxd__fmt__hmd__Library r0,float r1) {
	haxe__io__Bytes r3;
	double r5;
	int r4;
	r3 = r0->tmp;
	if( r3 == NULL ) hl_null_access();
	r4 = 0;
	r5 = (double)r1;
	haxe_io_Bytes_setFloat(r3,r4,r5);
	r3 = r0->tmp;
	if( r3 == NULL ) hl_null_access();
	r4 = 0;
	r4 = haxe_io_Bytes_getInt32(r3,r4);
	return r4;
}

void hxd_fmt_hmd_Library_new(hxd__fmt__hmd__Library r0,hxd__res__Resource r1,hxd__fmt__hmd__Data r2) {
	haxe__ds__StringMap r8;
	hl__types__ArrayObj r5;
	hl_type *r7;
	haxe__io__Bytes r3;
	varray *r6;
	int r4;
	r4 = 4;
	r3 = haxe_io_Bytes_alloc(r4);
	r0->tmp = r3;
	r0->resource = r1;
	r0->header = r2;
	r7 = &type$2479;
	r4 = 0;
	r6 = hl_alloc_array(r7,r4);
	r5 = hl_types_ArrayObj_alloc(r6);
	r0->cachedPrimitives = r5;
	r8 = (haxe__ds__StringMap)hl_alloc_obj(haxe__ds__StringMap__val);
	haxe_ds_StringMap_new(r8);
	r0->cachedAnimations = r8;
	r8 = (haxe__ds__StringMap)hl_alloc_obj(haxe__ds__StringMap__val);
	haxe_ds_StringMap_new(r8);
	r0->cachedSkin = r8;
	return;
}

