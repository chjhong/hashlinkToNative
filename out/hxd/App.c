// Generated by HLC 4.0.0 (HL v4)
#include <hl/code.h>

void hxd_App_onResize(hxd__App r0) {
	return;
}

void hxd_App_setScene(hxd__App r0,vvirtual* r1,bool* r2) {
	String r15;
	vvirtual *r4;
	h3d__scene__$Scene r9;
	bool r3, r7;
	h3d__scene__Scene r10, r13;
	h2d__$Scene r5;
	hxd__SceneEvents r12;
	vdynamic *r14;
	h2d__Scene r6, r11;
	if( r2 ) goto label$264$3;
	r3 = true;
	goto label$264$4;
	label$264$3:
	r3 = *r2;
	label$264$4:
	r5 = (h2d__$Scene)global$96;
	r7 = hl_BaseType_check(((hl__BaseType)r5),((vdynamic*)r1));
	if( !r7 ) goto label$264$9;
	r6 = (h2d__Scene)hl_dyn_castp(&r1,&type$1318,&type$1333);
	goto label$264$10;
	label$264$9:
	r6 = NULL;
	label$264$10:
	r9 = (h3d__scene__$Scene)global$141;
	r7 = hl_BaseType_check(((hl__BaseType)r9),((vdynamic*)r1));
	if( !r7 ) goto label$264$15;
	r10 = (h3d__scene__Scene)hl_dyn_castp(&r1,&type$1318,&type$1304);
	goto label$264$16;
	label$264$15:
	r10 = NULL;
	label$264$16:
	if( !r6 ) goto label$264$28;
	r12 = r0->sevents;
	if( r12 == NULL ) hl_null_access();
	r11 = r0->s2d;
	if( r11 ) goto label$264$23;
	r4 = NULL;
	goto label$264$27;
	label$264$23:
	r4 = r11->$_f33;
	if( r4 ) goto label$264$27;
	r4 = hl_to_virtual(&type$1318,(vdynamic*)r11);
	r11->$_f33 = r4;
	label$264$27:
	hxd_SceneEvents_removeScene(r12,r4);
	label$264$28:
	if( !r10 ) goto label$264$40;
	r12 = r0->sevents;
	if( r12 == NULL ) hl_null_access();
	r13 = r0->s3d;
	if( r13 ) goto label$264$35;
	r4 = NULL;
	goto label$264$39;
	label$264$35:
	r4 = r13->$_f28;
	if( r4 ) goto label$264$39;
	r4 = hl_to_virtual(&type$1318,(vdynamic*)r13);
	r13->$_f28 = r4;
	label$264$39:
	hxd_SceneEvents_removeScene(r12,r4);
	label$264$40:
	r12 = r0->sevents;
	if( r12 == NULL ) hl_null_access();
	r14 = NULL;
	hxd_SceneEvents_addScene(r12,r1,r14);
	if( !r3 ) goto label$264$57;
	if( !r6 ) goto label$264$50;
	r11 = r0->s2d;
	if( r11 == NULL ) hl_null_access();
	h2d_Scene_dispose(r11);
	goto label$264$57;
	label$264$50:
	if( !r10 ) goto label$264$55;
	r13 = r0->s3d;
	if( r13 == NULL ) hl_null_access();
	h3d_scene_Scene_dispose(r13);
	goto label$264$57;
	label$264$55:
	r15 = (String)global$145;
	hl_throw((vdynamic*)r15);
	label$264$57:
	if( !r6 ) goto label$264$59;
	r0->s2d = r6;
	label$264$59:
	if( !r10 ) goto label$264$61;
	r0->s3d = r10;
	label$264$61:
	return;
}

void hxd_App_setScene2D(hxd__App r0,h2d__Scene r1,bool* r2) {
	vvirtual *r7;
	bool r3;
	hxd__SceneEvents r5;
	vdynamic *r9;
	h2d__Scene r6;
	int r8;
	if( r2 ) goto label$265$3;
	r3 = true;
	goto label$265$4;
	label$265$3:
	r3 = *r2;
	label$265$4:
	r5 = r0->sevents;
	if( r5 == NULL ) hl_null_access();
	r6 = r0->s2d;
	if( r6 ) goto label$265$10;
	r7 = NULL;
	goto label$265$14;
	label$265$10:
	r7 = r6->$_f33;
	if( r7 ) goto label$265$14;
	r7 = hl_to_virtual(&type$1318,(vdynamic*)r6);
	r6->$_f33 = r7;
	label$265$14:
	hxd_SceneEvents_removeScene(r5,r7);
	r5 = r0->sevents;
	if( r5 == NULL ) hl_null_access();
	if( r1 ) goto label$265$20;
	r7 = NULL;
	goto label$265$24;
	label$265$20:
	r7 = r1->$_f33;
	if( r7 ) goto label$265$24;
	r7 = hl_to_virtual(&type$1318,(vdynamic*)r1);
	r1->$_f33 = r7;
	label$265$24:
	r8 = 0;
	r9 = hl_alloc_dynamic(&type$3);
	r9->v.i = r8;
	hxd_SceneEvents_addScene(r5,r7,r9);
	if( !r3 ) goto label$265$31;
	r6 = r0->s2d;
	if( r6 == NULL ) hl_null_access();
	h2d_Scene_dispose(r6);
	label$265$31:
	r0->s2d = r1;
	return;
}

void hxd_App_render(hxd__App r0,h3d__Engine r1) {
	h3d__scene__Scene r3;
	h2d__Scene r4;
	r3 = r0->s3d;
	if( r3 == NULL ) hl_null_access();
	h3d_scene_Scene_render(r3,r1);
	r4 = r0->s2d;
	if( r4 == NULL ) hl_null_access();
	h2d_Scene_render(r4,r1);
	return;
}

void hxd_App_setup(hxd__App r0) {
	vvirtual *r14;
	hl__types__ArrayObj r2;
	venum *r16;
	hl_type *r4;
	bool r6;
	h3d__scene__Scene r10;
	hxd__Window r13;
	h3d__Engine r8;
	hxd__SceneEvents r12;
	vclosure *r9;
	h2d__Scene r11;
	vdynamic *r7, *r15;
	int r5;
	varray *r3;
	r4 = &type$9;
	r5 = 1;
	r3 = hl_alloc_array(r4,r5);
	r6 = false;
	r7 = hl_alloc_dynbool(r6);
	r5 = 0;
	((vdynamic**)(r3 + 1))[r5] = r7;
	r2 = hl_types_ArrayObj_alloc(r3);
	r8 = r0->engine;
	if( r8 == NULL ) hl_null_access();
	r9 = &cl$261;
	r8->onReady = r9;
	r8 = r0->engine;
	if( r8 == NULL ) hl_null_access();
	r9 = hl_alloc_closure_ptr(&type$1339,fun$1754,r0);
	r8->onResized = r9;
	r10 = (h3d__scene__Scene)hl_alloc_obj(h3d__scene__Scene__val);
	h3d_scene_Scene_new(r10);
	r0->s3d = r10;
	r11 = (h2d__Scene)hl_alloc_obj(h2d__Scene__val);
	h2d_Scene_new(r11);
	r0->s2d = r11;
	r12 = (hxd__SceneEvents)hl_alloc_obj(hxd__SceneEvents__val);
	r13 = NULL;
	hxd_SceneEvents_new(r12,r13);
	r0->sevents = r12;
	r12 = r0->sevents;
	if( r12 == NULL ) hl_null_access();
	r11 = r0->s2d;
	if( r11 ) goto label$267$32;
	r14 = NULL;
	goto label$267$36;
	label$267$32:
	r14 = r11->$_f33;
	if( r14 ) goto label$267$36;
	r14 = hl_to_virtual(&type$1318,(vdynamic*)r11);
	r11->$_f33 = r14;
	label$267$36:
	r15 = NULL;
	hxd_SceneEvents_addScene(r12,r14,r15);
	r12 = r0->sevents;
	if( r12 == NULL ) hl_null_access();
	r10 = r0->s3d;
	if( r10 ) goto label$267$44;
	r14 = NULL;
	goto label$267$48;
	label$267$44:
	r14 = r10->$_f28;
	if( r14 ) goto label$267$48;
	r14 = hl_to_virtual(&type$1318,(vdynamic*)r10);
	r10->$_f28 = r14;
	label$267$48:
	r15 = NULL;
	hxd_SceneEvents_addScene(r12,r14,r15);
	r16 = hl_alloc_enum(&type$1300,0);
	((Enum$1300*)r16)->p0 = (hl__types__ArrayObj)r2;
	((Enum$1300*)r16)->p1 = (hxd__App)r0;
	r9 = hl_alloc_closure_ptr(&type$1299,fun$1755,r16);
	hxd_App_loadAssets(r0,r9);
	return;
}

void hxd_App_dispose(hxd__App r0) {
	bool r3;
	h3d__scene__Scene r6;
	h3d__Engine r1;
	hxd__SceneEvents r7;
	vclosure *r2;
	h2d__Scene r5;
	r1 = r0->engine;
	if( r1 == NULL ) hl_null_access();
	r2 = &cl$261;
	r1->onResized = r2;
	r1 = r0->engine;
	if( r1 == NULL ) hl_null_access();
	r2 = &cl$261;
	r1->onContextLost = r2;
	r3 = true;
	r0->isDisposed = r3;
	r5 = r0->s2d;
	if( r5 == NULL ) hl_null_access();
	h2d_Scene_dispose(r5);
	r6 = r0->s3d;
	if( r6 == NULL ) hl_null_access();
	h3d_scene_Scene_dispose(r6);
	r7 = r0->sevents;
	if( r7 == NULL ) hl_null_access();
	hxd_SceneEvents_dispose(r7);
	return;
}

void hxd_App_loadAssets(hxd__App r0,vclosure* r1) {
	if( r1 == NULL ) hl_null_access();
	r1->hasValue ? ((void (*)(vdynamic*))r1->fun)((vdynamic*)r1->value) : ((void (*)(void))r1->fun)();
	return;
}

void hxd_App_init(hxd__App r0) {
	return;
}

void hxd_App_mainLoop(hxd__App r0) {
	bool r3;
	h3d__scene__Scene r7;
	h3d__Engine r8;
	hxd__$Timer r5;
	double r4;
	hxd__SceneEvents r2;
	h2d__Scene r6;
	hxd_Timer_update();
	r2 = r0->sevents;
	if( r2 == NULL ) hl_null_access();
	hxd_SceneEvents_checkEvents(r2);
	r3 = r0->isDisposed;
	if( !r3 ) goto label$271$7;
	return;
	label$271$7:
	r5 = (hxd__$Timer)global$146;
	r4 = r5->dt;
	((void (*)(hxd__App,double))r0->$type->vobj_proto[1])(r0,r4);
	r3 = r0->isDisposed;
	if( !r3 ) goto label$271$13;
	return;
	label$271$13:
	r5 = (hxd__$Timer)global$146;
	r4 = r5->dt;
	r6 = r0->s2d;
	if( r6 == NULL ) hl_null_access();
	h2d_Scene_setElapsedTime(r6,r4);
	r7 = r0->s3d;
	if( r7 == NULL ) hl_null_access();
	h3d_scene_Scene_setElapsedTime(r7,r4);
	r8 = r0->engine;
	if( r8 == NULL ) hl_null_access();
	r3 = h3d_Engine_render(r8,((vdynamic*)r0));
	return;
}

void hxd_App_update(hxd__App r0,double r1) {
	return;
}

void hxd_App_new(hxd__App r0) {
	hl__types__ArrayObj r2;
	venum *r12;
	hl_type *r4;
	haxe__Timer r11;
	h3d__Engine r6;
	h3d__$Engine r7;
	vclosure *r10;
	vdynamic *r9;
	int r5, r8;
	varray *r3;
	r4 = &type$126;
	r5 = 1;
	r3 = hl_alloc_array(r4,r5);
	r7 = (h3d__$Engine)global$38;
	r6 = r7->CURRENT;
	r5 = 0;
	((h3d__Engine*)(r3 + 1))[r5] = r6;
	r2 = hl_types_ArrayObj_alloc(r3);
	if( r2 == NULL ) hl_null_access();
	r5 = 0;
	r8 = r2->length;
	if( ((unsigned)r5) < ((unsigned)r8) ) goto label$262$14;
	r6 = NULL;
	goto label$262$17;
	label$262$14:
	r3 = r2->array;
	r9 = ((vdynamic**)(r3 + 1))[r5];
	r6 = (h3d__Engine)r9;
	label$262$17:
	if( !r6 ) goto label$262$42;
	r5 = 0;
	r8 = r2->length;
	if( ((unsigned)r5) < ((unsigned)r8) ) goto label$262$23;
	r6 = NULL;
	goto label$262$26;
	label$262$23:
	r3 = r2->array;
	r9 = ((vdynamic**)(r3 + 1))[r5];
	r6 = (h3d__Engine)r9;
	label$262$26:
	r0->engine = r6;
	r5 = 0;
	r8 = r2->length;
	if( ((unsigned)r5) < ((unsigned)r8) ) goto label$262$32;
	r6 = NULL;
	goto label$262$35;
	label$262$32:
	r3 = r2->array;
	r9 = ((vdynamic**)(r3 + 1))[r5];
	r6 = (h3d__Engine)r9;
	label$262$35:
	if( r6 == NULL ) hl_null_access();
	r10 = hl_alloc_closure_ptr(&type$1339,hxd_App_setup,r0);
	r6->onReady = r10;
	r10 = hl_alloc_closure_ptr(&type$1339,hxd_App_setup,r0);
	r5 = 0;
	r11 = haxe_Timer_delay(r10,r5);
	goto label$262$47;
	label$262$42:
	r12 = hl_alloc_enum(&type$1300,0);
	((Enum$1300*)r12)->p0 = (hl__types__ArrayObj)r2;
	((Enum$1300*)r12)->p1 = (hxd__App)r0;
	r10 = hl_alloc_closure_ptr(&type$1299,fun$1753,r12);
	hxd_System_start(r10);
	label$262$47:
	return;
}

void hxd_App_staticHandler() {
	return;
}

