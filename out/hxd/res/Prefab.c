// Generated by HLC 4.0.0 (HL v4)
#include <hl/code.h>

hxd__prefab__Prefab hxd_res_Prefab_load(hxd__res__Prefab r0) {
	hxd__fs__FileEntry r6;
	String r5;
	haxe__format__JsonParser r4;
	vclosure *r7;
	vdynamic *r3;
	hxd__prefab__Prefab r2;
	r2 = r0->lib;
	if( !r2 ) goto label$3738$4;
	r2 = r0->lib;
	return r2;
	label$3738$4:
	r4 = (haxe__format__JsonParser)hl_alloc_obj(haxe__format__JsonParser__val);
	r6 = r0->entry;
	if( r6 == NULL ) hl_null_access();
	r5 = hxd_fs_FileEntry_getText(r6);
	haxe_format_JsonParser_new(r4,r5);
	r3 = haxe_format_JsonParser_doParse(r4);
	r6 = r0->entry;
	if( r6 == NULL ) hl_null_access();
	r5 = hxd_fs_FileEntry_get_extension(r6);
	r2 = hxd_prefab_Library_create(r5);
	r0->lib = r2;
	r2 = r0->lib;
	if( r2 == NULL ) hl_null_access();
	((void (*)(hxd__prefab__Prefab,vdynamic*))r2->$type->vobj_proto[0])(r2,r3);
	r7 = hl_alloc_closure_ptr(&type$3727,fun$3747,r0);
	hxd_res_Resource_watch(((hxd__res__Resource)r0),r7);
	r2 = r0->lib;
	return r2;
}

void hxd_res_Prefab_new(hxd__res__Prefab r0,hxd__fs__FileEntry r1) {
	hxd_res_Resource_new(((hxd__res__Resource)r0),r1);
	return;
}

